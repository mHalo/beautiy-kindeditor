/*
mhalo.kindeditor 4.4.3 (2023-02-22), 
Copyright (C) kindeditor.net, Licence: http://kindeditor.net/license.php 
*/
!function(a,b){"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.KindEditor=b())}(this,function(){function a(a){return a?"[object Array]"===Object.prototype.toString.call(a):!1}function b(a){return a?"[object Function]"===Object.prototype.toString.call(a):!1}function c(a,b){for(var c=0,d=b.length;d>c;c++)if(a===b[c])return c;return-1}function d(b,c){if(a(b))for(var d=0,e=b.length;e>d&&c.call(b[d],d,b[d])!==!1;d++);else for(var f in b)if(b.hasOwnProperty(f)&&c.call(b[f],f,b[f])===!1)break}function e(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function f(a,b,c){return c=void 0===c?",":c,(c+b+c).indexOf(c+a+c)>=0}function g(a,b){return b=b||"px",a&&/^-?\d+(?:\.\d+)?$/.test(a)?a+b:a}function h(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function i(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function j(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function k(a){var b=a.split("-");return a="",d(b,function(b,c){a+=b>0?c.charAt(0).toUpperCase()+c.substr(1):c}),a}function l(a){function b(a){var b=parseInt(a,10).toString(16).toUpperCase();return b.length>1?b:"0"+b}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,function(a,c,d,e){return"#"+b(c)+b(d)+b(e)})}function m(b,c){c=void 0===c?",":c;var e,f={},g=a(b)?b:b.split(c);return d(g,function(a,b){if(e=/^(\d+)\.\.(\d+)$/.exec(b))for(var c=parseInt(e[1],10);c<=parseInt(e[2],10);c++)f[c.toString()]=!0;else f[b]=!0}),f}function n(a,b){return Array.prototype.slice.call(a,b||0)}function o(a,b){return void 0===a?b:a}function p(a){return!a||/[<>"]/.test(a)}function q(a,b){return a.indexOf("?")>=0?a+"&"+b:a+"?"+b}function r(a,b,c){c||(c=b,b=null);var e;if(b){var f=function(){};f.prototype=b.prototype,e=new f,d(c,function(a,b){e[a]=b})}else e=c;e.constructor=a,a.prototype=e,a.parent=b?b.prototype:null}function s(a){var b;(b=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))&&(a=b[0]);var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(c.lastIndex=0,c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return window.eval("("+a+")");throw"JSON parse error"}function t(){for(var a,b=document.getElementsByTagName("script"),c=0,d=b.length;d>c;c++)if(a=b[c].src||"",/kindeditor[\w\-\.]*\.js/.test(a))return a.substring(0,a.lastIndexOf("/")+1);return""}function u(a,b,c){a.addEventListener?a.addEventListener(b,c,Sb):a.attachEvent&&a.attachEvent("on"+b,c)}function v(a,b,c){a.removeEventListener?a.removeEventListener(b,c,Sb):a.detachEvent&&a.detachEvent("on"+b,c)}function w(a,b){this.init(a,b)}function x(a){return a[Xb]||null}function y(a){return a[Xb]=++Yb,Yb}function z(a){try{delete a[Xb]}catch(b){a.removeAttribute&&a.removeAttribute(Xb)}}function A(a,b,e){if(b.indexOf(",")>=0)return void d(b.split(","),function(){A(a,this,e)});var f=x(a);f||(f=y(a)),void 0===Zb[f]&&(Zb[f]={});var g=Zb[f][b];g&&g.length>0?v(a,b,g[0]):(Zb[f][b]=[],Zb[f].el=a),g=Zb[f][b],0===g.length&&(g[0]=function(b){var c=b?new w(a,b):void 0;d(g,function(b,d){b>0&&d&&d.call(a,c)})}),c(e,g)<0&&g.push(e),u(a,b,g[0])}function B(a,b,c){if(b&&b.indexOf(",")>=0)return void d(b.split(","),function(){B(a,this,c)});var e=x(a);if(e){if(void 0===b)return void(e in Zb&&(d(Zb[e],function(b,c){"el"!=b&&c.length>0&&v(a,b,c[0])}),delete Zb[e],z(a)));if(Zb[e]){var f=Zb[e][b];if(f&&f.length>0){void 0===c?(v(a,b,f[0]),delete Zb[e][b]):(d(f,function(a,b){a>0&&b===c&&f.splice(a,1)}),1==f.length&&(v(a,b,f[0]),delete Zb[e][b]));var g=0;d(Zb[e],function(){g++}),2>g&&(delete Zb[e],z(a))}}}}function C(a,b){if(b.indexOf(",")>=0)return void d(b.split(","),function(){C(a,this)});var c=x(a);if(c){var e=Zb[c][b];Zb[c]&&e&&e.length>0&&e[0]()}}function D(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0),A(a,"keydown",function(d){!d.ctrlKey||d.which!=b||d.shiftKey||d.altKey||(c.call(a),d.stop())})}function E(a){function b(){e||(e=!0,a(KindEditor),$b=!0)}function c(){if(!e){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(c,100)}b()}}function d(){"complete"===document.readyState&&b()}if($b)return void a(KindEditor);var e=!1;if(document.addEventListener)A(document,"DOMContentLoaded",b);else if(document.attachEvent){A(document,"readystatechange",d);var f=!1;try{f=null==window.frameElement}catch(g){}document.documentElement.doScroll&&f&&c()}A(window,"load",b)}function F(a){a=a.replace(/&quot;/g,'"');for(var b,c={},d=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;b=d.exec(a);){var f=e(b[1].toLowerCase()),g=e(l(b[2]));c[f]=g}return c}function G(a){for(var b,c={},d=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;b=d.exec(a);){var e=(b[1]||b[2]||b[4]||b[6]).toLowerCase(),f=(b[2]?b[3]:b[4]?b[5]:b[7])||"";c[e]=f}return c}function H(a,b){return a=/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(a,c,d,e){return(" "+d+" ").indexOf(" "+b+" ")<0?""===d?c+b+e:c+d+" "+b+e:a}):a.substr(0,a.length-1)+' class="'+b+'">'}function I(a){var b="";return d(F(a),function(a,c){b+=a+":"+c+";"}),b}function J(a,b,d,e){function f(a){for(var b=a.split("/"),c=[],d=0,e=b.length;e>d;d++){var f=b[d];".."==f?c.length>0&&c.pop():""!==f&&"."!=f&&c.push(f)}return"/"+c.join("/")}function g(b,c){if(a.substr(0,b.length)===b){for(var d=[],f=0;c>f;f++)d.push("..");var h=".";return d.length>0&&(h+="/"+d.join("/")),"/"==e&&(h+="/"),h+a.substr(b.length)}return(i=/^(.*)\//.exec(b))?g(i[1],++c):void 0}if(b=o(b,"").toLowerCase(),"data:"!=a.substr(0,5)&&(a=a.replace(/([^:])\/\//g,"$1/")),c(b,["absolute","relative","domain"])<0)return a;if(d=d||location.protocol+"//"+location.host,void 0===e){var h=location.pathname.match(/^(\/.*)\//);e=h?h[1]:""}var i;if(i=/^(\w+:\/\/[^\/]*)/.exec(a)){if(i[1]!==d)return a}else if(/^\w+:/.test(a))return a;return/^\//.test(a)?a=d+f(a.substr(1)):/^\w+:\/\//.test(a)||(a=d+f(e+"/"+a)),"relative"===b?a=g(d+e,0).substr(2):"absolute"===b&&a.substr(0,d.length)===d&&(a=a.substr(d.length)),a}function K(a,b,f,g,h){null==a&&(a=""),f=f||"",g=o(g,!1),h=o(h,"	");var i="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(a,b,c,d){return b+c.replace(/<(?:br|br\s[^>]*)>/gi,"\n")+d}),a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/gi,"</p>"),a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/gi,"$1<br />$2"),a=a.replace(/\u200B/g,""),a=a.replace(/\u00A9/g,"&copy;"),a=a.replace(/\u00AE/g,"&reg;"),a=a.replace(/\u2003/g,"&emsp;"),a=a.replace(/\u3000/g,"&emsp;"),a=a.replace(/<[^>]+/g,function(a){return a.replace(/\s+/g," ")});var j={};b&&(d(b,function(a,b){for(var c=a.split(","),d=0,e=c.length;e>d;d++)j[c[d]]=m(b)}),j.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/gi,"")),j.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/gi,"")));var k=/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,l=[];return a=a.replace(k,function(a,e,k,m,n,o,p){var q=a,r=e||"",s=k||"",t=m.toLowerCase(),u=n||"",v=o?" "+o:"",w=p||"";if(b&&!j[t])return"";if(""===v&&Lb[t]&&(v=" /"),Jb[t]&&(r&&(r=" "),w&&(w=" ")),Ob[t]&&(s?w="\n":r="\n"),g&&"br"==t&&(w="\n"),Kb[t]&&!Ob[t])if(g){s&&l.length>0&&l[l.length-1]===t?l.pop():l.push(t),r="\n",w="\n";for(var x=0,y=s?l.length:l.length-1;y>x;x++)r+=h,s||(w+=h);v?l.pop():s||(w+=h)}else r=w="";if(""!==u){var z=G(q);if("font"===t){var A={},B="";d(z,function(a,b){"color"===a&&(A.color=b,delete z[a]),"size"===a&&(A["font-size"]=i[parseInt(b,10)-1]||"",delete z[a]),"face"===a&&(A["font-family"]=b,delete z[a]),"style"===a&&(B=b)}),B&&!/;$/.test(B)&&(B+=";"),d(A,function(a,b){""!==b&&(/\s/.test(b)&&(b="'"+b+"'"),B+=a+":"+b+";")}),z.style=B}d(z,function(a,e){if(Qb[a]&&(z[a]=a),c(a,["src","href"])>=0&&(z[a]=J(e,f)),(b&&"style"!==a&&!j[t]["*"]&&!j[t][a]||"body"===t&&"contenteditable"===a||/^kindeditor_\d+$/.test(a))&&delete z[a],"style"===a&&""!==e){var g=F(e);d(g,function(a,c){!b||j[t].style||j[t]["."+a]||delete g[a]});var h="";d(g,function(a,b){h+=a+":"+b+";"}),z.style=h}}),u="",d(z,function(a,b){("style"!==a||""!==b)&&(b=b.replace(/"/g,"&quot;"),u+=" "+a+'="'+b+'"')})}return"font"===t&&(t="span"),r+"<"+s+t+u+v+">"+w}),a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(a,b,c,d){return b+c.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+d}),a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n"),e(a)}function L(a,b){return a=a.replace(/<meta[\s\S]*?>/gi,"").replace(/<![\s\S]*?>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/gi,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/gi,"").replace(/<xml>[\s\S]*?<\/xml>/gi,"").replace(/<(?:table|td)[^>]*>/gi,function(a){return a.replace(/border-bottom:([#\w\s]+)/gi,"border:$1")}),K(a,b)}function M(a){return/\.(rm|rmvb)(\?|$)/i.test(a)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(a)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function N(a){return/realaudio/i.test(a)?"ke-rm":/flash/i.test(a)?"ke-flash":"ke-media"}function O(a){return G(unescape(a))}function P(a){var b="<embed ";return d(a,function(a,c){b+=a+'="'+c+'" '}),b+="/>"}function Q(a,b){var c=b.width,d=b.height,e=b.type||M(b.src),f=P(b),g="";/\D/.test(c)?g+="width:"+c+";":c>0&&(g+="width:"+c+"px;"),/\D/.test(d)?g+="height:"+d+";":d>0&&(g+="height:"+d+"px;");var h='<img class="'+N(e)+'" src="'+a+'" ';return""!==g&&(h+='style="'+g+'" '),h+='data-ke-tag="'+escape(f)+'" alt="" />'}function R(a,b){var c=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?c(b):c}function S(a,b){if(9==a.nodeType&&9!=b.nodeType)return!0;for(;b=b.parentNode;)if(b==a)return!0;return!1}function T(a,b){b=b.toLowerCase();var c=null;if(ac||"script"==a.nodeName.toLowerCase())try{c=a.getAttribute(b,2)}catch(d){c=a.getAttribute(b,1)}else{var e=a.ownerDocument.createElement("div");e.appendChild(a.cloneNode(!1));var f=G(j(e.innerHTML));b in f&&(c=f[b])}return"style"===b&&null!==c&&(c=I(c)),c}function U(a,b){function e(a){return"string"!=typeof a?a:a.replace(/([^\w\-])/g,"\\$1")}function f(a){return a.replace(/\\/g,"")}function g(a,b){return"*"===a||a.toLowerCase()===e(b.toLowerCase())}function h(a,b,c){var d=[],e=c.ownerDocument||c,h=e.getElementById(f(a));return h&&g(b,h.nodeName)&&S(c,h)&&d.push(h),d}function i(a,b,c){var d,e,h,i,j=c.ownerDocument||c,k=[];if(c.getElementsByClassName)for(d=c.getElementsByClassName(f(a)),e=0,h=d.length;h>e;e++)i=d[e],g(b,i.nodeName)&&k.push(i);else if(j.querySelectorAll)for(d=j.querySelectorAll(("#document"!==c.nodeName?c.nodeName+" ":"")+b+"."+a),e=0,h=d.length;h>e;e++)i=d[e],S(c,i)&&k.push(i);else for(d=c.getElementsByTagName(b),a=" "+a+" ",e=0,h=d.length;h>e;e++)if(i=d[e],1==i.nodeType){var l=i.className;l&&(" "+l+" ").indexOf(a)>-1&&k.push(i)}return k}function j(a,b,c){for(var d,e=[],h=c.ownerDocument||c,i=h.getElementsByName(f(a)),j=0,k=i.length;k>j;j++)d=i[j],g(b,d.nodeName)&&S(c,d)&&null!==d.getAttribute("name")&&e.push(d);return e}function k(a,b,c,d){for(var f,g=[],h=d.getElementsByTagName(c),i=0,j=h.length;j>i;i++)f=h[i],1==f.nodeType&&(null===b?null!==T(f,a)&&g.push(f):b===e(T(f,a))&&g.push(f));return g}function l(a,b){var c,d=[];c=/^((?:\\.|[^.#\s\[<>])+)/.exec(a);var e=c?c[1]:"*";if(c=/#((?:[\w\-]|\\.)+)$/.exec(a))d=h(c[1],e,b);else if(c=/\.((?:[\w\-]|\\.)+)$/.exec(a))d=i(c[1],e,b);else if(c=/\[((?:[\w\-]|\\.)+)\]/.exec(a))d=k(c[1].toLowerCase(),null,e,b);else if(c=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(a)){var f=c[1].toLowerCase(),g=c[2];d="id"===f?h(g,e,b):"class"===f?i(g,e,b):"name"===f?j(g,e,b):k(f,g,e,b)}else for(var l,m=b.getElementsByTagName(e),n=0,o=m.length;o>n;n++)l=m[n],1==l.nodeType&&d.push(l);return d}var m=a.split(",");if(m.length>1){var n=[];return d(m,function(){d(U(this,b),function(){c(this,n)<0&&n.push(this)})}),n}b=b||document;for(var o,p=[],q=/((?:\\.|[^\s>])+|[\s>])/g;o=q.exec(a);)" "!==o[1]&&p.push(o[1]);var r=[];if(1==p.length)return l(p[0],b);var s,t,u,v,w,x,y,z,A,B,C,D=!1;for(x=0,A=p.length;A>x;x++)if(s=p[x],">"!==s){if(x>0){for(t=[],y=0,B=r.length;B>y;y++)for(v=r[y],u=l(s,v),z=0,C=u.length;C>z;z++)w=u[z],D?v===w.parentNode&&t.push(w):t.push(w);r=t}else r=l(s,b);if(0===r.length)return[]}else D=!0;return r}function V(a,b){var c=U(a,b);return c.length>0?c[0]:null}function W(a){return Ib(a)[0]}function X(a){return a?a.ownerDocument||a.document||a:document}function Y(a){if(!a)return window;var b=X(a);return b.parentWindow||b.defaultView}function Z(a,b){if(1==a.nodeType){var c=X(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var d=c.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d)}catch(e){Ib(a).empty(),Ib("@"+b,c).each(function(){a.appendChild(this)})}}}function $(a,b){return f(b,a.className," ")}function _(a,b,c){vb&&8>Fb&&"class"==b.toLowerCase()&&(b="className"),a.setAttribute(b,""+c)}function aa(a,b){vb&&8>Fb&&"class"==b.toLowerCase()&&(b="className"),_(a,b,""),a.removeAttribute(b)}function ba(a){return a&&a.nodeName?a.nodeName.toLowerCase():""}function ca(a,b){var c=Y(a),d=k(b),e="";if(c.getComputedStyle){var f=c.getComputedStyle(a,null);e=f[d]||f.getPropertyValue(b)||a.style[d]}else a.currentStyle&&(e=a.currentStyle[d]||a.style[d]);return e}function da(a){return!!Rb[ba(a)]}function ea(a){return a=a||document,Cb?a.body:a.documentElement}function fa(a){a=a||document;var b,c;return vb||wb||zb?(b=ea(a).scrollLeft,c=ea(a).scrollTop):(b=Y(a).scrollX,c=Y(a).scrollY),{x:b,y:c}}function ga(a){this.init(a)}function ha(a){return a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a}function ia(a,b,c){function d(d,e,f){var g,i=d.nodeValue.length;if(b){var j=d.cloneNode(!0);g=e>0?j.splitText(e):j,i>f&&g.splitText(f-e)}if(c){var k=d;if(e>0&&(k=d.splitText(e),a.setStart(d,e)),i>f){var l=k.splitText(f-e);a.setEnd(l,0)}h.push(k)}return g}function e(){c&&a.up().collapse(!0);for(var b=0,d=h.length;d>b;b++){var e=h[b];e.parentNode&&e.parentNode.removeChild(e)}}function f(e,n){for(var o,p=e.firstChild;p;){var q=new na(g).selectNode(p);if(j=q.compareBoundaryPoints(dc,a),j>=0&&0>=k&&(k=q.compareBoundaryPoints(cc,a)),k>=0&&0>=l&&(l=q.compareBoundaryPoints(ec,a)),l>=0&&0>=m&&(m=q.compareBoundaryPoints(fc,a)),m>=0)return!1;if(o=p.nextSibling,j>0)if(1==p.nodeType)if(k>=0&&0>=l)b&&n.appendChild(p.cloneNode(!0)),c&&h.push(p);else{var r;if(b&&(r=p.cloneNode(!1),n.appendChild(r)),f(p,r)===!1)return!1}else if(3==p.nodeType){var s;if(s=p==i.startContainer?d(p,i.startOffset,p.nodeValue.length):p==i.endContainer?d(p,0,i.endOffset):d(p,0,p.nodeValue.length),b)try{n.appendChild(s)}catch(t){}}p=o}}var g=a.doc,h=[],i=a.cloneRange().down(),j=-1,k=-1,l=-1,m=-1,n=a.commonAncestor(),o=g.createDocumentFragment();if(3==n.nodeType){var p=d(n,a.startOffset,a.endOffset);return b&&o.appendChild(p),e(),b?o:a}f(n,o),c&&a.up().collapse(!0);for(var q=0,r=h.length;r>q;q++){var s=h[q];s.parentNode&&s.parentNode.removeChild(s)}return b?o:a}function ja(a,b){for(var c=b;c;){var d=Ib(c);if("marquee"==d.name||"select"==d.name)return;c=c.parentNode}try{a.moveToElementText(b)}catch(e){}}function ka(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;if(0===f.length)return{node:e.parentNode,offset:Ib(e).index()};var g=c,h=0,i=-1,j=a.duplicate();ja(j,e);for(var k=0,l=f.length;l>k;k++){var m=f[k];if(i=j.compareEndPoints("StartToStart",d),0===i)return{node:m.parentNode,offset:k};if(1==m.nodeType){var n,o=a.duplicate(),p=Ib(m),q=m;p.isControl()&&(n=c.createElement("span"),p.after(n),q=n,h+=p.text().replace(/\r\n|\n|\r/g,"").length),ja(o,q),j.setEndPoint("StartToEnd",o),i>0?h+=o.text.replace(/\r\n|\n|\r/g,"").length:h=0,n&&Ib(n).remove()}else 3==m.nodeType&&(j.moveStart("character",m.nodeValue.length),h+=m.nodeValue.length);0>i&&(g=m)}if(0>i&&1==g.nodeType)return{node:e,offset:Ib(e.lastChild).index()+1};if(i>0)for(;g.nextSibling&&1==g.nodeType;)g=g.nextSibling;if(j=a.duplicate(),ja(j,e),j.setEndPoint("StartToEnd",d),h-=j.text.replace(/\r\n|\n|\r/g,"").length,i>0&&3==g.nodeType)for(var r=g.previousSibling;r&&3==r.nodeType;)h-=r.nodeValue.length,r=r.previousSibling;return{node:g,offset:h}}function la(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();if(c==a)return d.collapse(!0),d;if(1==a.nodeType&&a.childNodes.length>0){var e,f,g=a.childNodes;if(0===b?(f=g[0],e=!0):(f=g[b-1],e=!1),!f)return d;if("head"===Ib(f).name)return 1===b&&(e=!0),2===b&&(e=!1),d.collapse(e),d;if(1==f.nodeType){var h,i=Ib(f);return i.isControl()&&(h=c.createElement("span"),e?i.before(h):i.after(h),f=h),ja(d,f),d.collapse(e),h&&Ib(h).remove(),d}a=f,b=e?0:f.nodeValue.length}var j=c.createElement("span");return Ib(a).before(j),ja(d,j),d.moveStart("character",b),Ib(j).remove(),d}function ma(a){function b(a){"tr"==Ib(a.node).name&&(a.node=a.node.cells[a.offset],a.offset=0)}var c,d;if(Db){if(a.item)return c=X(a.item(0)),d=new na(c),d.selectNode(a.item(0)),d;c=a.parentElement().ownerDocument;var e=ka(a,!0),f=ka(a,!1);return b(e),b(f),d=new na(c),d.setStart(e.node,e.offset),d.setEnd(f.node,f.offset),d}var g=a.startContainer;return c=g.ownerDocument||g,d=new na(c),d.setStart(g,a.startOffset),d.setEnd(a.endContainer,a.endOffset),d}function na(a){this.init(a)}function oa(a){return a.nodeName?new na(a):a.constructor===na?a:ma(a)}function pa(a,b,c){try{a.execCommand(b,!1,c)}catch(d){}}function qa(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}return"string"!=typeof c&&(c=""),c}function ra(a){var b=Y(a);return Db?a.selection:b.getSelection()}function sa(a){var b,c=ra(a);try{b=c.rangeCount>0?c.getRangeAt(0):c.createRange()}catch(d){}return!Db||b&&(b.item||b.parentElement().ownerDocument===a)?b:null}function ta(a){var b,c,e={};return d(a,function(a,d){b=a.split(",");for(var f=0,g=b.length;g>f;f++)c=b[f],e[c]=d}),e}function ua(a,b){return va(a,b,"*")||va(a,b)}function va(a,b,c){if(c=c||a.name,1!==a.type)return!1;var d=ta(b);if(!d[c])return!1;for(var e=d[c].split(","),f=0,g=e.length;g>f;f++){var h=e[f];if("*"===h)return!0;var i=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(h),j=i[1]?"css":"attr";h=i[2];var k=i[3]||"";if(""===k&&""!==a[j](h))return!0;if(""!==k&&a[j](h)===k)return!0}return!1}function wa(a,b){1==a.type&&(xa(a,b,"*"),xa(a,b))}function xa(a,b,c){if(c=c||a.name,1===a.type){var d=ta(b);if(d[c]){for(var e=d[c].split(","),f=!1,g=0,h=e.length;h>g;g++){var i=e[g];if("*"===i){f=!0;break}var j=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(i);i=j[2],j[1]?(i=k(i),a[0].style[i]&&(a[0].style[i]="")):a.removeAttr(i)}f&&a.remove(!0)}}}function ya(a){for(var b=a;b.first();)b=b.first();return b}function za(a){return 1!=a.type||a.isSingle()?!1:""===a.html().replace(/<[^>]+>/g,"")}function Aa(a,b){a=a.clone(!0);for(var c=ya(a),d=a,e=!1;b;){for(;d;)d.name===b.name&&(Ca(d,b.attr(),b.css()),e=!0),d=d.first();e||c.append(b.clone(!1)),e=!1,b=b.first()}return a}function Ba(a,b){if(b=b.clone(!0),3==a.type)return ya(b).append(a.clone(!1)),a.replaceWith(b),b;for(var c,d=a;(c=a.first())&&1==c.children().length;)a=c;c=a.first();for(var e=a.doc.createDocumentFragment();c;)e.appendChild(c[0]),c=c.next();return b=Aa(d,b),e.firstChild&&ya(b).append(e),d.replaceWith(b),b}function Ca(a,b,c){d(b,function(b,c){"style"!==b&&a.attr(b,c)}),d(c,function(b,c){a.css(b,c)})}function Da(a){for(;a&&"body"!=a.name;){if(Ob[a.name]||"div"==a.name&&a.hasClass("ke-script"))return!0;a=a.parent()}return!1}function Ea(a,b){this.init(a,b)}function Fa(a,b){if(a.nodeName){var c=X(a);a=oa(c).selectNodeContents(c.body).collapse(!1)}return new Ea(a,b)}function Ga(a){var b=a.moveEl,c=a.moveFn,d=a.clickEl||b,e=a.beforeDrag,f=void 0===a.iframeFix?!0:a.iframeFix,g=[document];f&&Ib("iframe").each(function(){var a=J(this.src||"","absolute");if(!/^https?:\/\//.test(a)){var b;try{b=Ja(this)}catch(c){}if(b){var d=Ib(this).pos();Ib(b).data("pos-x",d.x),Ib(b).data("pos-y",d.y),g.push(b)}}}),d.mousedown(function(a){function f(a){a.preventDefault();var b=Ib(X(a.target)),e=Hb((b.data("pos-x")||0)+a.pageX-p),f=Hb((b.data("pos-y")||0)+a.pageY-q);c.call(d,l,m,n,o,e,f)}function i(a){a.preventDefault()}function j(a){a.preventDefault(),Ib(g).unbind("mousemove",f).unbind("mouseup",j).unbind("selectstart",i),k.releaseCapture&&k.releaseCapture()}if(0===a.button||1===a.button){a.stopPropagation();var k=d.get(),l=h(b.css("left")),m=h(b.css("top")),n=b.width(),o=b.height(),p=a.pageX,q=a.pageY;e&&e(),Ib(g).mousemove(f).mouseup(j).bind("selectstart",i),k.setCapture&&k.setCapture()}})}function Ha(a){this.init(a)}function Ia(a){return new Ha(a)}function Ja(a){return a=W(a),a.contentDocument||a.contentWindow.document}function Ka(b,c,e,f){var g=[""===ic?"<html>":'<html dir="'+ic+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html,body {margin:0;padding:0;}",'body, td {font:12px/1.5 "PingFang","Microsoft Yahei","苹方","微软雅黑", "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;line-height:28px;}","table {border-collapse:collapse;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",".ke-content {padding: 15px;}",'img[data-ke-class="ke-image"] { max-width: 100%;border: 2px solid transparent; }','img[data-ke-class="ke-image"]:hover { border-color: #4696ec; }',"audio,video{ border:3px solid transparent; }","audio:hover, video:hover{ border:3px solid #2196f3; }","pre{ font-size: 14px;line-height: 20px;width: 100%;background-color: antiquewhite;padding: 6px 18px;box-sizing: border-box; }",".ke-script, .ke-noscript, .ke-display-none {","	display:none;","	font-size:0;","	width:0;","	height:0;","}",".ke-pagebreak {","	border:1px dotted #AAA;","	font-size:0;","	height:2px;","}","</style>"];return a(e)||(e=[e]),d(e,function(a,b){b&&g.push('<link href="'+b+'" rel="stylesheet" />')}),f&&g.push("<style>"+f+"</style>"),g.push("</head><body "+(c?'class="'+c+'"':"")+' author="MHalo"></body></html>'),g.join("\n")}function La(a,b){if(a.hasVal()){if(void 0===b){var c=a.val();return c=c.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,"")}return a.val(b)}return a.html(b)}function Ma(a){this.init(a)}function Na(a){return new Ma(a)}function Oa(a,b){var c=this,d=c.get(a);if(d){if(d.hasClass("ke-disabled"))return;b(d)}}function Pa(a){this.init(a)}function Qa(a){return new Pa(a)}function Ra(a){this.init(a)}function Sa(a){return new Ra(a)}function Ta(a){this.init(a)}function Ua(a){return new Ta(a)}function Va(a){this.init(a)}function Wa(a){return new Va(a)}function Xa(a){a=a||{};var b=a.name||"",c=Ib('<span class="ke-button-common ke-button-outer" title="'+b+'"></span>'),d=Ib('<input class="ke-button-common ke-button" type="button" value="'+b+'" />');return a.click&&d.click(a.click),c.append(d),c}function Ya(a){this.init(a)}function Za(a){return new Ya(a)}function $a(a){var b=Ia(a),c=b.remove,e=a.afterSelect,f=b.div,g=[];f.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()});var h=Ib('<ul class="ke-tabs-ul ke-clearfix"></ul>');return f.append(h),b.add=function(a){var b=Ib('<li class="ke-tabs-li">'+a.title+"</li>");b.data("tab",a),g.push(b),h.append(b)},b.selectedIndex=0,b.select=function(a){b.selectedIndex=a,d(g,function(c,d){d.unbind(),c===a?(d.addClass("ke-tabs-li-selected"),Ib(d.data("tab").panel).show("")):(d.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){Ib(this).addClass("ke-tabs-li-on")}).mouseout(function(){Ib(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(c)}),Ib(d.data("tab").panel).hide())}),e&&e.call(b,a)},b.remove=function(){d(g,function(){this.remove()}),h.remove(),c.call(b)},b}function _a(a,b){var c=document.getElementsByTagName("head")[0]||(Cb?document.body:document.documentElement),d=document.createElement("script");c.appendChild(d),d.src=a,d.charset="utf-8",d.onload=d.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(b&&b(),d.onload=d.onreadystatechange=null,c.removeChild(d))}}function ab(a){var b=a.indexOf("?");return b>0?a.substr(0,b):a}function bb(a){for(var b=document.getElementsByTagName("head")[0]||(Cb?document.body:document.documentElement),c=document.createElement("link"),d=ab(J(a,"absolute")),e=Ib('link[rel="stylesheet"]',b),f=0,g=e.length;g>f;f++)if(ab(J(e[f].href,"absolute"))===d)return;b.appendChild(c),c.href=a,c.rel="stylesheet"}function cb(a,b,c,f,g){c=c||"GET",g=g||"json";var h=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(h.open(c,a,!0),h.onreadystatechange=function(){if(4==h.readyState&&200==h.status&&b){var a=e(h.responseText);"json"==g&&(a=s(a)),b(a)}},"POST"==c){var i=[];d(f,function(a,b){i.push(encodeURIComponent(a)+"="+encodeURIComponent(b))});try{h.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(j){}h.send(i.join("&"))}else h.send(null)}function db(a,b){return void 0===a?jc:b?void(jc[a]=b):jc[a]}function eb(a){var b,c="core";return(b=/^(\w+)\.(\w+)$/.exec(a))&&(c=b[1],a=b[2]),{ns:c,key:a}}function fb(a,b){if(b=void 0===b?Ib.options.langType:b,"string"==typeof a){if(!kc[b])return"no language";var c=a.length-1;if("."===a.substr(c))return kc[b][a.substr(0,c)];var e=eb(a);return kc[b][e.ns][e.key]}d(a,function(a,c){var d=eb(a);kc[b]||(kc[b]={}),kc[b][d.ns]||(kc[b][d.ns]={}),kc[b][d.ns][d.key]=c})}function gb(a,b){if(!a.collapsed){a=a.cloneRange().up();var c=a.startContainer,d=a.startOffset;if(yb||a.isControl()){var e=Ib(c.childNodes[d]);if(e&&"img"==e.name)return b(e)?e:void 0}}}function hb(){var a=this,b=a.edit.doc;Ib(b).contextmenu(function(b){if(a.menu&&a.hideMenu(),!a.useContextmenu)return void b.preventDefault();if(0!==a._contextmenus.length){var c=0,e=[];for(d(a._contextmenus,function(){return"-"==this.title?void e.push(this):void(this.cond&&this.cond()&&(e.push(this),this.width&&this.width>c&&(c=this.width)))});e.length>0&&"-"==e[0].title;)e.shift();for(;e.length>0&&"-"==e[e.length-1].title;)e.pop();var f=null;if(d(e,function(a){"-"==this.title&&"-"==f.title&&delete e[a],f=this}),e.length>0){b.preventDefault();var g=Ib(a.edit.iframe).pos(),i=Sa({x:g.x+b.clientX,y:g.y+b.clientY,width:c,css:{visibility:"hidden"},shadowMode:a.shadowMode});d(e,function(){this.title&&i.addItem(this)});var j=ea(i.doc),k=i.div.height();b.clientY+k>=j.clientHeight-100&&i.pos(i.x,h(i.y)-k),i.div.css("visibility","visible"),a.menu=i}}})}function ib(){function a(a){for(var b=Ib(a.commonAncestor());b&&(1!=b.type||b.isStyle());)b=b.parent();return b}var b=this,c=b.edit.doc,d=b.newlineTag;if(!(vb&&"br"!==d||xb&&3>Fb&&"p"!==d||zb&&9>Fb)){var e=m("h1,h2,h3,h4,h5,h6,pre,li"),f=m("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");Ib(c).keydown(function(g){if(!(13!=g.which||g.shiftKey||g.ctrlKey||g.altKey)){b.cmd.selection();var h=a(b.cmd.range),i=(Ib(h).prev(),Ib(h).parent(),h.name);if("marquee"!=i&&"select"!=i)return"br"!==d||e[i]?void(f[i]||pa(c,"formatblock","<p>")):(g.preventDefault(),void b.insertHtml("<br />"+(vb&&9>Fb?"":"​")))}}),Ib(c).keyup(function(e){if(!(13!=e.which||e.shiftKey||e.ctrlKey||e.altKey)&&"br"!=d){if(xb){var g=b.cmd.commonAncestor("p"),h=b.cmd.commonAncestor("a");return void(h&&""==h.text()&&(h.remove(!0),b.cmd.range.selectNodeContents(g[0]).collapse(!0),b.cmd.select()))}b.cmd.selection();var i=a(b.cmd.range),j=Ib(i).prev(),k=Ib(i).parent(),l=i.name,m=k&&k.name?k.name:"",n=j&&j.html?j.html():"";if("blockquote"==m&&"<br />"==n){e.preventDefault(),Ib(j).remove(),Ib(i).remove(),Ib(k).after("<p>​</p>");var o=Ib(k).next();return b.cmd.range.selectNodeContents(o).collapse(!0),b.cmd.select(),void o.focus()}"marquee"!=l&&"select"!=l&&(f[l]||pa(c,"formatblock","<p>"))}})}}function jb(){var a=this,b=a.edit.doc;Ib(b).keydown(function(c){if(9==c.which){if(c.preventDefault(),a.afterTab)return void a.afterTab.call(a,c);var d=a.cmd,e=d.range;e.shrink(),e.collapsed&&1==e.startContainer.nodeType&&(e.insertNode(Ib("@&nbsp;",b)[0]),d.select()),a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function kb(){var a=this;Ib(a.edit.textarea[0],a.edit.win).focus(function(b){a.afterFocus&&a.afterFocus.call(a,b)}).blur(function(b){a.afterBlur&&a.afterBlur.call(a,b)})}function lb(a){return e(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/gi,""))}function mb(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/gi,"")}function nb(a,b){if(0===a.length)return void a.push(b);var c=a[a.length-1];lb(b.html)!==lb(c.html)&&a.push(b)}function ob(a,b){var c,d,e=this,f=e.edit,g=f.doc.body;if(0===a.length)return e;f.designMode?(c=e.cmd.range,d=c.createBookmark(!0),d.html=g.innerHTML):d={html:g.innerHTML},nb(b,d);var h=a.pop();return lb(d.html)===lb(h.html)&&a.length>0&&(h=a.pop()),f.designMode?(f.html(h.html),h.start&&(c.moveToBookmark(h),e.select())):Ib(g).html(lb(h.html)),e}function pb(a){function b(a,b){void 0===pb.prototype[a]&&(c[a]=b),c.options[a]=b}var c=this;c.options={},d(a,function(c,d){b(c,a[c])}),d(Ib.options,function(a,d){void 0===c[a]&&b(a,d)});var e=Ib(c.srcElement||"<textarea/>");c.width||(c.width=e[0].style.width||e.width()),c.height||(c.height=e[0].style.height||e.height()),b("width",o(c.width,c.minWidth)),b("height",o(c.height,c.minHeight)),b("width",g(c.width)),b("height",g(c.height)),Ab&&(!Bb||534>Fb)&&(c.designMode=!1),c.srcElement=e,c.initContent="",c.plugin={},c.isCreated=!1,c._handlers={},c._contextmenus=[],c._undoStack=[],c._redoStack=[],c._firstAddBookmark=!0,c.menu=c.contextmenu=null,c.dialogs=[]}function qb(a){return new pb(a)}function rb(a,c){function e(a){return d(jc,function(c,d){b(d)&&(d.call(a,KindEditor),a._pluginStatus||(a._pluginStatus={}),a._pluginStatus[c]="inited")}),a.create()}if(c=c||{},c.basePath=o(c.basePath,Ib.basePath),c.themesPath=o(c.themesPath,c.basePath+"themes/"),c.langPath=o(c.langPath,c.basePath+"lang/"),c.pluginsPath=o(c.pluginsPath,c.basePath+"plugins/"),o(c.loadStyleMode,Ib.options.loadStyleMode)){var f=o(c.themeType,Ib.options.themeType);bb(c.themesPath+"default/default.css"),bb(c.themesPath+f+"/"+f+".css")}var g=Ib(a);if(g&&0!==g.length){if(g.length>1)return g.each(function(){rb(this,c)}),lc[0];c.srcElement=g[0];var h=new pb(c);return lc.push(h),kc[h.langType]?e(h):(_a(h.langPath+h.langType+".js?ver="+encodeURIComponent(Ib.DEBUG?Gb:tb),function(){e(h)}),h)}}function sb(a,b){Ib(a).each(function(a,c){Ib.each(lc,function(a,d){return d&&d.srcElement[0]==c?(b.call(d,a),!1):void 0})})}!function(a){return a.KindEditor?a.KindEditor:void 0}(window),!function(a,b){"function"==typeof define&&define.amd?define(function(){return b(a)}):b(a)}(window,function(a){var b=function(){function b(a){return null==a?String(a):W[X.call(a)]||"object"}function c(a){return"function"==b(a)}function d(a){return null!=a&&a==a.window}function e(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function f(a){return"object"==b(a)}function g(a){return f(a)&&!d(a)&&Object.getPrototypeOf(a)==Object.prototype}function h(a){var b=!!a&&"length"in a&&a.length,c=z.type(a);return"function"!=c&&!d(a)&&("array"==c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function i(a){return F.call(a,function(a){return null!=a})}function j(a){return a.length>0?z.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in J?J[a]:J[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||K[k(a)]?b:b+"px";
}function n(a){var b,c;return I[a]||(b=H.createElement(a),H.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),I[a]=c),I[a]}function o(a){return"children"in a?G.call(a.children):z.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b){var c,d=a?a.length:0;for(c=0;d>c;c++)this[c]=a[c];this.length=d,this.selector=b||""}function q(a,b,c){for(y in b)c&&(g(b[y])||_(b[y]))?(g(b[y])&&!g(a[y])&&(a[y]={}),_(b[y])&&!_(a[y])&&(a[y]=[]),q(a[y],b[y],c)):b[y]!==x&&(a[y]=b[y])}function r(a,b){return null==b?z(a):z(a).filter(b)}function s(a,b,d,e){return c(b)?b.call(a,d,e):b}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function u(a,b){var c=a.className||"",d=c&&c.baseVal!==x;return b===x?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function v(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?z.parseJSON(a):a):a}catch(b){return a}}function w(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)w(a.childNodes[c],b)}var x,y,z,A,B,C,D=[],E=D.concat,F=D.filter,G=D.slice,H=a.document,I={},J={},K={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,O=/^(?:body|html)$/i,P=/([A-Z])/g,Q=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],S=H.createElement("table"),T=H.createElement("tr"),U={tr:H.createElement("tbody"),tbody:S,thead:S,tfoot:S,td:T,th:T,"*":H.createElement("div")},V=/^[\w-]*$/,W={},X=W.toString,Y={},Z=H.createElement("div"),$={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},_=Array.isArray||function(a){return a instanceof Array};return Y.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=Z).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&Z.removeChild(a),d},B=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},C=function(a){return F.call(a,function(b,c){return a.indexOf(b)==c})},Y.fragment=function(a,b,c){var d,e,f;return M.test(a)&&(d=z(H.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(N,"<$1></$2>")),b===x&&(b=L.test(a)&&RegExp.$1),b in U||(b="*"),f=U[b],f.innerHTML=""+a,d=z.each(G.call(f.childNodes),function(){f.removeChild(this)})),g(c)&&(e=z(d),z.each(c,function(a,b){Q.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},Y.Z=function(a,b){return new p(a,b)},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,b){var d;if(!a)return Y.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&L.test(a))d=Y.fragment(a,RegExp.$1,b),a=null;else{if(b!==x)return z(b).find(a);d=Y.qsa(H,a)}else{if(c(a))return z(H).ready(a);if(Y.isZ(a))return a;if(_(a))d=i(a);else if(f(a))d=[a],a=null;else if(L.test(a))d=Y.fragment(a.trim(),RegExp.$1,b),a=null;else{if(b!==x)return z(b).find(a);d=Y.qsa(H,a)}}return Y.Z(d,a)},z=function(a,b){return Y.init(a,b)},z.extend=function(a){var b,c=G.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){q(a,c,b)}),a},Y.qsa=function(a,b){var c,d="#"==b[0],e=!d&&"."==b[0],f=d||e?b.slice(1):b,g=V.test(f);return a.getElementById&&g&&d?(c=a.getElementById(f))?[c]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:G.call(g&&!d&&a.getElementsByClassName?e?a.getElementsByClassName(f):a.getElementsByTagName(b):a.querySelectorAll(b))},z.contains=H.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},z.type=b,z.isFunction=c,z.isWindow=d,z.isArray=_,z.isPlainObject=g,z.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},z.isNumeric=function(a){var b=Number(a),c=typeof a;return null!=a&&"boolean"!=c&&("string"!=c||a.length)&&!isNaN(b)&&isFinite(b)||!1},z.inArray=function(a,b,c){return D.indexOf.call(b,a,c)},z.camelCase=B,z.trim=function(a){return null==a?"":String.prototype.trim.call(a)},z.uuid=0,z.support={},z.expr={},z.noop=function(){},z.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return j(f)},z.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},z.grep=function(a,b){return F.call(a,b)},a.JSON&&(z.parseJSON=JSON.parse),z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),z.fn={constructor:Y.Z,length:0,forEach:D.forEach,reduce:D.reduce,push:D.push,sort:D.sort,splice:D.splice,indexOf:D.indexOf,concat:function(){var a,b,c=[];for(a=0;a<arguments.length;a++)b=arguments[a],c[a]=Y.isZ(b)?b.toArray():b;return E.apply(Y.isZ(this)?this.toArray():this,c)},map:function(a){return z(z.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return z(G.apply(this,arguments))},ready:function(b){if("complete"===H.readyState||"loading"!==H.readyState&&!H.documentElement.doScroll)setTimeout(function(){b(z)},0);else{var c=function(){H.removeEventListener("DOMContentLoaded",c,!1),a.removeEventListener("load",c,!1),b(z)};H.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}return this},get:function(a){return a===x?G.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return D.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return c(a)?this.not(this.not(a)):z(F.call(this,function(b){return Y.matches(b,a)}))},add:function(a,b){return z(C(this.concat(z(a,b))))},is:function(a){return"string"==typeof a?this.length>0&&Y.matches(this[0],a):a&&this.selector==a.selector},not:function(a){var b=[];if(c(a)&&a.call!==x)this.each(function(c){a.call(this,c)||b.push(this)});else{var d="string"==typeof a?this.filter(a):h(a)&&c(a.item)?G.call(a):z(a);this.forEach(function(a){d.indexOf(a)<0&&b.push(a)})}return z(b)},has:function(a){return this.filter(function(){return f(a)?z.contains(this,a):z(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!f(a)?a:z(a)},last:function(){var a=this[this.length-1];return a&&!f(a)?a:z(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?z(a).filter(function(){var a=this;return D.some.call(c,function(b){return z.contains(b,a)})}):1==this.length?z(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)}):z()},closest:function(a,b){var c=[],d="object"==typeof a&&z(a);return this.each(function(f,g){for(;g&&!(d?d.indexOf(g)>=0:Y.matches(g,a));)g=g!==b&&!e(g)&&g.parentNode;g&&c.indexOf(g)<0&&c.push(g)}),z(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=z.map(c,function(a){return(a=a.parentNode)&&!e(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return r(b,a)},parent:function(a){return r(C(this.pluck("parentNode")),a)},children:function(a){return r(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||G.call(this.childNodes)})},siblings:function(a){return r(this.map(function(a,b){return F.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return z.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=c(a);if(this[0]&&!b)var d=z(a).get(0),e=d.parentNode||this.length>1;return this.each(function(c){z(this).wrapAll(b?a.call(this,c):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){z(this[0]).before(a=z(a));for(var b;(b=a.children()).length;)a=b.first();z(a).append(this)}return this},wrapInner:function(a){var b=c(a);return this.each(function(c){var d=z(this),e=d.contents(),f=b?a.call(this,c):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){z(this).replaceWith(z(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=z(this);(a===x?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return z(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return z(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;z(this).empty().append(s(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=s(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this.pluck("textContent").join(""):null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(f(a))for(y in a)t(this,y,a[y]);else t(this,a,s(this,b,c,this.getAttribute(a)))}):0 in this&&1==this[0].nodeType&&null!=(c=this[0].getAttribute(a))?c:x},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){t(this,a)},this)})},prop:function(a,b){return a=$[a]||a,"string"!=typeof a||1 in arguments?this.each(function(c){if(f(a))for(y in a)this[$[y]||y]=a[y];else this[a]=s(this,b,c,this[a])}):this[0]&&this[0][a]},removeProp:function(a){return a=$[a]||a,this.each(function(){delete this[a]})},data:function(a,b){var c="data-"+a.replace(P,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?v(d):x},val:function(a){return 0 in arguments?(null==a&&(a=""),this.each(function(b){this.value=s(this,a,b,this.value)})):this[0]&&(this[0].multiple?z(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(b){if(b)return this.each(function(a){var c=z(this),d=s(this,b,a,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;if(H.documentElement!==this[0]&&!z.contains(H.documentElement,this[0]))return{top:0,left:0};var c=this[0].getBoundingClientRect();return{left:c.left+a.pageXOffset,top:c.top+a.pageYOffset,width:Math.round(c.width),height:Math.round(c.height)}},css:function(a,c){if(arguments.length<2){var d=this[0];if("string"==typeof a){if(!d)return;return d.style[B(a)]||getComputedStyle(d,"").getPropertyValue(a)}if(_(a)){if(!d)return;var e={},f=getComputedStyle(d,"");return z.each(a,function(a,b){e[b]=d.style[B(b)]||f.getPropertyValue(b)}),e}}var g="";if("string"==b(a))c||0===c?g=k(a)+":"+m(a,c):this.each(function(){this.style.removeProperty(k(a))});else for(y in a)a[y]||0===a[y]?g+=k(y)+":"+m(y,a[y])+";":this.each(function(){this.style.removeProperty(k(y))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(z(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?D.some.call(this,function(a){return this.test(u(a))},l(a)):!1},addClass:function(a){return a?this.each(function(b){if("className"in this){A=[];var c=u(this),d=s(this,a,b,c);d.split(/\s+/g).forEach(function(a){z(this).hasClass(a)||A.push(a)},this),A.length&&u(this,c+(c?" ":"")+A.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===x)return u(this,"");A=u(this),s(this,a,b,A).split(/\s+/g).forEach(function(a){A=A.replace(l(a)," ")}),u(this,A.trim())}})},toggleClass:function(a,b){return a?this.each(function(c){var d=z(this),e=s(this,a,c,u(this));e.split(/\s+/g).forEach(function(a){(b===x?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===x?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===x?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=O.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(z(a).css("margin-top"))||0,c.left-=parseFloat(z(a).css("margin-left"))||0,d.top+=parseFloat(z(b[0]).css("border-top-width"))||0,d.left+=parseFloat(z(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||H.body;a&&!O.test(a.nodeName)&&"static"==z(a).css("position");)a=a.offsetParent;return a})}},z.fn.detach=z.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});z.fn[a]=function(c){var f,g=this[0];return c===x?d(g)?g["inner"+b]:e(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=z(this),g.css(a,s(this,c,b,g[a]()))})}}),R.forEach(function(c,d){var e=d%2;z.fn[c]=function(){var c,f,g=z.map(arguments,function(a){var d=[];return c=b(a),"array"==c?(a.forEach(function(a){return a.nodeType!==x?d.push(a):z.zepto.isZ(a)?d=d.concat(a.get()):void(d=d.concat(Y.fragment(a)))}),d):"object"==c||null==a?a:Y.fragment(a)}),h=this.length>1;return g.length<1?this:this.each(function(b,c){f=e?c:c.parentNode,c=0==d?c.nextSibling:1==d?c.firstChild:2==d?c:null;var i=z.contains(H.documentElement,f);g.forEach(function(b){if(h)b=b.cloneNode(!0);else if(!f)return z(b).remove();f.insertBefore(b,c),i&&w(b,function(b){if(!(null==b.nodeName||"SCRIPT"!==b.nodeName.toUpperCase()||b.type&&"text/javascript"!==b.type||b.src)){var c=b.ownerDocument?b.ownerDocument.defaultView:a;c.eval.call(c,b.innerHTML)}})})})},z.fn[e?c+"To":"insert"+(d?"Before":"After")]=function(a){return z(a)[c](this),this}}),Y.Z.prototype=p.prototype=z.fn,Y.uniq=C,Y.deserializeValue=v,z.zepto=Y,z}();return a.Zepto=b,void 0===a.$&&(a.$=b),function(b){function c(a){return a._zid||(a._zid=n++)}function d(a,b,d,g){if(b=e(b),b.ns)var h=f(b.ns);return(r[c(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||h.test(a.ns))&&(!d||c(a.fn)===c(d))&&(!g||a.sel==g)})}function e(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function f(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function g(a,b){return a.del&&!t&&a.e in u||!!b}function h(a){return v[a]||t&&u[a]||a}function i(a,d,f,i,j,l,n){var o=c(a),p=r[o]||(r[o]=[]);d.split(/\s/).forEach(function(c){if("ready"==c)return b(document).ready(f);var d=e(c);d.fn=f,d.sel=j,d.e in v&&(f=function(a){var c=a.relatedTarget;return!c||c!==this&&!b.contains(this,c)?d.fn.apply(this,arguments):void 0}),d.del=l;var o=l||f;d.proxy=function(b){if(b=k(b),!b.isImmediatePropagationStopped()){b.data=i;var c=o.apply(a,b._args==m?[b]:[b].concat(b._args));return c===!1&&(b.preventDefault(),b.stopPropagation()),c}},d.i=p.length,p.push(d),"addEventListener"in a&&a.addEventListener(h(d.e),d.proxy,g(d,n))})}function j(a,b,e,f,i){var j=c(a);(b||"").split(/\s/).forEach(function(b){d(a,b,e,f).forEach(function(b){delete r[j][b.i],"removeEventListener"in a&&a.removeEventListener(h(b.e),b.proxy,g(b,i))})})}function k(a,c){if(c||!a.isDefaultPrevented){c||(c=a),b.each(z,function(b,d){var e=c[b];a[b]=function(){return this[d]=w,e&&e.apply(c,arguments)},a[d]=x});try{a.timeStamp||(a.timeStamp=Date.now())}catch(d){}(c.defaultPrevented!==m?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(a.isDefaultPrevented=w)}return a}function l(a){var b,c={originalEvent:a};for(b in a)y.test(b)||a[b]===m||(c[b]=a[b]);return k(c,a)}var m,n=1,o=Array.prototype.slice,p=b.isFunction,q=function(a){return"string"==typeof a},r={},s={},t="onfocusin"in a,u={focus:"focusin",blur:"focusout"},v={mouseenter:"mouseover",mouseleave:"mouseout"};s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",b.event={add:i,remove:j},b.proxy=function(a,d){var e=2 in arguments&&o.call(arguments,2);if(p(a)){var f=function(){return a.apply(d,e?e.concat(o.call(arguments)):arguments)};return f._zid=c(a),f}if(q(d))return e?(e.unshift(a[d],a),b.proxy.apply(null,e)):b.proxy(a[d],a);throw new TypeError("expected function")},b.fn.bind=function(a,b,c){return this.on(a,b,c)},b.fn.unbind=function(a,b){return this.off(a,b)},b.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var w=function(){return!0},x=function(){return!1},y=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,z={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.fn.delegate=function(a,b,c){return this.on(b,a,c)},b.fn.undelegate=function(a,b,c){return this.off(b,a,c)},b.fn.live=function(a,c){return b(document.body).delegate(this.selector,a,c),this},b.fn.die=function(a,c){return b(document.body).undelegate(this.selector,a,c),this},b.fn.on=function(a,c,d,e,f){var g,h,k=this;return a&&!q(a)?(b.each(a,function(a,b){k.on(a,c,d,b,f)}),k):(q(c)||p(e)||e===!1||(e=d,d=c,c=m),(e===m||d===!1)&&(e=d,d=m),e===!1&&(e=x),k.each(function(k,m){f&&(g=function(a){return j(m,a.type,e),e.apply(this,arguments)}),c&&(h=function(a){var d,f=b(a.target).closest(c,m).get(0);return f&&f!==m?(d=b.extend(l(a),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(o.call(arguments,1)))):void 0}),i(m,a,e,d,c,h||g)}))},b.fn.off=function(a,c,d){var e=this;return a&&!q(a)?(b.each(a,function(a,b){e.off(a,c,b)}),e):(q(c)||p(d)||d===!1||(d=c,c=m),d===!1&&(d=x),e.each(function(){j(this,a,d,c)}))},b.fn.trigger=function(a,c){return a=q(a)||b.isPlainObject(a)?b.Event(a):k(a),a._args=c,this.each(function(){a.type in u&&"function"==typeof this[a.type]?this[a.type]():"dispatchEvent"in this?this.dispatchEvent(a):b(this).triggerHandler(a,c)})},b.fn.triggerHandler=function(a,c){var e,f;return this.each(function(g,h){e=l(q(a)?b.Event(a):a),e._args=c,e.target=h,b.each(d(h,a.type||a),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(a){b.fn[a]=function(b){return 0 in arguments?this.bind(a,b):this.trigger(a)}}),b.Event=function(a,b){q(a)||(b=a,a=b.type);var c=document.createEvent(s[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),k(c)}}(b),function(a){function b(c){var d=[["resolve","done",a.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",a.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",a.Callbacks({memory:1})]],e="pending",f={state:function(){return e},always:function(){return g.done(arguments).fail(arguments),this},then:function(){var c=arguments;return b(function(b){a.each(d,function(d,e){var h=a.isFunction(c[d])&&c[d];g[e[1]](function(){var c=h&&h.apply(this,arguments);if(c&&a.isFunction(c.promise))c.promise().done(b.resolve).fail(b.reject).progress(b.notify);else{var d=this===f?b.promise():this,g=h?[c]:arguments;b[e[0]+"With"](d,g)}})}),c=null}).promise()},promise:function(b){return null!=b?a.extend(b,f):f}},g={};return a.each(d,function(a,b){var c=b[2],h=b[3];f[b[1]]=c.add,h&&c.add(function(){e=h},d[1^a][2].disable,d[2][2].lock),g[b[0]]=function(){return g[b[0]+"With"](this===g?f:this,arguments),this},g[b[0]+"With"]=c.fireWith}),f.promise(g),c&&c.call(g,g),g}var c=Array.prototype.slice;a.when=function(d){var e,f,g,h=c.call(arguments),i=h.length,j=0,k=1!==i||d&&a.isFunction(d.promise)?i:0,l=1===k?d:b(),m=function(a,b,d){return function(f){b[a]=this,d[a]=arguments.length>1?c.call(arguments):f,d===e?l.notifyWith(b,d):--k||l.resolveWith(b,d)}};if(i>1)for(e=new Array(i),f=new Array(i),g=new Array(i);i>j;++j)h[j]&&a.isFunction(h[j].promise)?h[j].promise().done(m(j,g,h)).fail(l.reject).progress(m(j,f,e)):--k;return k||l.resolveWith(g,h),l.promise()},a.Deferred=b}(b),function(a){a.Callbacks=function(b){b=a.extend({},b);var c,d,e,f,g,h,i=[],j=!b.once&&[],k=function(a){for(c=b.memory&&a,d=!0,h=f||0,f=0,g=i.length,e=!0;i&&g>h;++h)if(i[h].apply(a[0],a[1])===!1&&b.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i.length=0:l.disable())},l={add:function(){if(i){var d=i.length,h=function(c){a.each(c,function(a,c){"function"==typeof c?b.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!=typeof c&&h(c)})};h(arguments),e?g=i.length:c&&(f=d,k(c))}return this},remove:function(){return i&&a.each(arguments,function(b,c){for(var d;(d=a.inArray(c,i,d))>-1;)i.splice(d,1),e&&(g>=d&&--g,h>=d&&--h)}),this},has:function(b){return!(!i||!(b?a.inArray(b,i)>-1:i.length))},empty:function(){return g=i.length=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||d&&!j||(b=b||[],b=[a,b.slice?b.slice():b],e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments)},fired:function(){return!!d}};return l}}(b),b}),!function(a,b){var c,d={},e=function(a,b){var c,d,e;if("string"==typeof a)return h(a);for(c=[],d=a.length,e=0;d>e;e++)c.push(h(a[e]));return b.apply(null,c)},f=function(a,b,c){2===arguments.length&&(c=b,b=null),e(b||[],function(){g(a,c,arguments)})},g=function(a,b,c){var f,g={exports:b};"function"==typeof b&&(c.length||(c=[e,g.exports,g]),f=b.apply(null,c),void 0!==f&&(g.exports=f)),d[a]=g.exports},h=function(b){var c=d[b]||a[b];if(!c)throw new Error("`"+b+"` is undefined");return c},i=function(a){var b,c,e,f,g,h;h=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(b in d)if(c=a,d.hasOwnProperty(b)){for(e=b.split("/"),g=h(e.pop());f=h(e.shift());)c[f]=c[f]||{},c=c[f];c[g]=d[b]}return a},j=function(c){return a.__dollar=c,i(b(a,f,e))};c=a.WebUploader,a.WebUploader=j(),a.WebUploader.noConflict=function(){a.WebUploader=c}}(window,function(a,b,c){return b("dollar-third",[],function(){var b=a.require,c=a.__dollar||a.jQuery||a.Zepto||b("jquery")||b("zepto");if(!c)throw new Error("jQuery or Zepto not found!");return c}),b("dollar",["dollar-third"],function(a){return a}),b("promise-third",["dollar"],function(a){return{Deferred:a.Deferred,when:a.when,isPromise:function(a){return a&&"function"==typeof a.then}}}),b("promise",["promise-third"],function(a){return a}),b("base",["dollar","promise"],function(b,c){function d(a){return function(){return h.apply(a,arguments)}}function e(a,b){return function(){return a.apply(b,arguments)}}function f(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var g=function(){},h=Function.call;return{version:"0.1.8-alpha",$:b,Deferred:c.Deferred,isPromise:c.isPromise,when:c.when,browser:function(a){var b={},c=a.match(/WebKit\/([\d.]+)/),d=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),e=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),g=a.match(/Safari\/([\d.]+)/),h=a.match(/OPR\/([\d.]+)/);return c&&(b.webkit=parseFloat(c[1])),d&&(b.chrome=parseFloat(d[1])),e&&(b.ie=parseFloat(e[1])),f&&(b.firefox=parseFloat(f[1])),g&&(b.safari=parseFloat(g[1])),h&&(b.opera=parseFloat(h[1])),b}(navigator.userAgent),os:function(a){var b={},c=a.match(/(?:Android);?[\s\/]+([\d.]+)?/),d=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return c&&(b.android=parseFloat(c[1])),d&&(b.ios=parseFloat(d[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,c,d){var e;return"function"==typeof c?(e=c,c=null):e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(!0,e,a,d||{}),e.__super__=a.prototype,e.prototype=f(a.prototype),c&&b.extend(!0,e.prototype,c),e},noop:g,bindFn:e,log:function(){return a.console?e(console.log,console):g}(),nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:d([].slice),guid:function(){var a=0;return function(b){for(var c=(+new Date).toString(32),d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+c+(a++).toString(32)}}(),formatSize:function(a,b,c){var d;for(c=c||["B","K","M","G","TB"];(d=c.shift())&&a>1024;)a/=1024;return("B"===d?a:a.toFixed(b||2))+d}}}),b("mediator",["base"],function(a){function b(a,b,c,d){return f.grep(a,function(a){return!(!a||b&&a.e!==b||c&&a.cb!==c&&a.cb._cb!==c||d&&a.ctx!==d)})}function c(a,b,c){f.each((a||"").split(h),function(a,d){c(d,b)})}function d(a,b){for(var c,d=!1,e=-1,f=a.length;++e<f;)if(c=a[e],c.cb.apply(c.ctx2,b)===!1){d=!0;break}return!d}var e,f=a.$,g=[].slice,h=/\s+/;return e={on:function(a,b,d){var e,f=this;return b?(e=this._events||(this._events=[]),c(a,b,function(a,b){var c={e:a};c.cb=b,c.ctx=d,c.ctx2=d||f,c.id=e.length,e.push(c)}),this):this},once:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),e):e},off:function(a,d,e){var g=this._events;return g?a||d||e?(c(a,d,function(a,c){f.each(b(g,a,c,e),function(){delete g[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var c,e,f;return this._events&&a?(c=g.call(arguments,1),e=b(this._events,a),f=b(this._events,"all"),d(e,c)&&d(f,arguments)):this}},f.extend({installTo:function(a){return f.extend(a,e)}},e)}),b("uploader",["base","mediator"],function(a,b){function c(a){this.options=d.extend(!0,{},c.options,a),this._init(this.options)}var d=a.$;return c.options={},b.installTo(c.prototype),d.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(a,b){c.prototype[a]=function(){return this.request(b,arguments)}}),d.extend(c.prototype,{state:"pending",_init:function(a){var b=this;b.request("init",a,function(){b.state="ready",b.trigger("ready")})},option:function(a,b){var c=this.options;return arguments.length>1?void(d.isPlainObject(b)&&d.isPlainObject(c[a])?d.extend(c[a],b):c[a]=b):a?c[a]:c},getStats:function(){var a=this.request("get-stats");return a?{successNum:a.numOfSuccess,progressNum:a.numOfProgress,cancelNum:a.numOfCancel,invalidNum:a.numOfInvalid,uploadFailNum:a.numOfUploadFailed,queueNum:a.numOfQueue,interruptNum:a.numOfInterrupt}:{}},trigger:function(a){var c=[].slice.call(arguments,1),e=this.options,f="on"+a.substring(0,1).toUpperCase()+a.substring(1);return b.trigger.apply(this,arguments)===!1||d.isFunction(e[f])&&e[f].apply(this,c)===!1||d.isFunction(this[f])&&this[f].apply(this,c)===!1||b.trigger.apply(b,[this,a].concat(c))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:a.noop}),a.create=c.create=function(a){return new c(a)},a.Uploader=c,c}),b("runtime/runtime",["base","mediator"],function(a,b){function c(b){this.options=d.extend({container:document.body},b),this.uid=a.guid("rt_")}var d=a.$,e={},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return d.extend(c.prototype,{getContainer:function(){var a,b,c=this.options;return this._container?this._container:(a=d(c.container||document.body),b=d(document.createElement("div")),b.attr("id","rt_"+this.uid),b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden",cursor:"pointer",lineHeight:"0"}),a.append(b),a.addClass("webuploader-container"),this._container=b,this._parent=a,b)},init:a.noop,exec:a.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),c.orders="html5,flash",c.addRuntime=function(a,b){e[a]=b},c.hasRuntime=function(a){return!!(a?e[a]:f(e))},c.create=function(a,b){var g,h;if(b=b||c.orders,d.each(b.split(/\s*,\s*/g),function(){return e[this]?(g=this,!1):void 0}),g=g||f(e),!g)throw new Error("Runtime Error");return h=new e[g](a)},b.installTo(c.prototype),c}),b("runtime/client",["base","mediator","runtime/runtime"],function(a,b,c){function d(b,d){var f,g=a.Deferred();this.uid=a.guid("client_"),this.runtimeReady=function(a){return g.done(a)},this.connectRuntime=function(b,h){if(f)throw new Error("already connected!");return g.done(h),"string"==typeof b&&e.get(b)&&(f=e.get(b)),f=f||e.get(null,d),f?(a.$.extend(f.options,b),f.__promise.then(g.resolve),f.__client++):(f=c.create(b,b.runtimeOrder),f.__promise=g.promise(),f.once("ready",g.resolve),f.init(),e.add(f),f.__client=1),d&&(f.__standalone=d),f},this.getRuntime=function(){return f},this.disconnectRuntime=function(){f&&(f.__client--,f.__client<=0&&(e.remove(f),delete f.__promise,f.destroy()),f=null)},this.exec=function(){if(f){var c=a.slice(arguments);return b&&c.unshift(b),f.exec.apply(this,c)}},this.getRuid=function(){return f&&f.uid},this.destroy=function(a){return function(){a&&a.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var e;return e=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,c){var d;if(b)return a[b];for(d in a)if(!c||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}(),b.installTo(d.prototype),d}),b("lib/dnd",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},d.options,a),a.container=e(a.container),a.container.length&&c.call(this,"DragAndDrop")}var e=a.$;return d.options={accept:null,disableGlobalDnd:!1},a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(d.prototype),d}),b("widgets/widget",["base","uploader"],function(a,b){function c(a){if(!a)return!1;var b=a.length,c=e.type(a);return 1===a.nodeType&&b?!0:"array"===c||"function"!==c&&"string"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){this.owner=a,this.options=a.options}var e=a.$,f=b.prototype._init,g=b.prototype.destroy,h={},i=[];return e.extend(d.prototype,{init:a.noop,invoke:function(a,b){var c=this.responseMap;return c&&a in c&&c[a]in this&&e.isFunction(this[c[a]])?this[c[a]].apply(this,b):h},request:function(){return this.owner.request.apply(this.owner,arguments)}}),e.extend(b.prototype,{_init:function(){var a=this,b=a._widgets=[],c=a.options.disableWidgets||"";return e.each(i,function(d,e){(!c||!~c.indexOf(e._name))&&b.push(new e(a))}),f.apply(a,arguments)},request:function(b,d,e){var f,g,i,j,k=0,l=this._widgets,m=l&&l.length,n=[],o=[];for(d=c(d)?d:[d];m>k;k++)f=l[k],g=f.invoke(b,d),g!==h&&(a.isPromise(g)?o.push(g):n.push(g));return e||o.length?(i=a.when.apply(a,o),j=i.pipe?"pipe":"then",i[j](function(){var b=a.Deferred(),c=arguments;return 1===c.length&&(c=c[0]),setTimeout(function(){b.resolve(c)},1),b.promise()})[e?j:"done"](e||a.noop)):n[0]},destroy:function(){g.apply(this,arguments),this._widgets=null}}),b.register=d.register=function(b,c){var f,g={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(c=b,e.each(c,function(a){return"_"===a[0]||"name"===a?void("name"===a&&(g.name=c.name)):void(g[a.replace(/[A-Z]/g,"-$&").toLowerCase()]=a)})):g=e.extend(g,b),c.responseMap=g,f=a.inherits(d,c),f._name=g.name,i.push(f),f},
b.unRegister=d.unRegister=function(a){if(a&&"anonymous"!==a)for(var b=i.length;b--;)i[b]._name===a&&i.splice(b,1)},d}),b("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(a,b,c){var d=a.$;return b.options.dnd="",b.register({name:"dnd",init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});return this.dnd=e=new c(h),e.once("ready",g.resolve),e.on("drop",function(a){f.request("add-file",[a])}),e.on("accept",function(a){return f.owner.trigger("dndAccept",a)}),e.init(),g.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),b("lib/filepaste",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},a),a.container=e(a.container||document.body),c.call(this,"FilePaste")}var e=a.$;return a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(d.prototype),d}),b("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(a,b,c){var d=a.$;return b.register({name:"paste",init:function(b){if(b.paste&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{container:b.paste,accept:b.accept});return this.paste=e=new c(h),e.once("ready",g.resolve),e.on("paste",function(a){f.owner.request("add-file",[a])}),e.init(),g.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),b("lib/blob",["base","runtime/client"],function(a,b){function c(a,c){var d=this;d.source=c,d.ruid=a,this.size=c.size||0,this.type=!c.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):c.type||"application/octet-stream",b.call(d,"Blob"),this.uid=c.uid||this.uid,a&&d.connectRuntime(a)}return a.inherits(b,{constructor:c,slice:function(a,b){return this.exec("slice",a,b)},getSource:function(){return this.source}}),c}),b("lib/file",["base","lib/blob"],function(a,b){function c(a,c){var f;this.name=c.name||"untitled"+d++,f=e.exec(c.name)?RegExp.$1.toLowerCase():"",!f&&c.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(c.type)?RegExp.$1.toLowerCase():"",this.name+="."+f),this.ext=f,this.lastModifiedDate=c.lastModifiedDate||c.lastModified&&new Date(c.lastModified).toLocaleString()||(new Date).toLocaleString(),b.apply(this,arguments)}var d=1,e=/\.([^.]+)$/;return a.inherits(b,c)}),b("lib/filepicker",["base","runtime/client","lib/file"],function(b,c,d){function e(a){if(a=this.options=f.extend({},e.options,a),a.container=f(a.id),!a.container.length)throw new Error("按钮指定错误");a.innerHTML=a.innerHTML||a.label||a.container.html()||"",a.button=f(a.button||document.createElement("div")),a.button.html(a.innerHTML),a.container.html(a.button),c.call(this,"FilePicker",!0)}var f=b.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file",style:"webuploader-pick"},b.inherits(c,{constructor:e,init:function(){var c=this,e=c.options,g=e.button,h=e.style;h&&g.addClass("webuploader-pick"),c.on("all",function(a){var b;switch(a){case"mouseenter":h&&g.addClass("webuploader-pick-hover");break;case"mouseleave":h&&g.removeClass("webuploader-pick-hover");break;case"change":b=c.exec("getFiles"),c.trigger("select",f.map(b,function(a){return a=new d(c.getRuid(),a),a._refer=e.container,a}),e.container)}}),c.connectRuntime(e,function(){c.refresh(),c.exec("init",e),c.trigger("ready")}),this._resizeHandler=b.bindFn(this.refresh,this),f(a).on("resize",this._resizeHandler)},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b[0]&&b[0].offsetWidth||b.outerWidth()||b.width(),d=b[0]&&b[0].offsetHeight||b.outerHeight()||b.height(),e=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(e)},enable:function(){var a=this.options.button;a.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),a.addClass("webuploader-pick-disable")},destroy:function(){var b=this.options.button;f(a).off("resize",this._resizeHandler),b.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),e}),b("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,b,c){var d=a.$;return d.extend(b.options,{pick:null,accept:null}),b.register({name:"picker",init:function(a){return this.pickers=[],a.pick&&this.addBtn(a.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addBtn:function(b){var e=this,f=e.options,g=f.accept,h=[];return b?(d.isPlainObject(b)||(b={id:b}),d(b.id).each(function(){var i,j,k;k=a.Deferred(),i=d.extend({},b,{accept:d.isPlainObject(g)?[g]:g,swf:f.swf,runtimeOrder:f.runtimeOrder,id:this}),j=new c(i),j.once("ready",k.resolve),j.on("select",function(a){e.owner.request("add-file",[a])}),j.on("dialogopen",function(){e.owner.trigger("dialogOpen",j.button)}),j.init(),e.pickers.push(j),h.push(k.promise())}),a.when.apply(a,h)):void 0},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})},destroy:function(){d.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),b("lib/image",["base","runtime/client","lib/blob"],function(a,b,c){function d(a){this.options=e.extend({},d.options,a),b.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var e=a.$;return d.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},a.inherits(b,{constructor:d,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options),b.exec("loadFromBlob",a)})},resize:function(){var b=a.slice(arguments);return this.exec.apply(this,["resize"].concat(b))},crop:function(){var b=a.slice(arguments);return this.exec.apply(this,["crop"].concat(b))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){var b=this.exec("getAsBlob",a);return new c(this.getRuid(),b)}}),d}),b("widgets/image",["base","uploader","lib/image","widgets/widget"],function(a,b,c){var d,e=a.$;return d=function(a){var b=0,c=[],d=function(){for(var d;c.length&&a>b;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]),a.once("destroy",function(){b-=e,setTimeout(d,1)}),setTimeout(d,1)}}(5242880),e.extend(b.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),b.register({name:"image",makeThumb:function(a,b,f,g){var h,i;return a=this.request("get-file",a),a.type.match(/^image/)?(h=e.extend({},this.options.thumb),e.isPlainObject(f)&&(h=e.extend(h,f),f=null),f=f||h.width,g=g||h.height,i=new c(h),i.once("load",function(){a._info=a._info||i.info(),a._meta=a._meta||i.meta(),1>=f&&f>0&&(f=a._info.width*f),1>=g&&g>0&&(g=a._info.height*g),i.resize(f,g)}),i.once("complete",function(){b(!1,i.getAsDataUrl(h.type)),i.destroy()}),i.once("error",function(a){b(a||!0),i.destroy()}),void d(i,a.source.size,function(){a._info&&i.info(a._info),a._meta&&i.meta(a._meta),i.loadFromBlob(a.source)})):void b(!0)},beforeSendFile:function(b){var d,f,g=this.options.compress||this.options.resize,h=g&&g.compressSize||0,i=g&&g.noCompressIfLarger||!1;return b=this.request("get-file",b),!g||!~"image/jpeg,image/jpg".indexOf(b.type)||b.size<h||b._compressed?void 0:(g=e.extend({},g),f=a.Deferred(),d=new c(g),f.always(function(){d.destroy(),d=null}),d.once("error",f.reject),d.once("load",function(){var a=g.width,c=g.height;b._info=b._info||d.info(),b._meta=b._meta||d.meta(),1>=a&&a>0&&(a=b._info.width*a),1>=c&&c>0&&(c=b._info.height*c),d.resize(a,c)}),d.once("complete",function(){var a,c;try{a=d.getAsBlob(g.type),c=b.size,(!i||a.size<c)&&(b.source=a,b.size=a.size,b.trigger("resize",a.size,c)),b._compressed=!0,f.resolve()}catch(e){f.resolve()}}),b._info&&d.info(b._info),b._meta&&d.meta(b._meta),d.loadFromBlob(b.source),f.promise())}})}),b("file",["base","mediator"],function(a,b){function c(){return f+g++}function d(a){this.name=a.name||"Untitled",this.size=a.size||0,this.type=a.type||"application/octet-stream",this.lastModifiedDate=a.lastModifiedDate||1*new Date,this.id=c(),this.ext=h.exec(this.name)?RegExp.$1:"",this.statusText="",i[this.id]=d.Status.INITED,this.source=a,this.loaded=0,this.on("error",function(a){this.setStatus(d.Status.ERROR,a)})}var e=a.$,f="WU_FILE_",g=0,h=/\.([^.]+)$/,i={};return e.extend(d.prototype,{setStatus:function(a,b){var c=i[this.id];"undefined"!=typeof b&&(this.statusText=b),a!==c&&(i[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return i[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete i[this.id]}}),b.installTo(d.prototype),d.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},d}),b("queue",["base","mediator","file"],function(a,b,c){function d(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numOfDeleted:0,numOfInterrupt:0},this._queue=[],this._map={}}var e=a.$,f=c.Status;return e.extend(d.prototype,{append:function(a){return this._queue.push(a),this._fileAdded(a),this},prepend:function(a){return this._queue.unshift(a),this._fileAdded(a),this},getFile:function(a){return"string"!=typeof a?a:this._map[a]},fetch:function(a){var b,c,d=this._queue.length;for(a=a||f.QUEUED,b=0;d>b;b++)if(c=this._queue[b],a===c.getStatus())return c;return null},sort:function(a){"function"==typeof a&&this._queue.sort(a)},getFiles:function(){for(var a,b=[].slice.call(arguments,0),c=[],d=0,f=this._queue.length;f>d;d++)a=this._queue[d],(!b.length||~e.inArray(a.getStatus(),b))&&c.push(a);return c},removeFile:function(a){var b=this._map[a.id];b&&(delete this._map[a.id],this._delFile(a),a.destroy(),this.stats.numOfDeleted++)},_fileAdded:function(a){var b=this,c=this._map[a.id];c||(this._map[a.id]=a,a.on("statuschange",function(a,c){b._onFileStatusChange(a,c)}))},_delFile:function(a){for(var b=this._queue.length-1;b>=0;b--)if(this._queue[b]==a){this._queue.splice(b,1);break}},_onFileStatusChange:function(a,b){var c=this.stats;switch(b){case f.PROGRESS:c.numOfProgress--;break;case f.QUEUED:c.numOfQueue--;break;case f.ERROR:c.numOfUploadFailed--;break;case f.INVALID:c.numOfInvalid--;break;case f.INTERRUPT:c.numOfInterrupt--}switch(a){case f.QUEUED:c.numOfQueue++;break;case f.PROGRESS:c.numOfProgress++;break;case f.ERROR:c.numOfUploadFailed++;break;case f.COMPLETE:c.numOfSuccess++;break;case f.CANCELLED:c.numOfCancel++;break;case f.INVALID:c.numOfInvalid++;break;case f.INTERRUPT:c.numOfInterrupt++}}}),b.installTo(d.prototype),d}),b("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(a,b,c,d,e,f){var g=a.$,h=/\.\w+$/,i=d.Status;return b.register({name:"queue",init:function(b){var d,e,h,i,j,k,l,m=this;if(g.isPlainObject(b.accept)&&(b.accept=[b.accept]),b.accept){for(j=[],h=0,e=b.accept.length;e>h;h++)i=b.accept[h].extensions,i&&j.push(i);j.length&&(k="\\."+j.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),m.accept=new RegExp(k,"i")}return m.queue=new c,m.stats=m.queue.stats,"html5"===this.request("predict-runtime-type")?(d=a.Deferred(),this.placeholder=l=new f("Placeholder"),l.connectRuntime({runtimeOrder:"html5"},function(){m._ruid=l.getRuid(),d.resolve()}),d.promise()):void 0},_wrapFile:function(a){if(!(a instanceof d)){if(!(a instanceof e)){if(!this._ruid)throw new Error("Can't add external files.");a=new e(this._ruid,a)}a=new d(a)}return a},acceptFile:function(a){var b=!a||!a.size||this.accept&&h.exec(a.name)&&!this.accept.test(a.name);return!b},_addFile:function(a){var b=this;return a=b._wrapFile(a),b.owner.trigger("beforeFileQueued",a)?b.acceptFile(a)?(b.queue.append(a),b.owner.trigger("fileQueued",a),a):void b.owner.trigger("error","Q_TYPE_DENIED",a):void 0},getFile:function(a){return this.queue.getFile(a)},addFile:function(a){var b=this;a.length||(a=[a]),a=g.map(a,function(a){return b._addFile(a)}),a.length&&(b.owner.trigger("filesQueued",a),b.options.auto&&setTimeout(function(){b.request("start-upload")},20))},getStats:function(){return this.stats},removeFile:function(a,b){var c=this;a=a.id?a:c.queue.getFile(a),this.request("cancel-file",a),b&&this.queue.removeFile(a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var c,d,e,f=this;if(a)return a=a.id?a:f.queue.getFile(a),a.setStatus(i.QUEUED),void(b||f.request("start-upload"));for(c=f.queue.getFiles(i.ERROR),d=0,e=c.length;e>d;d++)a=c[d],a.setStatus(i.QUEUED);f.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new c,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),b("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(a,b){return a.support=function(){return b.hasRuntime.apply(b,arguments)},a.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var a,c,d=this.options.runtimeOrder||b.orders,e=this.type;if(!e)for(d=d.split(/\s*,\s*/g),a=0,c=d.length;c>a;a++)if(b.hasRuntime(d[a])){this.type=e=d[a];break}return e}})}),b("lib/transport",["base","runtime/client","mediator"],function(a,b,c){function d(a){var c=this;a=c.options=e.extend(!0,{},d.options,a||{}),b.call(this,"Transport"),this._blob=null,this._formData=a.formData||{},this._headers=a.headers||{},this.on("progress",this._timeout),this.on("load error",function(){c.trigger("progress",1),clearTimeout(c._timer)})}var e=a.$;return d.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},e.extend(d.prototype,{appendBlob:function(a,b,c){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime(),d.connectRuntime(b.ruid,function(){d.exec("init")}),d._blob=b,e.fileVal=a||e.fileVal,e.filename=c||e.filename},append:function(a,b){"object"==typeof a?e.extend(this._formData,a):this._formData[a]=b},setRequestHeader:function(a,b){"object"==typeof a?e.extend(this._headers,a):this._headers[a]=b},send:function(a){this.exec("send",a),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponseHeaders:function(){return this.exec("getResponseHeaders")},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),a._timer=setTimeout(function(){a.abort(),a.trigger("error","timeout")},b))}}),c.installTo(d.prototype),d}),b("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(a,b,c,d){function e(a,b){var c,d,e=[],f=a.source,g=f.size,h=b?Math.ceil(g/b):1,i=0,j=0;for(d={file:a,has:function(){return!!e.length},shift:function(){return e.shift()},unshift:function(a){e.unshift(a)}};h>j;)c=Math.min(b,g-i),e.push({file:a,start:i,end:b?i+c:g,total:g,chunks:h,chunk:j++,cuted:d}),i+=c;return a.blocks=e.concat(),a.remaning=e.length,d}var f=a.$,g=a.isPromise,h=c.Status;f.extend(b.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,chunkRetryDelay:1e3,threads:3,formData:{}}),b.register({name:"upload",init:function(){var b=this.owner,c=this;this.runing=!1,this.progress=!1,b.on("startUpload",function(){c.progress=!0}).on("uploadFinished",function(){c.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=a.bindFn(this._tick,this),b.on("uploadComplete",function(a){a.blocks&&f.each(a.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy()),delete b.transport}),delete a.blocks,delete a.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(b){var c=this;if(f.each(c.request("get-files",h.INVALID),function(){c.request("remove-file",this)}),b?(b=b.id?b:c.request("get-file",b),b.getStatus()===h.INTERRUPT?(b.setStatus(h.QUEUED),f.each(c.pool,function(a,c){c.file===b&&(c.transport&&c.transport.send(),b.setStatus(h.PROGRESS))})):b.getStatus()!==h.PROGRESS&&b.setStatus(h.QUEUED)):f.each(c.request("get-files",[h.INITED]),function(){this.setStatus(h.QUEUED)}),c.runing)return c.owner.trigger("startUpload",b),a.nextTick(c.__tick);c.runing=!0;var d=[];b||f.each(c.pool,function(a,b){var e=b.file;if(e.getStatus()===h.INTERRUPT){if(c._trigged=!1,d.push(e),b.waiting)return;b.transport?b.transport.send():c._doSend(b)}}),f.each(d,function(){this.setStatus(h.PROGRESS)}),b||f.each(c.request("get-files",h.INTERRUPT),function(){this.setStatus(h.PROGRESS)}),c._trigged=!1,a.nextTick(c.__tick),c.owner.trigger("startUpload")},stopUpload:function(b,c){var d=this;if(b===!0&&(c=b,b=null),d.runing!==!1){if(b){if(b=b.id?b:d.request("get-file",b),b.getStatus()!==h.PROGRESS&&b.getStatus()!==h.QUEUED)return;return b.setStatus(h.INTERRUPT),f.each(d.pool,function(a,e){e.file===b&&(e.transport&&e.transport.abort(),c&&(d._putback(e),d._popBlock(e)))}),d.owner.trigger("stopUpload",b),a.nextTick(d.__tick)}d.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(h.INTERRUPT),c&&f.each(d.pool,function(a,b){b.transport&&b.transport.abort(),b.file.setStatus(h.INTERRUPT)}),d.owner.trigger("stopUpload")}},cancelFile:function(a){a=a.id?a:this.request("get-file",a),a.blocks&&f.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),a.setStatus(h.CANCELLED),this.owner.trigger("fileDequeued",a)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(a,b){a=a.id?a:this.request("get-file",a),a.setStatus(b||h.COMPLETE),a.skipped=!0,a.blocks&&f.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),this.owner.trigger("uploadSkip",a)},_tick:function(){var b,c,d=this,e=d.options;return d._promise?d._promise.always(d.__tick):void(d.pool.length<e.threads&&(c=d._nextBlock())?(d._trigged=!1,b=function(b){d._promise=null,b&&b.file&&d._startSend(b),a.nextTick(d.__tick)},d._promise=g(c)?c.always(b):b(c)):d.remaning||d._getStats().numOfQueue||d._getStats().numOfInterrupt||(d.runing=!1,d._trigged||a.nextTick(function(){d.owner.trigger("uploadFinished")}),d._trigged=!0))},_putback:function(a){var b;a.cuted.unshift(a),b=this.stack.indexOf(a.cuted),~b||(this.remaning++,a.file.remaning++,this.stack.unshift(a.cuted))},_getStack:function(){for(var a,b=0;a=this.stack[b++];){if(a.has()&&a.file.getStatus()===h.PROGRESS)return a;(!a.has()||a.file.getStatus()!==h.PROGRESS&&a.file.getStatus()!==h.INTERRUPT)&&this.stack.splice(--b,1)}return null},_nextBlock:function(){var a,b,c,d,f=this,h=f.options;return(a=this._getStack())?(h.prepareNextFile&&!f.pending.length&&f._prepareNextFile(),a.shift()):f.runing?(!f.pending.length&&f._getStats().numOfQueue&&f._prepareNextFile(),b=f.pending.shift(),c=function(b){return b?(a=e(b,h.chunked?h.chunkSize:0),f.stack.push(a),a.shift()):null},g(b)?(d=b.file,b=b[b.pipe?"pipe":"then"](c),b.file=d,b):c(b)):void 0},_prepareNextFile:function(){var a,b=this,c=b.request("fetch-file"),d=b.pending;c&&(a=b.request("before-send-file",c,function(){return c.getStatus()===h.PROGRESS||c.getStatus()===h.INTERRUPT?c:b._finishFile(c)}),b.owner.trigger("uploadStart",c),c.setStatus(h.PROGRESS),a.file=c,a.done(function(){var b=f.inArray(a,d);~b&&d.splice(b,1,c)}),a.fail(function(a){c.setStatus(h.ERROR,a),b.owner.trigger("uploadError",c,a),b.owner.trigger("uploadComplete",c)}),d.push(a))},_popBlock:function(a){var b=f.inArray(a,this.pool);this.pool.splice(b,1),a.file.remaning--,this.remaning--},_startSend:function(b){var c,d=this,e=b.file;return e.getStatus()!==h.PROGRESS?void(e.getStatus()===h.INTERRUPT&&d._putback(b)):(d.pool.push(b),d.remaning++,b.blob=1===b.chunks?e.source:e.source.slice(b.start,b.end),b.waiting=c=d.request("before-send",b,function(){delete b.waiting,e.getStatus()===h.PROGRESS?d._doSend(b):b.file.getStatus()!==h.INTERRUPT&&d._popBlock(b),a.nextTick(d.__tick)}),void c.fail(function(){delete b.waiting,1===e.remaning?d._finishFile(e).always(function(){b.percentage=1,d._popBlock(b),d.owner.trigger("uploadComplete",e),a.nextTick(d.__tick)}):(b.percentage=1,d.updateFileProgress(e),d._popBlock(b),a.nextTick(d.__tick))}))},_doSend:function(b){var c,e,g=this,i=g.owner,j=f.extend({},g.options,b.options),k=b.file,l=new d(j),m=f.extend({},j.formData),n=f.extend({},j.headers);b.transport=l,l.on("destroy",function(){delete b.transport,g._popBlock(b),a.nextTick(g.__tick)}),l.on("progress",function(a){b.percentage=a,g.updateFileProgress(k)}),c=function(a){var c;return e=l.getResponseAsJson()||{},e._raw=l.getResponse(),e._headers=l.getResponseHeaders(),b.response=e,c=function(b){a=b},i.trigger("uploadAccept",b,e,c)||(a=a||"server"),a},l.on("error",function(a,d){var e,f,m=a.split("|");a=m[0],e=parseFloat(m[1]),f=m[2],b.retried=b.retried||0,b.chunks>1&&~"http,abort,server".indexOf(a.replace(/-.*/,""))&&b.retried<j.chunkRetry?(b.retried++,g.retryTimer=setTimeout(function(){l.send()},j.chunkRetryDelay||1e3)):(d||"server"!==a||(a=c(a)),k.setStatus(h.ERROR,a),i.trigger("uploadError",k,a,e,f),i.trigger("uploadComplete",k))}),l.on("load",function(){var a;return(a=c())?void l.trigger("error",a,!0):void(1===k.remaning?g._finishFile(k,e):l.destroy())}),m=f.extend(m,{id:k.id,name:k.name,type:k.type,lastModifiedDate:k.lastModifiedDate,size:k.size}),b.chunks>1&&f.extend(m,{chunks:b.chunks,chunk:b.chunk}),i.trigger("uploadBeforeSend",b,m,n),l.appendBlob(j.fileVal,b.blob,k.name),l.append(m),l.setRequestHeader(n),l.send()},_finishFile:function(a,b,c){var d=this.owner;return d.request("after-send-file",arguments,function(){a.setStatus(h.COMPLETE),d.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===h.PROGRESS&&a.setStatus(h.ERROR,b),d.trigger("uploadError",a,b)}).always(function(){d.trigger("uploadComplete",a)})},updateFileProgress:function(a){var b=0,c=0;a.blocks&&(f.each(a.blocks,function(a,b){c+=(b.percentage||0)*(b.end-b.start)}),b=c/a.size,this.owner.trigger("uploadProgress",a,b||0))},destroy:function(){clearTimeout(this.retryTimer)}})}),b("widgets/validator",["base","uploader","file","widgets/widget"],function(a,b,c){var d,e=a.$,f={};return d={addValidator:function(a,b){f[a]=b},removeValidator:function(a){delete f[a]}},b.register({name:"validator",init:function(){var b=this;a.nextTick(function(){e.each(f,function(){this.call(b.owner)})})}}),d.addValidator("fileNumLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileNumLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){return this.trigger("beforeFileQueuedCheckfileNumLimit",a,c)?(c>=d&&e&&(e=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",d,a),setTimeout(function(){e=!0},1)),c>=d?!1:!0):!1}),a.on("fileQueued",function(){c++}),a.on("fileDequeued",function(){c--}),a.on("reset",function(){c=0}))}),d.addValidator("fileSizeLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileSizeLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){var b=c+a.size>d;return b&&e&&(e=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",d,a),setTimeout(function(){e=!0},1)),b?!1:!0}),a.on("fileQueued",function(a){c+=a.size}),a.on("fileDequeued",function(a){c-=a.size}),a.on("reset",function(){c=0}))}),d.addValidator("fileSingleSizeLimit",function(){var a=this,b=a.options,d=b.fileSingleSizeLimit;d&&a.on("beforeFileQueued",function(a){return a.size>d?(a.setStatus(c.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",d,a),!1):void 0})}),d.addValidator("duplicate",function(){function a(a){for(var b,c=0,d=0,e=a.length;e>d;d++)b=a.charCodeAt(d),c=b+(c<<6)+(c<<16)-c;return c}var b=this,c=b.options,d={};c.duplicate||(b.on("beforeFileQueued",function(b){var c=b.__hash||(b.__hash=a(b.name+b.size+b.lastModifiedDate));return d[c]?(this.trigger("error","F_DUPLICATE",b),!1):void 0}),b.on("fileQueued",function(a){var b=a.__hash;b&&(d[b]=!0)}),b.on("fileDequeued",function(a){var b=a.__hash;b&&delete d[b]}),b.on("reset",function(){d={}}))}),d}),b("runtime/compbase",[],function(){function a(a,b){this.owner=a,this.options=a.options,this.getRuntime=function(){return b},this.getRuid=function(){return b.uid},this.trigger=function(){return a.trigger.apply(a,arguments)}}return a}),b("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function e(){var a={},d=this,e=this.destroy;c.apply(d,arguments),d.type=f,d.exec=function(c,e){var f,h=this,i=h.uid,j=b.slice(arguments,2);return g[c]&&(f=a[i]=a[i]||new g[c](h,d),f[e])?f[e].apply(f,j):void 0},d.destroy=function(){return e&&e.apply(this,arguments)}}var f="html5",g={};return b.inherits(c,{constructor:e,init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}}),e.register=function(a,c){var e=g[a]=b.inherits(d,c);return e},a.Blob&&a.FileReader&&a.DataView&&c.addRuntime(f,e),e}),b("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.owner.source,e=d.slice||d.webkitSlice||d.mozSlice;return d=e.call(d,a,c),new b(this.getRuid(),d)}})}),b("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(a,b,c){var d=a.$,e="webuploader-dnd-";return b.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=a.bindFn(this._dragEnterHandler,this),this.dragOverHandler=a.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=a.bindFn(this._dragLeaveHandler,this),this.dropHandler=a.bindFn(this._dropHandler,this),this.dndOver=!1,b.on("dragenter",this.dragEnterHandler),b.on("dragover",this.dragOverHandler),b.on("dragleave",this.dragLeaveHandler),b.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).on("dragover",this.dragOverHandler),d(document).on("drop",this.dropHandler))},_dragEnterHandler:function(a){var b,c=this,d=c._denied||!1;return a=a.originalEvent||a,c.dndOver||(c.dndOver=!0,b=a.dataTransfer.items,b&&b.length&&(c._denied=d=!c.trigger("accept",b)),c.elem.addClass(e+"over"),c.elem[d?"addClass":"removeClass"](e+"denied")),a.dataTransfer.dropEffect=d?"none":"copy",!1},_dragOverHandler:function(a){var b=this.elem.parent().get(0);return b&&!d.contains(b,a.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,a),!1)},_dragLeaveHandler:function(){var a,b=this;return a=function(){b.dndOver=!1,b.elem.removeClass(e+"over "+e+"denied")},clearTimeout(b._leaveTimer),b._leaveTimer=setTimeout(a,100),!1},_dropHandler:function(a){var b,f,g=this,h=g.getRuid(),i=g.elem.parent().get(0);if(i&&!d.contains(i,a.currentTarget))return!1;a=a.originalEvent||a,b=a.dataTransfer;try{f=b.getData("text/html")}catch(j){}return g.dndOver=!1,g.elem.removeClass(e+"over"),b&&!f?(g._getTansferFiles(b,function(a){g.trigger("drop",d.map(a,function(a){return new c(h,a)}))}),!1):void 0},_getTansferFiles:function(b,c){var d,e,f,g,h,i,j,k=[],l=[];for(d=b.items,e=b.files,j=!(!d||!d[0].webkitGetAsEntry),h=0,i=e.length;i>h;h++)f=e[h],g=d&&d[h],j&&g.webkitGetAsEntry().isDirectory?l.push(this._traverseDirectoryTree(g.webkitGetAsEntry(),k)):k.push(f);a.when.apply(a,l).done(function(){k.length&&c(k)})},_traverseDirectoryTree:function(b,c){var d=a.Deferred(),e=this;return b.isFile?b.file(function(a){c.push(a),d.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var f,g=b.length,h=[],i=[];for(f=0;g>f;f++)h.push(e._traverseDirectoryTree(b[f],i));a.when.apply(a,h).then(function(){c.push.apply(c,i),d.resolve()},d.reject)}),d.promise()},destroy:function(){var a=this.elem;a&&(a.off("dragenter",this.dragEnterHandler),a.off("dragover",this.dragOverHandler),a.off("dragleave",this.dragLeaveHandler),a.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).off("dragover",this.dragOverHandler),d(document).off("drop",this.dropHandler)))}})}),b("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(a,b,c){return b.register("FilePaste",{init:function(){var b,c,d,e,f=this.options,g=this.elem=f.container,h=".*";if(f.accept){for(b=[],c=0,d=f.accept.length;d>c;c++)e=f.accept[c].mimeTypes,e&&b.push(e);b.length&&(h=b.join(","),h=h.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=h=new RegExp(h,"i"),this.hander=a.bindFn(this._pasteHander,this),g.on("paste",this.hander)},_pasteHander:function(a){var b,d,e,f,g,h=[],i=this.getRuid();for(a=a.originalEvent||a,b=a.clipboardData.items,f=0,g=b.length;g>f;f++)d=b[f],"file"===d.kind&&(e=d.getAsFile())&&h.push(new c(i,e));h.length&&(a.preventDefault(),a.stopPropagation(),this.trigger("paste",h))},destroy:function(){this.elem.off("paste",this.hander)}})}),b("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(){var a,b,d,e,f,g=this.getRuntime().getContainer(),h=this,i=h.owner,j=h.options,k=this.label=c(document.createElement("label")),l=this.input=c(document.createElement("input"));if(l.attr("type","file"),l.attr("capture","camera"),l.attr("name",j.name),l.addClass("webuploader-element-invisible"),k.on("click",function(a){l.trigger("click"),a.stopPropagation(),i.trigger("dialogopen")}),k.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),j.multiple&&l.attr("multiple","multiple"),j.accept&&j.accept.length>0){for(a=[],b=0,d=j.accept.length;d>b;b++)a.push(j.accept[b].mimeTypes);l.attr("accept",a.join(","))}g.append(l),g.append(k),e=function(a){i.trigger(a.type)},f=function(a){var b;return 0===a.target.files.length?!1:(h.files=a.target.files,b=this.cloneNode(!0),b.value=null,this.parentNode.replaceChild(b,this),l.off(),l=c(b).on("change",f).on("mouseenter mouseleave",e),void i.trigger("change"))},l.on("change",f),k.on("mouseenter mouseleave",e)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),b("runtime/html5/util",["base"],function(b){var c=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL,d=b.noop,e=d;return c&&(d=function(){return c.createObjectURL.apply(c,arguments)},e=function(){return c.revokeObjectURL.apply(c,arguments)}),{createObjectURL:d,revokeObjectURL:e,dataURL2Blob:function(a){var b,c,d,e,f,g;for(g=a.split(","),b=~g[0].indexOf("base64")?atob(g[1]):decodeURIComponent(g[1]),d=new ArrayBuffer(b.length),c=new Uint8Array(d),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return f=g[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(d,f)},dataURL2ArrayBuffer:function(a){var b,c,d,e;for(e=a.split(","),b=~e[0].indexOf("base64")?atob(e[1]):decodeURIComponent(e[1]),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c.buffer},arrayBufferToBlob:function(b,c){var d,e=a.BlobBuilder||a.WebKitBlobBuilder;return e?(d=new e,d.append(b),d.getBlob(c)):new Blob([b],c?{type:c}:{})},canvasToDataUrl:function(a,b,c){return a.toDataURL(b,c/100)},parseMeta:function(a,b){b(!1,{})},updateImageHead:function(a){return a}}}),b("runtime/html5/imagemeta",["runtime/html5/util"],function(a){var b;return b={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(a,b){var c=this,d=new FileReader;d.onload=function(){b(!1,c._parse(this.result)),d=d.onload=d.onerror=null},d.onerror=function(a){b(a.message),d=d.onload=d.onerror=null},a=a.slice(0,c.maxMetaDataSize),d.readAsArrayBuffer(a.getSource())},_parse:function(a,c){
if(!(a.byteLength<6)){var d,e,f,g,h=new DataView(a),i=2,j=h.byteLength-4,k=i,l={};if(65496===h.getUint16(0)){for(;j>i&&(d=h.getUint16(i),d>=65504&&65519>=d||65534===d)&&(e=h.getUint16(i+2)+2,!(i+e>h.byteLength));){if(f=b.parsers[d],!c&&f)for(g=0;g<f.length;g+=1)f[g].call(b,h,i,e,l);i+=e,k=i}k>6&&(l.imageHead=a.slice?a.slice(2,k):new Uint8Array(a).subarray(2,k))}return l}},updateImageHead:function(a,b){var c,d,e,f=this._parse(a,!0);return e=2,f.imageHead&&(e=2+f.imageHead.byteLength),d=a.slice?a.slice(e):new Uint8Array(a).subarray(e),c=new Uint8Array(b.byteLength+2+d.byteLength),c[0]=255,c[1]=216,c.set(new Uint8Array(b),2),c.set(new Uint8Array(d),b.byteLength+2),c.buffer}},a.parseMeta=function(){return b.parse.apply(b,arguments)},a.updateImageHead=function(){return b.updateImageHead.apply(b,arguments)},b}),b("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(a,b){var c={};return c.ExifMap=function(){return this},c.ExifMap.prototype.map={Orientation:274},c.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},c.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},c.exifTagTypes[7]=c.exifTagTypes[1],c.getExifValue=function(b,d,e,f,g,h){var i,j,k,l,m,n,o=c.exifTagTypes[f];if(!o)return void a.log("Invalid Exif data: Invalid tag type.");if(i=o.size*g,j=i>4?d+b.getUint32(e+8,h):e+8,j+i>b.byteLength)return void a.log("Invalid Exif data: Invalid data offset.");if(1===g)return o.getValue(b,j,h);for(k=[],l=0;g>l;l+=1)k[l]=o.getValue(b,j+l*o.size,h);if(o.ascii){for(m="",l=0;l<k.length&&(n=k[l],"\x00"!==n);l+=1)m+=n;return m}return k},c.parseExifTag=function(a,b,d,e,f){var g=a.getUint16(d,e);f.exif[g]=c.getExifValue(a,b,d,a.getUint16(d+2,e),a.getUint32(d+4,e),e)},c.parseExifTags=function(b,c,d,e,f){var g,h,i;if(d+6>b.byteLength)return void a.log("Invalid Exif data: Invalid directory offset.");if(g=b.getUint16(d,e),h=d+2+12*g,h+4>b.byteLength)return void a.log("Invalid Exif data: Invalid directory size.");for(i=0;g>i;i+=1)this.parseExifTag(b,c,d+2+12*i,e,f);return b.getUint32(h,e)},c.parseExifData=function(b,d,e,f){var g,h,i=d+10;if(1165519206===b.getUint32(d+4)){if(i+8>b.byteLength)return void a.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(d+8))return void a.log("Invalid Exif data: Missing byte alignment offset.");switch(b.getUint16(i)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void a.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(i+2,g))return void a.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(i+4,g),f.exif=new c.ExifMap,h=c.parseExifTags(b,i,i+h,g,f)}},b.parsers[65505].push(c.parseExifData),c}),b("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(a,b,c){var d="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return b.register("Image",{modified:!1,init:function(){var a=this,b=new Image;b.onload=function(){a._info={type:a.type,width:this.width,height:this.height},a._metas||"image/jpeg"!==a.type?a.owner.trigger("load"):c.parseMeta(a._blob,function(b,c){a._metas=c,a.owner.trigger("load")})},b.onerror=function(){a.owner.trigger("error")},a._img=b},loadFromBlob:function(a){var b=this,d=b._img;b._blob=a,b.type=a.type,d.src=c.createObjectURL(a.getSource()),b.owner.once("load",function(){c.revokeObjectURL(d.src)})},resize:function(a,b){var c=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,c,a,b),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(a,b,c,d,e){var f=this._canvas||(this._canvas=document.createElement("canvas")),g=this.options,h=this._img,i=h.naturalWidth,j=h.naturalHeight,k=this.getOrientation();e=e||1,f.width=c,f.height=d,g.preserveHeaders||this._rotate2Orientaion(f,k),this._renderImageToCanvas(f,h,-a,-b,i*e,j*e),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(a){var b,d=this._blob,e=this.options;if(a=a||this.type,this.modified||this.type!==a){if(b=this._canvas,"image/jpeg"===a){if(d=c.canvasToDataUrl(b,a,e.quality),e.preserveHeaders&&this._metas&&this._metas.imageHead)return d=c.dataURL2ArrayBuffer(d),d=c.updateImageHead(d,this._metas.imageHead),d=c.arrayBufferToBlob(d,a)}else d=c.canvasToDataUrl(b,a);d=c.dataURL2Blob(d)}return d},getAsDataUrl:function(a){var b=this.options;return a=a||this.type,"image/jpeg"===a?c.canvasToDataUrl(this._canvas,a,b.quality):this._canvas.toDataURL(a)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._metas=a,this):this._metas},destroy:function(){var a=this._canvas;this._img.onload=null,a&&(a.getContext("2d").clearRect(0,0,a.width,a.height),a.width=a.height=0,this._canvas=null),this._img.src=d,this._img=this._blob=null},_resize:function(a,b,c,d){var e,f,g,h,i,j=this.options,k=a.width,l=a.height,m=this.getOrientation();~[5,6,7,8].indexOf(m)&&(c^=d,d^=c,c^=d),e=Math[j.crop?"max":"min"](c/k,d/l),j.allowMagnify||(e=Math.min(1,e)),f=k*e,g=l*e,j.crop?(b.width=c,b.height=d):(b.width=f,b.height=g),h=(b.width-f)/2,i=(b.height-g)/2,j.preserveHeaders||this._rotate2Orientaion(b,m),this._renderImageToCanvas(b,a,h,i,f,g)},_rotate2Orientaion:function(a,b){var c=a.width,d=a.height,e=a.getContext("2d");switch(b){case 5:case 6:case 7:case 8:a.width=d,a.height=c}switch(b){case 2:e.translate(c,0),e.scale(-1,1);break;case 3:e.translate(c,d),e.rotate(Math.PI);break;case 4:e.translate(0,d),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-d);break;case 7:e.rotate(.5*Math.PI),e.translate(c,-d),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-c,0)}},_renderImageToCanvas:function(){function b(a,b,c){var d,e,f,g=document.createElement("canvas"),h=g.getContext("2d"),i=0,j=c,k=c;for(g.width=1,g.height=c,h.drawImage(a,0,0),d=h.getImageData(0,0,1,c).data;k>i;)e=d[4*(k-1)+3],0===e?j=k:i=k,k=j+i>>1;return f=k/c,0===f?1:f}function c(a){var b,c,d=a.naturalWidth,e=a.naturalHeight;return d*e>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-d+1,0),0===c.getImageData(0,0,1,1).data[3]):!1}return a.os.ios?a.os.ios>=7?function(a,c,d,e,f,g){var h=c.naturalWidth,i=c.naturalHeight,j=b(c,h,i);return a.getContext("2d").drawImage(c,0,0,h*j,i*j,d,e,f,g)}:function(a,d,e,f,g,h){var i,j,k,l,m,n,o,p=d.naturalWidth,q=d.naturalHeight,r=a.getContext("2d"),s=c(d),t="image/jpeg"===this.type,u=1024,v=0,w=0;for(s&&(p/=2,q/=2),r.save(),i=document.createElement("canvas"),i.width=i.height=u,j=i.getContext("2d"),k=t?b(d,p,q):1,l=Math.ceil(u*g/p),m=Math.ceil(u*h/q/k);q>v;){for(n=0,o=0;p>n;)j.clearRect(0,0,u,u),j.drawImage(d,-n,-v),r.drawImage(i,0,0,u,u,e+o,f+w,l,m),n+=u,o+=l;v+=u,w+=m}r.restore(),i=j=null}:function(b){var c=a.slice(arguments,1),d=b.getContext("2d");d.drawImage.apply(d,c)}}()})}),b("runtime/html5/transport",["base","runtime/html5/runtime"],function(a,b){var c=a.noop,d=a.$;return b.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var b,c,e,f=this.owner,g=this.options,h=this._initAjax(),i=f._blob,j=g.server;g.sendAsBinary?(j+=g.attachInfoToQuery!==!1?(/\?/.test(j)?"&":"?")+d.param(f._formData):"",c=i.getSource()):(b=new FormData,d.each(f._formData,function(a,c){b.append(a,c)}),b.append(g.fileVal,i.getSource(),g.filename||f._formData.name||"")),g.withCredentials&&"withCredentials"in h?(h.open(g.method,j,!0),h.withCredentials=!0):h.open(g.method,j),this._setRequestHeader(h,g.headers),c?(h.overrideMimeType&&h.overrideMimeType("application/octet-stream"),a.os.android?(e=new FileReader,e.onload=function(){h.send(this.result),e=e.onload=null},e.readAsArrayBuffer(c)):h.send(c)):h.send(b)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getResponseHeaders:function(){return this._headers},getStatus:function(){return this._status},abort:function(){var a=this._xhr;a&&(a.upload.onprogress=c,a.onreadystatechange=c,a.abort(),this._xhr=a=null)},destroy:function(){this.abort()},_parseHeader:function(a){var b={};return a&&a.replace(/^([^\:]+):(.*)$/gm,function(a,c,d){b[c.trim()]=d.trim()}),b},_initAjax:function(){var a=this,b=new XMLHttpRequest,d=this.options;return!d.withCredentials||"withCredentials"in b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest),b.upload.onprogress=function(b){var c=0;return b.lengthComputable&&(c=b.loaded/b.total),a.trigger("progress",c)},b.onreadystatechange=function(){if(4===b.readyState){b.upload.onprogress=c,b.onreadystatechange=c,a._xhr=null,a._status=b.status;var d="|",e=d+b.status+d+b.statusText;return b.status>=200&&b.status<300?(a._response=b.responseText,a._headers=a._parseHeader(b.getAllResponseHeaders()),a.trigger("load")):b.status>=500&&b.status<600?(a._response=b.responseText,a._headers=a._parseHeader(b.getAllResponseHeaders()),a.trigger("error","server"+e)):a.trigger("error",a._status?"http"+e:"abort")}},a._xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c){a.setRequestHeader(b,c)})},_parseJson:function(a){var b;try{b=JSON.parse(a)}catch(c){b={}}return b}})}),b("preset/html5only",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/image","runtime/html5/transport"],function(a){return a}),b("webuploader",["preset/html5only"],function(a){return a}),c("webuploader")}),window.console||(window.console={}),console.log||(console.log=function(){});var tb="4.4.3 (2023-02-22)",ub=navigator.userAgent.toLowerCase(),vb=ub.indexOf("msie")>-1&&-1==ub.indexOf("opera"),wb=-1==ub.indexOf("msie")&&ub.indexOf("trident")>-1,xb=ub.indexOf("gecko")>-1&&-1==ub.indexOf("khtml"),yb=ub.indexOf("applewebkit")>-1,zb=ub.indexOf("opera")>-1,Ab=ub.indexOf("mobile")>-1,Bb=/ipad|iphone|ipod/.test(ub),Cb="CSS1Compat"!=document.compatMode,Db=!window.getSelection,Eb=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(ub),Fb=Eb?Eb[1]:"0",Gb=(new Date).getTime(),Hb=Math.round,Ib={DEBUG:!1,VERSION:tb,IE:vb,GECKO:xb,WEBKIT:yb,OPERA:zb,V:Fb,TIME:Gb,each:d,isArray:a,isFunction:b,inArray:c,inString:f,trim:e,addUnit:g,removeUnit:h,escape:i,unescape:j,toCamel:k,toHex:l,toMap:m,toArray:n,undef:o,invalidUrl:p,addParam:q,extend:r,json:s},Jb=m("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),Kb=m("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul,audio,video"),Lb=m("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),Mb=m("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),Nb=m("img,table,input,textarea,button,audio,video"),Ob=m("pre,style,script"),Pb=m("html,head,body,td,tr,table,ol,ul,li"),Qb=(m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),m("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected")),Rb=m("input,button,textarea,select");Ib.basePath=t(),Ib.Tools={All:["source","|","undo","redo","removeformat","clearhtml","|","template","code","cut","copy","plainpaste","wordpaste","|","preview","selectall","fullscreen","print","|","quickformat","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","quote","subscript","superscript","|","image","multiimage","media","insertfile","baidumap","link","unlink","|","table","anchor","hr","pagebreak","|","emoticons","symbols"],Normal:["source","|","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","image","multiimage","media","insertfile","baidumap","link","unlink","|","table","anchor","hr","pagebreak","|","quote","subscript","superscript","|","preview","fullscreen","quickformat","emoticons","symbols"],Small:["source","|","formatblock","fontname","fontsize","|","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","quote","image","multiimage","media","insertfile","|","table","hr","pagebreak","|","link","unlink","|","preview","fullscreen"],Mini:["formatblock","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","|","image","insertfile","table","link","unlink"]},Ib.Templates=[{name:"图片和文字",content:'<h3><img align="left" height="100" style="margin-right: 10px" width="100" />在此处输入标题</h3><p>在此处输入内容</p>'},{name:"表格",content:'<h3>标题</h3><table style="width:100%;" cellpadding="2" cellspacing="0" border="1"><tbody><tr><td><h3>标题1</h3></td><td><h3>标题1</h3></td></tr><tr><td>内容1</td><td>内容2</td></tr><tr><td>内容3</td><td>内容4</td></tr></tbody></table><p>表格说明</p>'},{name:"项目编号",content:"<p>在此处输入内容</p><ol><li>描述1</li><li>描述2</li><li>描述3</li></ol><p>在此处输入内容</p><ul><li>描述1</li><li>描述2</li><li>描述3</li></ul>"}],Ib.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:Ib.basePath,themesPath:Ib.basePath+"themes/",langPath:Ib.basePath+"lang/",pluginsPath:Ib.basePath+"plugins/",themeType:"default",langType:"zh-CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:!0,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"	",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:Ib.Tools.Normal,noDisableItems:["source","fullscreen"],colorTable:[["#1abc9c","#2ecc71","#3498db","#9b59b6","#4e5f70","#f1c40f"],["#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f39c12"],["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],media:["id","class"],audio:["id","class","src","width","height","type","loop","autostart","autoplay",".width",".height","controls","muted","preload"],video:["id","class","src","width","height","type","loop","autostart","autoplay",".width",".height","controls","muted","poster","preload"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var Sb=!1,Tb=m("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),Ub=m("33..40"),Vb={};d(Tb,function(a,b){Vb[a]=b}),d(Ub,function(a,b){Vb[a]=b});var Wb="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");r(w,{init:function(a,b){var c=this,e=a.ownerDocument||a.document||a;if(c.event=b,d(Wb,function(a,d){c[d]=b[d]}),c.target||(c.target=c.srcElement||e),3===c.target.nodeType&&(c.target=c.target.parentNode),!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement),null==c.pageX&&null!=c.clientX){var f=e.documentElement,g=e.body;c.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),c.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}switch(!c.which&&(c.charCode||0===c.charCode?c.charCode:c.keyCode)&&(c.which=c.charCode||c.keyCode),!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey),c.which||void 0===c.button||(c.which=1&c.button?1:2&c.button?3:4&c.button?2:0),c.which){case 186:c.which=59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110}c.which>=96&&c.which<=105&&(c.which-=48)},preventDefault:function(){var a=this.event;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},stop:function(){this.preventDefault(),this.stopPropagation()}});var Xb="kindeditor_"+Gb,Yb=0,Zb={},$b=!1;window.attachEvent&&window.attachEvent("onunload",function(){d(Zb,function(a,b){b.el&&B(b.el)})}),Ib.ctrl=D,Ib.ready=E,Ib.formatUrl=J,Ib.formatHtml=K,Ib.getCssList=F,Ib.getAttrList=G,Ib.mediaType=M,Ib.mediaAttrs=O,Ib.mediaEmbed=P,Ib.mediaImg=Q,Ib.clearMsWord=L,Ib.tmpl=R;var _b=document.createElement("div");_b.setAttribute("className","t");var ac="t"!==_b.className;Ib.query=V,Ib.queryAll=U,r(ga,{init:function(b){var c=this;b=a(b)?b:[b];for(var d=0,e=0,f=b.length;f>e;e++)b[e]&&(c[e]=b[e].constructor===ga?b[e][0]:b[e],d++);c.length=d,c.doc=X(c[0]),c.name=ba(c[0]),c.type=c.length>0?c[0].nodeType:null,c.win=Y(c[0])},each:function(a){for(var b=this,c=0;c<b.length;c++)if(a.call(b[c],c,b[c])===!1)return b;return b},bind:function(a,b){return this.each(function(){A(this,a,b)}),this},unbind:function(a,b){return this.each(function(){B(this,a,b)}),this},fire:function(a){return this.length<1?this:(C(this[0],a),this)},hasAttr:function(a){return this.length<1?!1:!!T(this[0],a)},attr:function(a,b){var c=this;return void 0===a?G(c.outer()):"object"==typeof a?(d(a,function(a,b){c.attr(a,b)}),c):void 0===b?(b=c.length<1?null:T(c[0],a),null===b?"":b):(c.each(function(){_(this,a,b)}),c)},removeAttr:function(a){return this.each(function(){aa(this,a)}),this},get:function(a){return this.length<1?null:this[a||0]},eq:function(a){return this.length<1?null:this[a]?new ga(this[a]):null},hasClass:function(a){return this.length<1?!1:$(this[0],a)},addClass:function(a){return this.each(function(){$(this,a)||(this.className=e(this.className+" "+a))}),this},removeClass:function(a){return this.each(function(){$(this,a)&&(this.className=e(this.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," ")))}),this},html:function(a){var b=this;return void 0===a?b.length<1||1!=b.type?"":K(b[0].innerHTML):(b.each(function(){Z(this,a)}),b)},text:function(){var a=this;return a.length<1?"":vb?a[0].innerText:a[0].textContent},hasVal:function(){return this.length<1?!1:da(this[0])},val:function(a){var b=this;return void 0===a?b.length<1?"":b.hasVal()?b[0].value:b.attr("value"):(b.each(function(){da(this)?this.value=a:_(this,"value",a)}),b)},css:function(a,b){var c=this;return void 0===a?F(c.attr("style")):"object"==typeof a?(d(a,function(a,b){c.css(a,b)}),c):void 0===b?c.length<1?"":c[0].style[k(a)]||ca(c[0],a)||"":(c.each(function(){this.style[k(a)]=b}),c)},width:function(a){var b=this;return void 0===a?b.length<1?0:b[0].offsetWidth:b.css("width",g(a))},height:function(a){var b=this;return void 0===a?b.length<1?0:b[0].offsetHeight:b.css("height",g(a))},opacity:function(a){return this.each(function(){void 0===this.style.opacity?this.style.filter=1==a?"":"alpha(opacity="+100*a+")":this.style.opacity=1==a?"":a}),this},data:function(a,b){var c=this;return a="kindeditor_data_"+a,void 0===b?c.length<1?null:c[0][a]:(this.each(function(){this[a]=b}),c)},pos:function(){var a=this,b=a[0],c=0,d=0;if(b)if(b.getBoundingClientRect){var e=b.getBoundingClientRect(),f=fa(a.doc);c=e.left+f.x,d=e.top+f.y}else for(;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return{x:Hb(c),y:Hb(d)}},clone:function(a){return new ga(this.length<1?[]:this[0].cloneNode(a))},append:function(a){return this.each(function(){this.appendChild&&this.appendChild(W(a))}),this},appendTo:function(a){return this.each(function(){W(a).appendChild(this)}),this},before:function(a){return this.each(function(){this.parentNode.insertBefore(W(a),this)}),this},after:function(a){return this.each(function(){this.nextSibling?this.parentNode.insertBefore(W(a),this.nextSibling):this.parentNode.appendChild(W(a))}),this},replaceWith:function(a){var b=[];return this.each(function(c,d){B(d);var e=W(a);d.parentNode.replaceChild(e,d),b.push(e)}),Ib(b)},empty:function(){var a=this;return a.each(function(a,b){for(var c=b.firstChild;c;){if(!b.parentNode)return;var d=c.nextSibling;c.parentNode.removeChild(c),c=d}}),a},remove:function(a){var b=this;return b.each(function(c,d){if(d.parentNode){if(B(d),a)for(var e=d.firstChild;e;){var f=e.nextSibling;d.parentNode.insertBefore(e,d),e=f}d.parentNode.removeChild(d),delete b[c]}}),b.length=0,b},show:function(a){var b=this;return void 0===a&&(a=b._originDisplay||""),"none"!=b.css("display")?b:b.css("display",a)},hide:function(){var a=this;return a.length<1?a:(a._originDisplay=a[0].style.display,a.css("display","none"))},outer:function(){var a=this;if(a.length<1)return"";var b,c=a.doc.createElement("div");return c.appendChild(a[0].cloneNode(!0)),b=K(c.innerHTML),c=null,b},isSingle:function(){return!!Lb[this.name]},isInline:function(){return!!Jb[this.name]},isBlock:function(){return!!Kb[this.name]},isStyle:function(){return!!Mb[this.name]},isControl:function(){return!!Nb[this.name]},contains:function(a){return this.length<1?!1:S(this[0],W(a))},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new ga(a):null},children:function(){if(this.length<1)return new ga([]);for(var a=[],b=this[0].firstChild;b;)(3!=b.nodeType||""!==e(b.nodeValue))&&a.push(b),b=b.nextSibling;return new ga(a)},first:function(){var a=this.children();return a.length>0?a.eq(0):null},last:function(){var a=this.children();return a.length>0?a.eq(a.length-1):null},index:function(){if(this.length<1)return-1;for(var a=-1,b=this[0];b;)a++,b=b.previousSibling;return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new ga(a):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new ga(a):null},scan:function(a,b){function c(d){for(var e=b?d.firstChild:d.lastChild;e;){var f=b?e.nextSibling:e.previousSibling;if(a(e)===!1)return!1;if(c(e)===!1)return!1;e=f}}if(!(this.length<1))return b=void 0===b?!0:b,c(this[0]),this}}),d("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),function(a,b){ga.prototype[b]=function(a){return a?this.bind(b,a):this.fire(b)}});var bc=Ib;Ib=function(b,c){function d(a){return a[0]||(a=[]),new ga(a)}if(void 0!==b&&null!==b){if("string"==typeof b){c&&(c=W(c));var e=b.length;if("@"===b.charAt(0)&&(b=b.substr(1)),b.length!==e||/<.+>/.test(b)){var f=c?c.ownerDocument||c:document,g=f.createElement("div"),h=[];g.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;for(var i=0,j=g.childNodes.length;j>i;i++){var k=g.childNodes[i];"__kindeditor_temp_tag__"!=k.id&&h.push(k)}return d(h)}return d(U(b,c))}return b&&b.constructor===ga?b:(b.toArray&&(b=b.toArray()),d(a(b)?b:n(arguments)))}},d(bc,function(a,b){Ib[a]=b}),Ib.NodeClass=ga,window.KindEditor=Ib;var cc=0,dc=1,ec=2,fc=3,gc=0;r(na,{init:function(a){var b=this;b.startContainer=a,b.startOffset=0,b.endContainer=a,b.endOffset=0,b.collapsed=!0,b.doc=a},commonAncestor:function(){function a(a){for(var b=[];a;)b.push(a),a=a.parentNode;return b}for(var b,c,d=a(this.startContainer),e=a(this.endContainer),f=0,g=d.length,h=e.length;++f&&(b=d[g-f],c=e[h-f],b&&c&&b===c););return d[g-f+1]},setStart:function(a,b){var c=this,d=c.doc;return c.startContainer=a,c.startOffset=b,c.endContainer===d&&(c.endContainer=a,c.endOffset=b),ha(this)},setEnd:function(a,b){var c=this,d=c.doc;return c.endContainer=a,c.endOffset=b,c.startContainer===d&&(c.startContainer=a,c.startOffset=b),ha(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,Ib(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,Ib(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,Ib(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,Ib(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=Ib(a);if(3==b.type||b.isSingle())return this.selectNode(a);var c=b.children();return c.length>0?this.setStartBefore(c[0]).setEndAfter(c[c.length-1]):this.setStart(a,0).setEnd(a,0)},collapse:function(a){return a?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),d=b.get();if(!Db)return c.compareBoundaryPoints(a,d);var e={};e[cc]="StartToStart",e[dc]="EndToStart",e[ec]="EndToEnd",e[fc]="StartToEnd";var f=c.compareEndPoints(e[a],d);if(0!==f)return f;var g,h,i,j,k;if((a===cc||a===fc)&&(g=this.startContainer,j=this.startOffset),(a===dc||a===ec)&&(g=this.endContainer,j=this.endOffset),(a===cc||a===dc)&&(h=b.startContainer,k=b.startOffset),(a===ec||a===fc)&&(h=b.endContainer,k=b.endOffset),g===h){var l=j-k;return l>0?1:0>l?-1:0}for(i=h;i&&i.parentNode!==g;)i=i.parentNode;if(i)return Ib(i).index()>=j?-1:1;for(i=g;i&&i.parentNode!==h;)i=i.parentNode;return i?Ib(i).index()>=k?1:-1:(i=Ib(h).next(),i&&i.contains(g)?1:(i=Ib(g).next(),i&&i.contains(h)?-1:void 0))},cloneRange:function(){return new na(this.doc).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get(),b=Db?a.text:a.toString();return b.replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return ia(this,!0,!1)},deleteContents:function(){return ia(this,!1,!0)},extractContents:function(){return ia(this,!0,!0)},insertNode:function(a){var b,c,d,e=this,f=e.startContainer,g=e.startOffset,h=e.endContainer,i=e.endOffset,j=1;return"#document-fragment"===a.nodeName.toLowerCase()&&(b=a.firstChild,c=a.lastChild,j=a.childNodes.length),1==f.nodeType?(d=f.childNodes[g],d?(f.insertBefore(a,d),f===h&&(i+=j)):f.appendChild(a)):3==f.nodeType&&(0===g?(f.parentNode.insertBefore(a,f),f.parentNode===h&&(i+=j)):g>=f.nodeValue.length?f.nextSibling?f.parentNode.insertBefore(a,f.nextSibling):f.parentNode.appendChild(a):(d=g>0?f.splitText(g):f,f.parentNode.insertBefore(a,d),f===h&&(h=d,i-=g))),b?e.setStartBefore(b).setEndAfter(c):e.selectNode(a),e.compareBoundaryPoints(ec,e.cloneRange().setEnd(h,i))>=1?e:e.setEnd(h,i)},surroundContents:function(a){return a.appendChild(this.extractContents()),this.insertNode(a).selectNode(a)},isControl:function(){var a=this,b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return 1==b.nodeType&&b===d&&c+1===e&&Ib(b.childNodes[c]).isControl()},get:function(a){var b,c=this,d=c.doc;if(!Db){b=d.createRange();try{b.setStart(c.startContainer,c.startOffset),b.setEnd(c.endContainer,c.endOffset)}catch(e){}return b}if(a&&c.isControl())return b=d.body.createControlRange(),b.addElement(c.startContainer.childNodes[c.startOffset]),b;var f=c.cloneRange().down();return b=d.body.createTextRange(),b.setEndPoint("StartToStart",la(f.startContainer,f.startOffset)),b.setEndPoint("EndToStart",la(f.endContainer,f.endOffset)),b},html:function(){return Ib(this.cloneContents()).outer()},down:function(){function a(a,c,d){if(1==a.nodeType){var e=Ib(a).children();if(0!==e.length){var f,g,h,i;c>0&&(f=e.eq(c-1)),c<e.length&&(g=e.eq(c)),f&&3==f.type&&(h=f[0],i=h.nodeValue.length),g&&3==g.type&&(h=g[0],i=0),h&&(d?b.setStart(h,i):b.setEnd(h,i))}}}var b=this;return a(b.startContainer,b.startOffset,!0),a(b.endContainer,b.endOffset,!1),b},up:function(){function a(a,c,d){3==a.nodeType&&(0===c?d?b.setStartBefore(a):b.setEndBefore(a):c==a.nodeValue.length&&(d?b.setStartAfter(a):b.setEndAfter(a)))}var b=this;return a(b.startContainer,b.startOffset,!0),a(b.endContainer,b.endOffset,!1),b},enlarge:function(a){function b(b,d,e){var f,g=Ib(b);if(!(3==g.type||Pb[g.name]||!a&&g.isBlock()))if(0===d){for(;!g.prev()&&(f=g.parent(),f&&!Pb[f.name]&&(a||!f.isBlock()));)g=f;e?c.setStartBefore(g[0]):c.setEndBefore(g[0])}else if(d==g.children().length){for(;!g.next()&&(f=g.parent(),f&&!Pb[f.name]&&(a||!f.isBlock()));)g=f;e?c.setStartAfter(g[0]):c.setEndAfter(g[0])}}var c=this;return c.up(),b(c.startContainer,c.startOffset,!0),b(c.endContainer,c.endOffset,!1),c},shrink:function(){for(var a,b=this,c=b.collapsed;1==b.startContainer.nodeType&&(a=b.startContainer.childNodes[b.startOffset])&&1==a.nodeType&&!Ib(a).isSingle();)b.setStart(a,0);if(c)return b.collapse(c);for(;1==b.endContainer.nodeType&&b.endOffset>0&&(a=b.endContainer.childNodes[b.endOffset-1])&&1==a.nodeType&&!Ib(a).isSingle();)b.setEnd(a,a.childNodes.length);return b},createBookmark:function(a){var b,c=this,d=c.doc,e=Ib('<span style="display:none;"></span>',d)[0];return e.id="__kindeditor_bookmark_start_"+gc++ +"__",c.collapsed||(b=e.cloneNode(!0),b.id="__kindeditor_bookmark_end_"+gc++ +"__"),b&&c.cloneRange().collapse(!1).insertNode(b).setEndBefore(b),c.insertNode(e).setStartAfter(e),{start:a?"#"+e.id:e,end:b?a?"#"+b.id:b:null}},moveToBookmark:function(a){var b=this,c=b.doc,d=Ib(a.start,c),e=a.end?Ib(a.end,c):null;return!d||d.length<1?b:(b.setStartBefore(d[0]),d.remove(),e&&e.length>0?(b.setEndBefore(e[0]),e.remove()):b.collapse(!0),b)},dump:function(){console.log("--------------------"),console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset),console.log(3==this.endContainer.nodeType?this.endContainer.nodeValue:this.endContainer,this.endOffset);
}}),Ib.RangeClass=na,Ib.range=oa,Ib.START_TO_START=cc,Ib.START_TO_END=dc,Ib.END_TO_END=ec,Ib.END_TO_START=fc,r(Ea,{init:function(a,b){var c=this,d=a.doc;c.doc=d,c.win=Y(d),c.sel=ra(d),c.range=a,c.editorOptions=b},selection:function(a){var b=this,c=b.doc,d=sa(c);return b.sel=ra(c),d?(b.range=oa(d),"html"==Ib(b.range.startContainer).name&&b.range.selectNodeContents(c.body).collapse(!1),b):(a&&b.range.selectNodeContents(c.body).collapse(!1),b)},select:function(a){a=o(a,!0);var b,c=this,d=c.sel,e=c.range.cloneRange().shrink(),f=e.startContainer,g=e.startOffset,h=(e.endContainer,e.endOffset,X(f)),i=c.win,j=!1;if(a&&1==f.nodeType&&e.collapsed){if(Db){var k=Ib("<span>&nbsp;</span>",h);e.insertNode(k[0]),b=h.body.createTextRange();try{b.moveToElementText(k[0])}catch(l){}return b.collapse(!1),b.select(),k.remove(),i.focus(),c}if(yb){var m=f.childNodes;(Ib(f).isInline()||g>0&&Ib(m[g-1]).isInline()||m[g]&&Ib(m[g]).isInline())&&(e.insertNode(h.createTextNode("​")),j=!0)}}if(Db)try{b=e.get(!0),b.select()}catch(n){console.info("error",n)}else if(j&&e.collapse(!1),b=e.get(!0),d.removeAllRanges(),d.addRange(b),c.editorOptions&&c.editorOptions.scrollToEditingTarget&&h!==document){try{var p=[].filter.call(b.endContainer.children,function(a){return"IMG"==a.nodeName}).length;if(p>1)return}catch(n){console.info("error",n)}var q=Ib(b.endContainer).pos();i.scrollTo(q.x,q.y)}return i.focus(),c},wrap:function(a){var b,c=this,d=c.doc,f=c.range;if(b=Ib(a,d),f.collapsed)return f.shrink(),f.insertNode(b[0]).selectNodeContents(b[0]),c;if(b.isBlock()){for(var g=b.clone(!0),h=g;h.first();)h=h.first();return h.append(f.extractContents()),f.insertNode(g[0]).selectNode(g[0]),c}f.enlarge();var i=f.createBookmark(),j=f.commonAncestor(),k=!1;return Ib(j).scan(function(a){if(!k&&a==i.start)return void(k=!0);if(k){if(a==i.end)return!1;var c=Ib(a);if(Da(c))return;if(3==c.type&&e(a.nodeValue).length>0){for(var d;(d=c.parent())&&d.isStyle()&&1==d.children().length;)c=d;Ba(c,b)}}}),f.moveToBookmark(i),c},split:function(a,b){for(var c,d=this.range,e=d.doc,f=d.cloneRange().collapse(a),g=f.startContainer,h=f.startOffset,i=3==g.nodeType?g.parentNode:g,j=!1;i&&i.parentNode;){if(c=Ib(i),b){if(!c.isStyle())break;if(!ua(c,b))break}else if(Pb[c.name])break;j=!0,i=i.parentNode}if(j){var k=e.createElement("span");d.cloneRange().collapse(!a).insertNode(k),a?f.setStartBefore(i.firstChild).setEnd(g,h):f.setStart(g,h).setEndAfter(i.lastChild);var l=f.extractContents(),m=l.firstChild,n=l.lastChild;a?(f.insertNode(l),d.setStartAfter(n).setEndBefore(k)):(i.appendChild(l),d.setStartBefore(k).setEndBefore(m));var o=k.parentNode;if(o==d.endContainer){var p=Ib(k).prev(),q=Ib(k).next();p&&q&&3==p.type&&3==q.type?d.setEnd(p[0],p[0].nodeValue.length):a||d.setEnd(d.endContainer,d.endOffset-1)}o.removeChild(k)}return this},remove:function(a){var b=this,c=b.doc,e=b.range;if(e.enlarge(),0===e.startOffset){for(var f,g=Ib(e.startContainer);(f=g.parent())&&f.isStyle()&&1==f.children().length;)g=f;e.setStart(g[0],0),g=Ib(e.startContainer),g.isBlock()&&wa(g,a);var h=g.parent();h&&h.isBlock()&&wa(h,a)}var i,j;if(e.collapsed){if(b.split(!0,a),i=e.startContainer,j=e.startOffset,j>0){var k=Ib(i.childNodes[j-1]);k&&za(k)&&(k.remove(),e.setStart(i,j-1))}var l=Ib(i.childNodes[j]);return l&&za(l)&&l.remove(),za(i)&&(e.startBefore(i),i.remove()),e.collapse(!0),b}b.split(!0,a),b.split(!1,a);var m=c.createElement("span"),n=c.createElement("span");e.cloneRange().collapse(!1).insertNode(n),e.cloneRange().collapse(!0).insertNode(m);var o=[],p=!1;Ib(e.commonAncestor()).scan(function(a){return p||a!=m?a==n?!1:void(p&&o.push(a)):void(p=!0)}),Ib(m).remove(),Ib(n).remove(),i=e.startContainer,j=e.startOffset;var q=e.endContainer,r=e.endOffset;if(j>0){var s=Ib(i.childNodes[j-1]);s&&za(s)&&(s.remove(),e.setStart(i,j-1),i==q&&e.setEnd(q,r-1));var t=Ib(i.childNodes[j]);t&&za(t)&&(t.remove(),i==q&&e.setEnd(q,r-1))}var u=Ib(q.childNodes[e.endOffset]);u&&za(u)&&u.remove();var v=e.createBookmark(!0);return d(o,function(b,c){wa(Ib(c),a)}),e.moveToBookmark(v),b},commonNode:function(a){function b(b){for(var c=b,d=b;d;){if(ua(Ib(d),a))return Ib(d);d=d.parentNode}for(;c&&(c=c.lastChild);)if(ua(Ib(c),a))return Ib(c);return null}var c=this.range,d=c.endContainer,e=c.endOffset,f=3==d.nodeType||0===e?d:d.childNodes[e-1],g=b(f);if(g)return g;if(!f)return null;if(1==f.nodeType||3==d.nodeType&&0===e){var h=Ib(f).prev();if(h)return b(h)}return null},commonAncestor:function(a){function b(b){for(;b;){if(1==b.nodeType&&b.tagName.toLowerCase()===a)return b;b=b.parentNode}return null}var c=this.range,d=c.startContainer,e=c.startOffset,f=c.endContainer,g=c.endOffset,h=3==d.nodeType||0===e?d:d.childNodes[e-1],i=3==f.nodeType||0===g?f:f.childNodes[g-1],j=b(h),k=b(i);return j&&k&&j===k?Ib(j):null},state:function(a){var b=this,c=b.doc,d=!1;try{d=c.queryCommandState(a)}catch(e){}return d},val:function(a){function b(a){return a.toLowerCase()}var c=this,d=c.doc;c.range;a=b(a);var e,f="";return"fontfamily"===a||"fontname"===a?(f=qa(d,"fontname"),f=f.replace(/['"]/g,""),b(f)):"formatblock"===a?(f=qa(d,a),""===f&&(e=c.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}),e&&(f=e.name)),"Normal"===f&&(f="p"),b(f)):"fontsize"===a?(e=c.commonNode({"*":".font-size"}),e&&(f=e.css("font-size")),b(f)):"forecolor"===a?(e=c.commonNode({"*":".color"}),e&&(f=e.css("color")),f=l(f),""===f&&(f="default"),b(f)):"hilitecolor"===a?(e=c.commonNode({"*":".background-color"}),e&&(f=e.css("background-color")),f=l(f),""===f&&(f="default"),b(f)):f},toggle:function(a,b){var c=this;return c.commonNode(b)?c.remove(b):c.wrap(a),c.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.wrap('<span style="color:'+a+';"></span>').select()},hilitecolor:function(a){return this.wrap('<span style="background-color:'+a+';"></span>').select()},fontsize:function(a){return this.wrap('<span style="font-size:'+a+';"></span>').select()},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.wrap('<span style="font-family:'+a+';"></span>').select()},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"},b=Mb;return d(b,function(b,c){a[b]="*"}),this.remove(a),this.select()},inserthtml:function(a,b){function c(a,b){b='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var c=a.get();c.item?c.item(0).outerHTML=b:c.pasteHTML(b);var d=a.doc.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d);var f=ma(c);a.setEnd(f.endContainer,f.endOffset),a.collapse(!1),e.select(!1)}function d(a,b){var c=a.doc,d=c.createDocumentFragment();Ib("@"+b,c).each(function(){d.appendChild(this)}),a.deleteContents(),a.insertNode(d),a.collapse(!1),e.select(!1)}var e=this,f=e.range;if(""===a)return e;if(Db&&b){try{c(f,a)}catch(g){d(f,a)}return e}return d(f,a),e},hr:function(){return this.inserthtml("<hr />")},print:function(){return this.win.print(),this},insertimage:function(a,b,c,d,e,f,g,h){b=o(b,""),e=o(e,0),g=o(g,"");var j='<img data-ke-class="'+g+'" src="'+i(a)+'" data-ke-src="'+i(a)+'" ';return c&&(j+='width="'+i(c)+'" '),d&&(j+='height="'+i(d)+'" '),b&&(j+='title="'+i(b)+'" '),f&&(j+='align="'+i(f)+'" '),j+='alt="'+i(b)+'" ',j+="/>",h&&(j="<"+h+">"+j+"</"+h+">"),this.inserthtml(j)},createlink:function(a,b){function c(a,b,c){Ib(a).attr("href",b).attr("data-ke-src",b),c?Ib(a).attr("target",c):Ib(a).removeAttr("target")}var d=this,e=d.doc,f=d.range;d.select();var g=d.commonNode({a:"*"});g&&!f.isControl()&&(f.selectNode(g.get()),d.select());var h='<a href="'+i(a)+'" data-ke-src="'+i(a)+'" ';if(b&&(h+=' target="'+i(b)+'"'),f.collapsed)return h+=">"+i(a)+"</a>",d.inserthtml(h);if(f.isControl()){var j=Ib(f.startContainer.childNodes[f.startOffset]);return h+="></a>",j.after(Ib(h,e)),j.next().append(j),f.selectNode(j[0]),d.select()}var k=f.startContainer,l=f.startOffset,m=f.endContainer,n=f.endOffset;if(1==k.nodeType&&k===m&&l+1===n){var o=k.childNodes[l];if("a"==o.nodeName.toLowerCase())return c(o,a,b),d}return pa(e,"createlink","__kindeditor_temp_url__"),Ib('a[href="__kindeditor_temp_url__"]',e).each(function(){c(this,a,b)}),d},unlink:function(){var a=this,b=a.doc,c=a.range;if(a.select(),c.collapsed){var d=a.commonNode({a:"*"});if(d&&(c.selectNode(d.get()),a.select()),pa(b,"unlink",null),yb&&"img"===Ib(c.startContainer).name){var e=Ib(c.startContainer).parent();"a"===e.name&&e.remove(!0)}}else pa(b,"unlink",null);return a}}),d("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(a,b){Ea.prototype[b]=function(a){var d=this;return d.select(),pa(d.doc,b,a),Db&&c(b,"justifyleft,justifycenter,justifyright,justifyfull".split(","))>=0&&d.selection(),(!Db||c(b,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0)&&d.selection(),d}}),d("cut,copy,paste".split(","),function(a,b){Ea.prototype[b]=function(){var a=this;if(!a.doc.queryCommandSupported(b))throw"not supported";return a.select(),pa(a.doc,b,null),a}}),Ib.CmdClass=Ea,Ib.cmd=Fa,r(Ha,{init:function(a){var b=this;if(b.name=a.name||"",b.doc=a.doc||document,b.win=Y(b.doc),b.x=g(a.x),b.y=g(a.y),b.z=a.z,b.width=g(a.width),b.height=g(a.height),b.div=Ib('<div style="display:block;"></div>'),b.options=a,b._alignEl=a.alignEl,b.width&&b.div.css("width",b.width),b.height&&b.div.css("height",b.height),b.z&&b.div.css({position:"absolute",left:b.x,top:b.y,"z-index":b.z}),!b.z||void 0!==b.x&&void 0!==b.y||b.autoPos(b.width,b.height),a.cls&&b.div.addClass(a.cls),a.shadowMode&&b.div.addClass("ke-shadow"),a.css&&b.div.css(a.css),a.src?Ib(a.src).replaceWith(b.div):Ib(b.doc.body).append(b.div),a.html&&b.div.html(a.html),a.autoScroll)if(vb&&7>Fb||Cb){var c=fa();Ib(b.win).bind("scroll",function(a){var d=fa(),e=d.x-c.x,f=d.y-c.y;b.pos(h(b.x)+e,h(b.y)+f,!1)})}else b.div.css("position","fixed")},pos:function(a,b,c){var d=this;return c=o(c,!0),null!==a&&(a=0>a?0:g(a),d.div.css("left",a),c&&(d.x=a)),null!==b&&(b=0>b?0:g(b),d.div.css("top",b),c&&(d.y=b)),d},autoPos:function(a,b){var c,d,e=this,f=h(a)||0,g=h(b)||0,i=fa();if(e._alignEl){var j=Ib(e._alignEl),k=j.pos(),l=Hb(j[0].clientWidth/2-f/2),m=Hb(j[0].clientHeight/2-g/2);c=0>l?k.x:k.x+l,d=0>m?k.y:k.y+m}else{var n=ea(e.doc);c=Hb(i.x+(n.clientWidth-f)/2),d=Hb(i.y+(n.clientHeight-g)/2)}return vb&&7>Fb||Cb||(c-=i.x,d-=i.y),e.pos(c,d)},remove:function(){var a=this;return(vb&&7>Fb||Cb)&&Ib(a.win).unbind("scroll"),a.div.remove(),d(a,function(b){a[b]=null}),this},show:function(){return this.div.show(),this},hide:function(){return this.div.hide(),this},draggable:function(a){var b=this;return a=a||{},a.moveEl=b.div,a.moveFn=function(a,c,d,e,f,g){(a+=f)<0&&(a=0),(c+=g)<0&&(c=0),b.pos(a,c)},Ga(a),b}}),Ib.WidgetClass=Ha,Ib.widget=Ia;var hc,ic="";(hc=document.getElementsByTagName("html"))&&(ic=hc[0].dir),r(Ma,Ha,{init:function(a){function b(){var b=Ja(c.iframe);b.open(),h&&(b.domain=document.domain),b.write(Ka(d,e,f,g)),b.close(),c.win=c.iframe[0].contentWindow,c.doc=b;var i=Fa(b,a.editorOptions);c.afterChange(function(a){i.selection()}),yb&&Ib(b).click(function(a){("img"===Ib(a.target).name||"audio"===Ib(a.target).name||"video"===Ib(a.target).name)&&(i.selection(!0),i.range.selectNode(a.target),i.select())}),vb&&(c._mousedownHandler=function(){var a=i.range.cloneRange();a.shrink(),a.isControl()&&c.blur()},Ib(document).mousedown(c._mousedownHandler),Ib(b).keydown(function(a){if(8==a.which){i.selection();var b=i.range;b.isControl()&&(b.collapse(!0),Ib(b.startContainer.childNodes[b.startOffset]).remove(),a.preventDefault())}})),c.cmd=i,c.html(La(c.srcElement)),vb?(b.body.disabled=!0,b.body.contentEditable=!0,b.body.removeAttribute("disabled")):b.designMode="on",a.afterCreate&&a.afterCreate.call(c)}var c=this;Ma.parent.init.call(c,a),c.srcElement=Ib(a.srcElement),c.div.addClass("ke-edit"),c.designMode=o(a.designMode,!0),c.beforeGetHtml=a.beforeGetHtml,c.beforeSetHtml=a.beforeSetHtml,c.afterSetHtml=a.afterSetHtml;var d=o(a.themesPath,""),e=a.bodyClass,f=a.cssPath,g=a.cssData,h="res:"!=location.protocol&&location.host.replace(/:\d+/,"")!==document.domain,i="document.open();"+(h?'document.domain="'+document.domain+'";':"")+"document.close();",j=vb?' src="javascript:void(function(){'+encodeURIComponent(i)+'}())"':"";c.iframe=Ib('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+j+"></iframe>").css("width","100%"),c.textarea=Ib('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%"),c.tabIndex=isNaN(parseInt(a.tabIndex,10))?c.srcElement.attr("tabindex"):parseInt(a.tabIndex,10),c.iframe.attr("tabindex",c.tabIndex),c.textarea.attr("tabindex",c.tabIndex),c.width&&c.setWidth(c.width),c.height&&c.setHeight(c.height),c.designMode?c.textarea.hide():c.iframe.hide(),h&&c.iframe.bind("load",function(a){c.iframe.unbind("load"),vb?b():setTimeout(b,0)}),c.div.append(c.iframe),c.div.append(c.textarea),c.srcElement.hide(),!h&&b()},setWidth:function(a){var b=this;return a=g(a),b.width=a,b.div.css("width",a),b},setHeight:function(a){var b=this;return a=g(a),b.height=a,b.div.css("height",a),b.iframe.css("height",a),(vb&&8>Fb||Cb)&&(a=g(h(a)-2)),b.textarea.css("height",a),b},remove:function(){var a=this,b=a.doc;Ib(b.body).unbind(),Ib(b).unbind(),Ib(a.win).unbind(),a._mousedownHandler&&Ib(document).unbind("mousedown",a._mousedownHandler),La(a.srcElement,a.html()),a.srcElement.show(),a.iframe.unbind(),a.textarea.unbind(),Ma.parent.remove.call(a)},html:function(a,b){var c=this,d=c.doc;if(c.designMode){var e=d.body;return void 0===a?(a=b?"<!doctype html><html>"+e.parentNode.innerHTML+"</html>":e.innerHTML,c.beforeGetHtml&&(a=c.beforeGetHtml(a)),xb&&"<br />"==a&&(a=""),a):(c.beforeSetHtml&&(a=c.beforeSetHtml(a)),vb&&Fb>=9&&(a=a.replace(/(<.*?checked=")checked(".*>)/gi,"$1$2")),Ib(e).html(a),c.afterSetHtml&&c.afterSetHtml(),c)}return void 0===a?c.textarea.val():(c.textarea.val(a),c)},design:function(a){var b,c=this;if(void 0===a?!c.designMode:a){if(!c.designMode){b=c.html(),c.designMode=!0,c.textarea.hide(),c.html(b);var d=c.iframe,e=h(c.height);d.height(e-2),d.show(),setTimeout(function(){d.height(e)},0)}}else c.designMode&&(b=c.html(),c.designMode=!1,c.html(b),c.iframe.hide(),c.textarea.show());return c.focus()},focus:function(){var a=this;return a.designMode?a.win.focus():a.textarea[0].focus(),a},blur:function(){var a=this;if(vb){var b=Ib('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',a.div);a.div.append(b),b[0].focus(),b.remove()}else a.designMode?a.win.blur():a.textarea[0].blur();return a},afterChange:function(a){function b(b){setTimeout(function(){a(b)},1)}var c=this,d=c.doc,e=d.body;if(a)return Ib(d).keyup(function(b){b.ctrlKey||b.altKey||!Vb[b.which]||a(b)}),Ib(d).mouseup(a).contextmenu(a),Ib(c.win).blur(a),Ib(e).bind("paste",b),Ib(e).bind("cut",b),c}}),Ib.EditClass=Ma,Ib.edit=Na,Ib.iframeDoc=Ja,r(Pa,Ha,{init:function(a){function b(a){var b=Ib(a);return b.hasClass("ke-outline")?b:b.hasClass("ke-toolbar-icon")?b.parent():void 0}function c(a,c){var d=b(a.target);if(d){if(d.hasClass("ke-disabled"))return;if(d.hasClass("ke-selected"))return;d[c]("ke-on")}}var d=this;Pa.parent.init.call(d,a),d.disableMode=o(a.disableMode,!1),d.noDisableItemMap=m(o(a.noDisableItems,[])),d._itemMap={},d.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()}).attr("unselectable","on"),d.div.mouseover(function(a){c(a,"addClass")}).mouseout(function(a){c(a,"removeClass")}).click(function(a){var c=b(a.target);if(c){if(c.hasClass("ke-disabled"))return;d.options.click.call(this,a,c.attr("data-name"))}})},get:function(a){return this._itemMap[a]?this._itemMap[a]:this._itemMap[a]=Ib("span.ke-icon-"+a,this.div).parent()},select:function(a){return Oa.call(this,a,function(a){a.addClass("ke-selected")}),self},unselect:function(a){return Oa.call(this,a,function(a){a.removeClass("ke-selected").removeClass("ke-on")}),self},enable:function(a){var b=this,c=a.get?a:b.get(a);return c&&(c.removeClass("ke-disabled"),c.opacity(1)),b},disable:function(a){var b=this,c=a.get?a:b.get(a);return c&&(c.removeClass("ke-selected").addClass("ke-disabled"),c.opacity(.5)),b},disableAll:function(a,b){var c=this,d=c.noDisableItemMap;return b&&(d=m(b)),(void 0===a?!c.disableMode:a)?(Ib("span.ke-outline",c.div).each(function(){var a=Ib(this),b=a[0].getAttribute("data-name",2);d[b]||c.disable(a)}),c.disableMode=!0):(Ib("span.ke-outline",c.div).each(function(){var a=Ib(this),b=a[0].getAttribute("data-name",2);d[b]||c.enable(a)}),c.disableMode=!1),c}}),Ib.ToolbarClass=Pa,Ib.toolbar=Qa,r(Ra,Ha,{init:function(a){var b=this;a.z=a.z||811213,Ra.parent.init.call(b,a),b.centerLineMode=o(a.centerLineMode,!0),b.div.addClass("ke-menu").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on")},addItem:function(a){var b=this;if("-"===a.title)return void b.div.append(Ib('<div class="ke-menu-separator"></div>'));var c=Ib('<div class="ke-menu-item" unselectable="on"></div>'),d=Ib('<div class="ke-inline-block ke-menu-item-left"></div>'),e=Ib('<div class="ke-inline-block ke-menu-item-right"></div>'),f=g(a.height),h=o(a.iconClass,"");b.div.append(c),f&&(c.css("height",f),e.css("line-height",f));var i;return b.centerLineMode&&(i=Ib('<div class="ke-inline-block ke-menu-item-center"></div>'),f&&i.css("height",f)),c.mouseover(function(a){Ib(this).addClass("ke-menu-item-on"),i&&i.addClass("ke-menu-item-center-on")}).mouseout(function(a){Ib(this).removeClass("ke-menu-item-on"),i&&i.removeClass("ke-menu-item-center-on")}).click(function(b){a.click.call(Ib(this)),b.stopPropagation()}).append(d),i&&c.append(i),c.append(e),a.checked&&(h="ke-icon-checked icon-ke-font"),""!==h&&d.html('<span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-toolbar-icon-url '+h+'"></span>'),e.html(a.title),b},remove:function(){var a=this;return a.options.beforeRemove&&a.options.beforeRemove.call(a),Ib(".ke-menu-item",a.div[0]).unbind(),Ra.parent.remove.call(a),a}}),Ib.MenuClass=Ra,Ib.menu=Sa,r(Ta,Ha,{init:function(a){var b=this;a.z=a.z||811213,Ta.parent.init.call(b,a);var c=a.colors||[["#1abc9c","#2ecc71","#3498db","#9b59b6","#4e5f70","#f1c40f"],["#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f39c12"],["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];b.selectedColor=(a.selectedColor||"").toLowerCase(),b._cells=[],b.div.addClass("ke-colorpicker").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on");var d=b.doc.createElement("table");b.div.append(d),d.className="ke-colorpicker-table",d.cellPadding=0,d.cellSpacing=0,d.border=0;var e=d.insertRow(0),f=e.insertCell(0);f.colSpan=c[0].length,b._addAttr(f,"","ke-colorpicker-cell-top");for(var g=0;g<c.length;g++){e=d.insertRow(g+1);for(var h=0;h<c[g].length;h++)f=e.insertCell(h),b._addAttr(f,c[g][h],"ke-colorpicker-cell")}},_addAttr:function(a,b,c){var d=this;a=Ib(a).addClass(c),d.selectedColor===b.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected"),a.attr("title",b||d.options.noColor),a.mouseover(function(a){Ib(this).addClass("ke-colorpicker-cell-on")}),a.mouseout(function(a){Ib(this).removeClass("ke-colorpicker-cell-on")}),a.click(function(a){a.stop(),d.options.click.call(Ib(this),b)}),b?a.append(Ib('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",b)):a.html(d.options.noColor),Ib(a).attr("unselectable","on"),d._cells.push(a)},remove:function(){var a=this;return d(a._cells,function(){this.unbind()}),Ta.parent.remove.call(a),a}}),Ib.ColorPickerClass=Ta,Ib.colorpicker=Ua,r(Va,{init:function(a){var b=this,c=Ib(a.button),d=a.fieldName||"file",e=a.url||"",f=c.val(),g=a.extraParams||{},h=c[0].className||"",i=a.target||"kindeditor_upload_iframe_"+(new Date).getTime();a.afterError=a.afterError||function(a){alert(a)};var j=[];for(var k in g)j.push('<input type="hidden" name="'+k+'" value="'+g[k]+'" />');var l=['<div class="ke-inline-block '+h+'">',a.target?"":'<iframe name="'+i+'" style="display:none;"></iframe>',a.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+i+'" action="'+e+'">','<span class="ke-button-common">',j.join(""),'<input type="button" class="ke-button-common ke-button" value="'+f+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+d+'" tabindex="-1" />',a.form?"</div>":"</form>","</div>"].join(""),m=Ib(l,c.doc);c.hide(),c.before(m),b.div=m,b.button=c,b.fileBox=Ib(".ke-upload-file",m),b.form=a.form?Ib(a.form):Ib("form",m);var n=Ib.undef(a.fileSizeLimit,"1MB"),o=Ib.undef(a.fileTypeLimit,"*.jpg;*.gif;*.png");b.uploader=WebUploader.create({server:a.uploadUrl,resize:!1,fileVal:"file",accept:{title:"upload",extensions:o.replace(/\*\./g,"").replace(/;/g,","),mimeTypes:"image/*"},headers:a.uploadHeader,formData:a.uploadData,fileNumLimit:1,fileSingleSizeLimit:1*n.replace(/MB/g,"")*1024*1024}),b.uploader.on("uploadStart",function(a){}),b.uploader.on("uploadSuccess",function(a,c){b.options.afterUpload.call(b,c.data)}),b.uploader.on("error",function(c){var d="文件上传出现错误，请检查后重试！";"Q_TYPE_DENIED"===c?d="["+arguments[1].name+"]文件类型不正确！":"F_EXCEED_SIZE"===c?d="文件大小超出限制（最大"+1*a.fileSizeLimit.replace(/MB/g,"")+"M）！":"F_DUPLICATE"===c&&(d="["+arguments[1].name+"]文件已存在于待上传列表中！"),console.error("文件上传出现错误，请检查后重试！",arguments),b.options.afterUpload.call(b,{error:1,message:d}),b.uploader.reset(),b.form&&b.form[0]&&b.form[0].reset&&b.form[0].reset()}),b.fileBox.bind("change",function(){b.uploader.reset(),this.files&&b.uploader.addFiles(this.files)});var p=a.width||Ib(".ke-button-common",m).width();Ib(".ke-upload-area",m).width(p),b.options=a},submit:function(){var a=this,b=a.uploader.getFiles();return b.length<=0?(alert("请选择文件"),void a.uploader.reset()):(setTimeout(function(){a.uploader.upload()},100),a)},remove:function(){var a=this;return a.fileBox&&a.fileBox.unbind(),a.div.remove(),a.button.show(),a}}),Ib.UploadButtonClass=Va,Ib.uploadbutton=Wa,r(Ya,Ha,{init:function(a){var b=this,c=o(a.shadowMode,!0);a.z=a.z||811213,a.shadowMode=!1,a.autoScroll=o(a.autoScroll,!0),Ya.parent.init.call(b,a);var e=a.title,f=Ib(a.body,b.doc),g=a.previewBtn,i=a.yesBtn,j=a.noBtn,k=a.closeBtn,l=o(a.showMask,!0);b.div.addClass("ke-dialog").bind("click,mousedown",function(a){a.stopPropagation()});var m=Ib('<div class="ke-dialog-content"></div>').appendTo(b.div);vb&&7>Fb?b.iframeMask=Ib('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(b.div):c&&Ib('<div class="ke-dialog-shadow"></div>').appendTo(b.div);var n=Ib('<div class="ke-dialog-header"></div>');m.append(n),n.html(e),b.closeIcon=Ib('<span class="ke-dialog-icon-close" title="'+k.name+'"></span>').click(k.click),n.append(b.closeIcon),b.draggable({clickEl:n,beforeDrag:a.beforeDrag});var p=Ib('<div class="ke-dialog-body"></div>');m.append(p),p.append(f);var q=Ib('<div class="ke-dialog-footer"></div>');if((g||i||j)&&m.append(q),d([{btn:g,name:"preview"},{btn:i,name:"yes"},{btn:j,name:"no"}],function(){if(this.btn){var a=Xa(this.btn);a.addClass("ke-dialog-"+this.name),q.append(a)}}),b.height&&p.height(h(b.height)-n.height()-q.height()-2),b.div.width(b.div.width()),b.div.height(b.div.height()),b.mask=null,l){var r=ea(b.doc),s=Math.max(r.scrollWidth,r.clientWidth),t=Math.max(r.scrollHeight,r.clientHeight);b.mask=Ia({x:0,y:0,z:b.z-1,cls:"ke-dialog-mask",width:s,height:t})}b.autoPos(b.div.width(),b.div.height()),b.footerDiv=q,b.bodyDiv=p,b.headerDiv=n,b.isLoading=!1},setMaskIndex:function(a){var b=this;b.mask.div.css("z-index",a)},showLoading:function(a){a=o(a,"");var b=this,c=b.bodyDiv;return b.loading=Ib('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(c.height()/3)+'px;">'+a+"</div></div>").width(c.width()).height(c.height()).css("top",b.headerDiv.height()+"px"),c.css("visibility","hidden").after(b.loading),b.isLoading=!0,b},hideLoading:function(){return this.loading&&this.loading.remove(),this.bodyDiv.css("visibility","visible"),this.isLoading=!1,this},remove:function(){var a=this;return a.options.beforeRemove&&a.options.beforeRemove.call(a),a.mask&&a.mask.remove(),a.iframeMask&&a.iframeMask.remove(),a.closeIcon.unbind(),Ib("input",a.div).unbind(),Ib("button",a.div).unbind(),a.footerDiv.unbind(),a.bodyDiv.unbind(),a.headerDiv.unbind(),Ib("iframe",a.div).each(function(){Ib(this).remove()}),Ya.parent.remove.call(a),a}}),Ib.DialogClass=Ya,Ib.dialog=Za,Ib.tabs=$a,Ib.loadScript=_a,Ib.loadStyle=bb,Ib.ajax=cb;var jc={},kc={};pb.prototype={lang:function(a){return fb(a,this.langType)},loadPlugin:function(a,c){var d=this,e=this._pluginStatus;return e||(e=this._pluginStatus={}),jc[a]?b(jc[a])?(e[a]||(jc[a].call(d,KindEditor),e[a]="inited"),c&&c.call(d),d):(setTimeout(function(){d.loadPlugin(a,c)},100),d):(jc[a]="loading",_a(d.pluginsPath+a+"/"+a+".js?ver="+encodeURIComponent(Ib.DEBUG?Gb:tb),function(){setTimeout(function(){jc[a]&&d.loadPlugin(a,c)},0)}),d)},handler:function(a,c){var e=this;return e._handlers[a]||(e._handlers[a]=[]),b(c)?(e._handlers[a].push(c),e):(d(e._handlers[a],function(){c=this.call(e,c)}),c)},clickToolbar:function(a,b){var c=this,d="clickToolbar"+a;return void 0===b?c._handlers[d]?c.handler(d):(c.loadPlugin(a,function(){c.handler(d)}),c):c.handler(d,b)},updateState:function(){var a=this;return d("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough".split(","),function(b,c){a.cmd.state(c)?a.toolbar.select(c):a.toolbar.unselect(c)}),a},addContextmenu:function(a){return this._contextmenus.push(a),this},afterCreate:function(a){return this.handler("afterCreate",a)},beforeRemove:function(a){return this.handler("beforeRemove",a)},beforeGetHtml:function(a){return this.handler("beforeGetHtml",a)},beforeSetHtml:function(a){return this.handler("beforeSetHtml",a)},afterSetHtml:function(a){return this.handler("afterSetHtml",a)},create:function(){function a(){return 0===k.height()?void setTimeout(a,100):void b.resize(d,e,!1)}var b=this,c=b.fullscreenMode;if(b.isCreated)return b;if(b.srcElement.data("kindeditor"))return b;b.srcElement.data("kindeditor","true"),c?ea().style.overflow="hidden":ea().style.overflow="";var d=c?ea().clientWidth+"px":b.width,e=c?ea().clientHeight+"px":b.height;(vb&&8>Fb||Cb)&&(e=g(h(e)+2));var f=b.container=Ib(b.layout);c?Ib(document.body).append(f):b.srcElement.before(f);var i=Ib(".toolbar",f),j=Ib(".edit",f),k=b.statusbar=Ib(".statusbar",f);f.removeClass("container").addClass("ke-container ke-container-"+b.themeType).css("width",d),c?(f.css({position:"absolute",left:0,top:0,"z-index":811211}),xb||(b._scrollPos=fa()),window.scrollTo(0,0),Ib(document.body).css({height:"1px",overflow:"hidden"}),Ib(document.body.parentNode).css("overflow","hidden"),b._fullscreenExecuted=!0):(b._fullscreenExecuted&&(Ib(document.body).css({height:"",overflow:""}),Ib(document.body.parentNode).css("overflow","")),b._scrollPos&&window.scrollTo(b._scrollPos.x,b._scrollPos.y));var l=[];Ib.each(b.items,function(a,c){"|"==c?l.push('<span class="ke-inline-block ke-separator"></span>'):"/"==c?l.push('<div class="ke-hr"></div>'):(l.push('<span class="ke-outline" data-name="'+c+'" title="'+b.lang(c)+'" unselectable="on">'),l.push('<span class="ke-toolbar-icon icon-ke-font ke-toolbar-icon-url ke-icon-'+c+'" unselectable="on"></span></span>'))});var m=b.toolbar=Qa({src:i,html:l.join(""),noDisableItems:b.noDisableItems,click:function(a,c){if(a.stop(),b.menu){var d=b.menu.name;if(b.hideMenu(),d===c)return}b.clickToolbar(c)}}),n=h(e)-m.div.height(),o=b.edit=Na({height:n>0&&h(e)>b.minHeight?n:b.minHeight,src:j,srcElement:b.srcElement,designMode:b.designMode,themesPath:b.themesPath,bodyClass:b.bodyClass,cssPath:b.cssPath,cssData:b.cssData,editorOptions:b.options,beforeGetHtml:function(a){return a=b.beforeGetHtml(a),a=lb(mb(a)),K(a,b.filterMode?b.htmlTags:null,b.urlType,b.wellFormatMode,b.indentChar)},beforeSetHtml:function(a){return a=K(a,b.filterMode?b.htmlTags:null,"",!1),b.beforeSetHtml(a)},afterSetHtml:function(){b.edit=o=this,b.afterSetHtml()},afterCreate:function(){if(b.edit=o=this,b.cmd=o.cmd,b._docMousedownFn=function(a){b.menu&&b.hideMenu()},Ib(o.doc,document).mousedown(b._docMousedownFn),hb.call(b),ib.call(b),jb.call(b),kb.call(b),o.afterChange(function(a){o.designMode&&(b.updateState(),b.addBookmark(),b.options.afterChange&&b.options.afterChange.call(b))}),o.textarea.keyup(function(a){a.ctrlKey||a.altKey||!Tb[a.which]||b.options.afterChange&&b.options.afterChange.call(b)}),b.readonlyMode&&b.readonly(),b.isCreated=!0,""===b.initContent&&(b.initContent=b.html()),b._undoStack.length>0){var a=b._undoStack.pop();a.start&&(b.html(a.html),o.cmd.range.moveToBookmark(a),b.select())}b.afterCreate(),b.options.afterCreate&&b.options.afterCreate.call(b)}});return k.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"><i></i><i></i><i></i></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>'),b._fullscreenResizeHandler&&(Ib(window).unbind("resize",b._fullscreenResizeHandler),b._fullscreenResizeHandler=null),a(),c?(b._fullscreenResizeHandler=function(a){b.isCreated&&b.resize(ea().clientWidth,ea().clientHeight,!1)},Ib(window).bind("resize",b._fullscreenResizeHandler),m.select("fullscreen"),k.first().css("visibility","hidden"),k.last().css("visibility","hidden")):(xb&&Ib(window).bind("scroll",function(a){b._scrollPos=fa()}),b.resizeType>0?Ga({moveEl:f,clickEl:k,moveFn:function(a,c,d,e,f,g){e+=g,b.resize(null,e)}}):k.first().css("visibility","hidden"),2===b.resizeType?Ga({moveEl:f,clickEl:k.last(),moveFn:function(a,c,d,e,f,g){d+=f,e+=g,b.resize(d,e)}}):k.last().css("visibility","hidden")),setTimeout(function(){b.focus&&b.focus()},100),b},remove:function(){var a=this;return a.isCreated?(a.beforeRemove(),a.srcElement.data("kindeditor",""),a.menu&&a.hideMenu(),d(a.dialogs,function(){a.hideDialog()}),Ib(document).unbind("mousedown",a._docMousedownFn),a.toolbar.remove(),a.edit.remove(),a.statusbar.last().unbind(),a.statusbar.unbind(),a.container.remove(),a.container=a.toolbar=a.edit=a.menu=null,a.dialogs=[],a.isCreated=!1,a):a},resize:function(a,b,c){var d=this;if(c=o(c,!0),a&&(/%/.test(a)||(a=h(a),a=a<d.minWidth?d.minWidth:a),d.container.css("width",g(a)),c&&(d.width=g(a))),b){b=h(b);var e=h(b)-d.toolbar.div.height()-d.statusbar.height();e=e<d.minHeight?d.minHeight:e,d.edit.setHeight(e),c&&(d.height=g(b))}return d},select:function(){return this.isCreated&&this.cmd.select(),this},html:function(a){var b=this;return void 0===a?b.isCreated?b.edit.html():La(b.srcElement):(b.isCreated?b.edit.html(a):La(b.srcElement,a),b.isCreated&&b.cmd.selection(),b)},fullHtml:function(){return this.isCreated?this.edit.html(void 0,!0):""},text:function(a){var b=this;return void 0===a?e(b.html().replace(/<(?!img|embed).*?>/gi,"").replace(/&nbsp;/gi," ")):b.html(i(a))},isEmpty:function(){return""===e(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return e(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==e(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){var a=this.isCreated?this.cmd.range.html():"";return a=lb(mb(a))},count:function(a){var b=this;return a=(a||"html").toLowerCase(),"html"===a?b.html().length:"text"===a?b.text().replace(/<(?:img|embed).*?>/gi,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(a){a=a.toLowerCase();var b=this,d=b.cmd,e=c(a,"selectall,copy,paste,print".split(","))<0;
return e&&b.addBookmark(!1),d[a].apply(d,n(arguments,1)),e&&(b.updateState(),b.addBookmark(!1),b.options.afterChange&&b.options.afterChange.call(b)),b},insertHtml:function(a,b){return this.isCreated?(a=this.beforeSetHtml(a),this.exec("inserthtml",a,b),this):this},appendHtml:function(a){if(this.html(this.html()+a),this.isCreated){var b=this.cmd;b.range.selectNodeContents(b.doc.body).collapse(!1),b.select()}return this},sync:function(){return La(this.srcElement,this.html()),this},focus:function(){return this.isCreated?this.edit.focus():this.srcElement[0].focus(),this},blur:function(){return this.isCreated?this.edit.blur():this.srcElement[0].blur(),this},addBookmark:function(a){a=o(a,!0);var b,c=this,d=c.edit,e=d.doc.body,f=mb(e.innerHTML);if(a&&c._undoStack.length>0){var g=c._undoStack[c._undoStack.length-1];if(Math.abs(f.length-lb(g.html).length)<c.minChangeSize)return c}if(d.designMode&&!c._firstAddBookmark){var h=c.cmd.range;b=h.createBookmark(!0),b.html=mb(e.innerHTML),h.moveToBookmark(b)}else b={html:f};return c._firstAddBookmark=!1,nb(c._undoStack,b),c},undo:function(){return ob.call(this,this._undoStack,this._redoStack)},redo:function(){return ob.call(this,this._redoStack,this._undoStack)},fullscreen:function(a){return this.fullscreenMode=void 0===a?!this.fullscreenMode:a,this.addBookmark(!1),this.remove().create()},readonly:function(a){a=o(a,!0);var b=this,c=b.edit,e=c.doc;b.designMode?b.toolbar.disableAll(a,[]):d(b.noDisableItems,function(){b.toolbar[a?"disable":"enable"](this)}),vb?e.body.contentEditable=!a:e.designMode=a?"off":"on",c.textarea[0].disabled=a},createMenu:function(a){var b=this,c=a.name,d=b.toolbar.get(c),e=d.pos();return a.x=e.x,a.y=e.y+d.height(),a.z=b.options.zIndex,a.shadowMode=o(a.shadowMode,b.shadowMode),void 0!==a.selectedColor?(a.cls="ke-colorpicker-"+b.themeType,a.noColor=b.lang("noColor"),b.menu=Ua(a)):(a.cls="ke-menu-"+b.themeType,a.centerLineMode=!1,b.menu=Sa(a)),b.menu},hideMenu:function(){return this.menu.remove(),this.menu=null,this},hideContextmenu:function(){return this.contextmenu.remove(),this.contextmenu=null,this},createDialog:function(a){var b=this;a.name;if(a.z=b.options.zIndex,a.shadowMode=o(a.shadowMode,b.shadowMode),a.closeBtn=o(a.closeBtn,{name:b.lang("close"),click:function(a){b.hideDialog(),vb&&b.cmd&&b.cmd.select()}}),a.noBtn=o(a.noBtn,{name:b.lang(a.yesBtn?"no":"close"),click:function(a){b.hideDialog(),vb&&b.cmd&&b.cmd.select()}}),"page"!=b.dialogAlignType&&(a.alignEl=b.container),a.cls="ke-dialog-"+b.themeType,b.dialogs.length>0){var c=b.dialogs[0],d=b.dialogs[b.dialogs.length-1];c.setMaskIndex(d.z+2),a.z=d.z+3,a.showMask=!1}var e=Za(a);return b.dialogs.push(e),e},hideDialog:function(){var a=this;if(a.dialogs.length>0&&a.dialogs.pop().remove(),a.dialogs.length>0){var b=a.dialogs[0],c=a.dialogs[a.dialogs.length-1];b.setMaskIndex(c.z-1)}return a},errorDialog:function(a){var b=this,c=b.createDialog({width:750,title:b.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),d=Ib("iframe",c.div),e=Ib.iframeDoc(d);return e.open(),e.write(a),e.close(),Ib(e.body).css("background-color","#FFF"),d[0].contentWindow.focus(),b}};var lc=[];return Ib.remove=function(a){sb(a,function(a){this.remove(),lc.splice(a,1)})},Ib.sync=function(a){sb(a,function(){this.sync()})},Ib.html=function(a,b){sb(a,function(){this.html(b)})},Ib.insertHtml=function(a,b){sb(a,function(){this.insertHtml(b)})},Ib.appendHtml=function(a,b){sb(a,function(){this.appendHtml(b)})},vb&&7>Fb&&pa(document,"BackgroundImageCache",!0),Ib.EditorClass=pb,Ib.editor=qb,Ib.create=rb,Ib.instances=lc,Ib.plugin=db,Ib.lang=fb,db("core",function(a){var b=this,e={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};if(b.afterSetHtml(function(){b.options.afterChange&&b.options.afterChange.call(b)}),b.afterCreate(function(){if("form"==b.syncType){for(var c=a(b.srcElement),d=!1;c=c.parent();)if("form"==c.name){d=!0;break}if(d){c.bind("submit",function(c){b.sync(),a(window).bind("unload",function(){b.edit.textarea.remove()})});var e=a('[type="reset"]',c);e.click(function(){b.html(b.initContent),b.cmd.selection()}),b.beforeRemove(function(){c.unbind(),e.unbind()})}}}),b.clickToolbar("source",function(){b.edit.designMode?(b.toolbar.disableAll(!0),b.edit.design(!1),b.toolbar.select("source")):(b.toolbar.disableAll(!1),b.edit.design(!0),b.toolbar.unselect("source"),xb?setTimeout(function(){b.cmd.selection()},0):b.cmd.selection()),b.designMode=b.edit.designMode}),b.afterCreate(function(){b.designMode||b.toolbar.disableAll(!0).select("source")}),b.clickToolbar("fullscreen",function(){b.fullscreen()}),b.fullscreenShortcut){var f=!1;b.afterCreate(function(){if(a(b.edit.doc,b.edit.textarea).keyup(function(a){27==a.which&&setTimeout(function(){b.fullscreen()},0)}),f){if(vb&&!b.designMode)return;b.focus()}f||(f=!0)})}d("undo,redo".split(","),function(a,c){e[c]&&b.afterCreate(function(){D(this.edit.doc,e[c],function(){b.clickToolbar(c)})}),b.clickToolbar(c,function(){b[c]()})}),b.clickToolbar("formatblock",function(){var a=b.lang("formatblock.formatBlock"),c={h1:28,h2:24,h3:18,H4:14,p:12},e=b.cmd.val("formatblock"),f=b.createMenu({name:"formatblock",width:"en"==b.langType?200:150});d(a,function(a,d){var g="font-size:"+c[a]+"px;";"h"===a.charAt(0)&&(g+="font-weight:bold;"),f.addItem({title:'<span style="'+g+'" unselectable="on">'+d+"</span>",height:c[a]+12,checked:e===a||e===d,click:function(){b.select().exec("formatblock","<"+a+">").hideMenu()}})})}),b.clickToolbar("fontname",function(){var a=b.cmd.val("fontname"),c=b.createMenu({name:"fontname",width:150});d(b.lang("fontname.fontName"),function(d,e){c.addItem({title:'<span style="font-family: '+d+';" unselectable="on">'+e+"</span>",height:30,checked:a===d.toLowerCase()||a===e.toLowerCase(),click:function(){b.exec("fontname",d).hideMenu()}})})}),b.clickToolbar("fontsize",function(){var a=b.cmd.val("fontsize"),c=b.createMenu({name:"fontsize",width:150});d(b.fontSizeTable,function(d,e){c.addItem({title:'<span style="font-size:'+e+';" unselectable="on">'+e+"</span>",height:h(e)+12,checked:a===e,click:function(){b.exec("fontsize",e).hideMenu()}})})}),d("forecolor,hilitecolor".split(","),function(a,c){b.clickToolbar(c,function(){b.createMenu({name:c,selectedColor:b.cmd.val(c)||"default",colors:b.colorTable,click:function(a){b.exec(c,a).hideMenu()}})})}),d("cut,copy,paste".split(","),function(a,c){b.clickToolbar(c,function(){b.focus();try{b.exec(c,null)}catch(a){alert(b.lang(c+"Error"))}})}),b.clickToolbar("about",function(){var a='<div style="margin:20px;"><div>KindEditor '+tb+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';b.createDialog({name:"about",width:350,title:b.lang("about"),body:a})}),b.plugin.getSelectedLink=function(){return b.cmd.commonAncestor("a")},b.plugin.getSelectedImage=function(){return gb(b.edit.cmd.range,function(a){return!/^ke-\w+$/i.test(a[0].className)})},b.plugin.getSelectedFlash=function(){return gb(b.edit.cmd.range,function(a){return"ke-flash"==a[0].className})},b.plugin.getSelectedMedia=function(){return gb(b.edit.cmd.range,function(a){return"ke-media"==a[0].className||"ke-rm"==a[0].className})},b.plugin.getSelectedAnchor=function(){return gb(b.edit.cmd.range,function(a){return"ke-anchor"==a[0].className})},d("link,image,flash,media,anchor".split(","),function(a,c){var e=c.charAt(0).toUpperCase()+c.substr(1);d("edit,delete".split(","),function(a,d){b.addContextmenu({title:b.lang(d+e),click:function(){b.loadPlugin(c,function(){b.plugin[c][d](),b.hideMenu()})},cond:b.plugin["getSelected"+e],width:150,iconClass:"edit"==d?"ke-icon-"+c:void 0})}),b.addContextmenu({title:"-"})}),b.plugin.getSelectedTable=function(){return b.cmd.commonAncestor("table")},b.plugin.getSelectedRow=function(){return b.cmd.commonAncestor("tr")},b.plugin.getSelectedCell=function(){return b.cmd.commonAncestor("td")},d("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete".split(","),function(a,d){var e=c(d,["prop","delete"])<0?b.plugin.getSelectedCell:b.plugin.getSelectedTable;b.addContextmenu({title:b.lang("table"+d),click:function(){b.loadPlugin("table",function(){b.plugin.table[d](),b.hideMenu()})},cond:e,width:170,iconClass:"ke-icon-table"+d})}),b.addContextmenu({title:"-"}),d("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),function(a,c){e[c]&&b.afterCreate(function(){D(this.edit.doc,e[c],function(){b.cmd.selection(),b.clickToolbar(c)})}),b.clickToolbar(c,function(){b.focus().exec(c,null)})}),b.afterCreate(function(){function c(){d.range.moveToBookmark(e),d.select(),yb&&(a("div."+h,f).each(function(){a(this).after("<br />").remove(!0)}),a("span.Apple-style-span",f).remove(!0),a("span.Apple-tab-span",f).remove(!0),a("span[style]",f).each(function(){"nowrap"==a(this).css("white-space")&&a(this).remove(!0)}),a("meta",f).remove());var c=f[0].innerHTML;f.remove(),""!==c&&(yb&&(c=c.replace(/(<br>)\1/gi,"$1")),2===b.pasteType&&(c=c.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,""),/schemas-microsoft-com|worddocument|mso-\w+/i.test(c)?c=L(c,b.filterMode?b.htmlTags:a.options.htmlTags):(c=K(c,b.filterMode?b.htmlTags:null),c=b.beforeSetHtml(c))),1===b.pasteType&&(c=c.replace(/&nbsp;/gi," "),c=c.replace(/\n\s*\n/g,"\n"),c=c.replace(/<br[^>]*>/gi,"\n"),c=c.replace(/<\/p><p[^>]*>/gi,"\n"),c=c.replace(/<[^>]+>/g,""),c=c.replace(/ {2}/g," &nbsp;"),"p"==b.newlineTag?/\n/.test(c)&&(c=c.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")):c=c.replace(/\n/g,"<br />$&")),b.insertHtml(c,!0))}var d,e,f,g=b.edit.doc,h="__kindeditor_paste__",i=!1;a(g.body).bind("paste",function(j){if(0===b.pasteType)return void j.stop();if(!i){if(i=!0,a("div."+h,g).remove(),d=b.cmd.selection(),e=d.range.createBookmark(),f=a('<div class="'+h+'"></div>',g).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:a(e.start).pos().y+"px","white-space":"nowrap"}),a(g.body).append(f),vb){var k=d.range.get(!0);k.moveToElementText(f[0]),k.select(),k.execCommand("paste"),j.preventDefault()}else d.range.selectNodeContents(f[0]),d.select(),f[0].tabIndex=-1,f[0].focus();setTimeout(function(){c(),i=!1},0)}})}),b.beforeGetHtml(function(a){return vb&&8>=Fb&&(a=a.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b){return unescape(b)}),a=a.replace(/(<input)((?:\s+[^>]*)?>)/gi,function(a,b,c){return/\s+type="[^"]+"/i.test(a)?a:b+' type="text"'+c})),a.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/gi,function(a,b,c,d){return b+j(c).replace(/\s+/g," ")+d}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/gi,function(a){var b=G(a),c=F(b.style||""),d=O(b["data-ke-tag"]),e=o(c.width,""),f=o(c.height,"");return/px/i.test(e)&&(e=h(e)),/px/i.test(f)&&(f=h(f)),d.width=o(b.width,e),d.height=o(b.height,f),P(d)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/gi,function(a){var b=G(a);return'<a name="'+unescape(b["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b,c){return"<script"+unescape(b)+">"+unescape(c)+"</script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b,c){return"<noscript"+unescape(b)+">"+unescape(c)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/gi,function(a,b,c,d){return a=a.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(a,b,d){return b+j(c)+d}),a=a.replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/gi,function(a,b,c){return b+c})}),b.beforeSetHtml(function(a){return vb&&8>=Fb&&(a=a.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/gi,function(a){var b=G(a),c=F(b.style||"");return"none"==c.display?'<div class="ke-display-none" data-ke-input-tag="'+escape(a)+'"></div>':a})),a.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/gi,function(a){var c=G(a);return c.src=o(c.src,""),c.width=o(c.width,0),c.height=o(c.height,0),Q(b.themesPath+"common/blank.gif",c)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/gi,function(a){var b=G(a);return void 0!==b.href?a:'<img class="ke-anchor" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjY3NDAwOTEzOTg0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9Ijg3NDQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjxwYXRoIGQ9Ik03NTYuMTM1IDUxMmE4IDggMCAwIDEtNi4zNjctMTIuODQzbDkxLjg2NC0xMjAuNzg1YTggOCAwIDAgMSAxMi43MzYgMGw5MS44NjQgMTIwLjc4NUE4IDggMCAwIDEgOTM5Ljg2NSA1MTJIODg4YzAgMjA3LjY2LTE2OC4zNCAzNzYtMzc2IDM3Ni0yMDUuNTgyIDAtMzcyLjYzLTE2NC45OS0zNzUuOTUtMzY5Ljc4MkwxMzYgNTEySDgyLjEzNWE4IDggMCAwIDEtNi4zNjctMTIuODQzbDkxLjg2NC0xMjAuNzg1YTggOCAwIDAgMSAxMi43MzYgMGw5MS44NjQgMTIwLjc4NUE4IDggMCAwIDEgMjY1Ljg2NSA1MTJIMjEyYzAgMTUzLjUwMSAxMTUuMjg3IDI4MC4wNzYgMjYzLjk5OCAyOTcuODYybDAuMDAxLTM5MC4zOTlDNDEzLjg5MSA0MDMuNDc3IDM2OCAzNDcuMDk4IDM2OCAyODBjMC03OS41MjkgNjQuNDcxLTE0NCAxNDQtMTQ0czE0NCA2NC40NzEgMTQ0IDE0NGMwIDY3LjA5OC00NS44OSAxMjMuNDc3LTEwNy45OTggMTM5LjQ2M2wwLjAwMSAzOTAuMzk5QzY5NS4xMSA3OTIuMjY3IDgwOS41MDcgNjY4LjIyIDgxMS45NiA1MTYuOTZMODEyIDUxMmgtNTUuODY1ek01MTIgMjEyYy0zNy41NTUgMC02OCAzMC40NDUtNjggNjhzMzAuNDQ1IDY4IDY4IDY4IDY4LTMwLjQ0NSA2OC02OC0zMC40NDUtNjgtNjgtNjh6IiBwLWlkPSI4NzQ1IiBmaWxsPSIjZDgxZTA2Ij48L3BhdGg+PC9zdmc+" data-ke-name="'+escape(b.name)+'" style="vertical-align:text-bottom" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/gi,function(a,b,c){return'<div class="ke-script" data-ke-script-attr="'+escape(b)+'">'+escape(c)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/gi,function(a,b,c){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(b)+'">'+escape(c)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/gi,function(a,b,c,d,e){return a.match(/\sdata-ke-src="[^"]*"/i)?a:a=b+c+'="'+d+'" data-ke-src="'+i(d)+'"'+e}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/gi,function(a,b,c){return b+"data-ke-"+c}).replace(/<table[^>]*\s+border="0"[^>]*>/gi,function(a){return a.indexOf("ke-zeroborder")>=0?a:H(a,"ke-zeroborder")})})}),function(a){return a.KindEditor?a.KindEditor:void 0}(window),KindEditor.lang({source:"Source",preview:"Preview",undo:"Undo(Ctrl+Z)",redo:"Redo(Ctrl+Y)",cut:"Cut(Ctrl+X)",copy:"Copy(Ctrl+C)",paste:"Paste(Ctrl+V)",plainpaste:"Paste as plain text",wordpaste:"Paste from Word",selectall:"Select all",justifyleft:"Align left",justifycenter:"Align center",justifyright:"Align right",justifyfull:"Align full",insertorderedlist:"Ordered list",insertunorderedlist:"Unordered list",indent:"Increase indent",outdent:"Decrease indent",subscript:"Subscript",superscript:"Superscript",formatblock:"Paragraph format",fontname:"Font family",fontsize:"Font size",forecolor:"Text color",hilitecolor:"Highlight color",bold:"Bold(Ctrl+B)",italic:"Italic(Ctrl+I)",underline:"Underline(Ctrl+U)",strikethrough:"Strikethrough",removeformat:"Remove format",image:"Image",multiimage:"Multi image",flash:"Flash",media:"Embeded media",table:"Table",tablecell:"Cell",hr:"Insert horizontal line",emoticons:"Insert emoticon",link:"Link",unlink:"Unlink",fullscreen:"Toggle fullscreen mode",about:"About",print:"Print",filemanager:"File Manager",code:"Insert code",map:"Google Maps",baidumap:"Baidu Maps",lineheight:"Line height",clearhtml:"Clear HTML code",pagebreak:"Insert Page Break",quickformat:"Quick Format",insertfile:"Insert file",template:"Insert Template",anchor:"Anchor",yes:"OK",no:"Cancel",close:"Close",editImage:"Image properties",deleteImage:"Delete image",editFlash:"Flash properties",deleteFlash:"Delete flash",editMedia:"Media properties",deleteMedia:"Delete media",editLink:"Link properties",deleteLink:"Unlink",editAnchor:"Anchor properties",deleteAnchor:"Delete Anchor",tableprop:"Table properties",tablecellprop:"Cell properties",tableinsert:"Insert table",tabledelete:"Delete table",tablecolinsertleft:"Insert column left",tablecolinsertright:"Insert column right",tablerowinsertabove:"Insert row above",tablerowinsertbelow:"Insert row below",tablerowmerge:"Merge down",tablecolmerge:"Merge right",tablerowsplit:"Split row",tablecolsplit:"Split column",tablecoldelete:"Delete column",tablerowdelete:"Delete row",noColor:"Default",pleaseSelectFile:"Please select file.",invalidImg:"Please type valid URL.\nAllowed file extension: jpg,gif,bmp,png",invalidMedia:"Please type valid URL.\nAllowed file extension: swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb",invalidWidth:"The width must be number.",invalidHeight:"The height must be number.",invalidBorder:"The border must be number.",invalidUrl:"Please type valid URL.",invalidRows:"Invalid rows.",invalidCols:"Invalid columns.",invalidPadding:"The padding must be number.",invalidSpacing:"The spacing must be number.",invalidJson:"Invalid JSON string.",uploadSuccess:"Upload success.",cutError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+X) instead.",copyError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+C) instead.",pasteError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+V) instead.",ajaxLoading:"Loading ...",uploadLoading:"Uploading ...",uploadError:"Upload Error","plainpaste.comment":"Use keyboard shortcut(Ctrl+V) to paste the text into the window.","wordpaste.comment":"Use keyboard shortcut(Ctrl+V) to paste the text into the window.","code.pleaseInput":"Please input code.","link.url":"URL","link.linkType":"Target","link.newWindow":"New window","link.selfWindow":"Same window","flash.url":"URL","flash.width":"Width","flash.height":"Height","flash.upload":"Upload","flash.viewServer":"Browse","media.url":"URL","media.width":"Width","media.height":"Height","media.autostart":"Auto start","media.upload":"Upload","media.viewServer":"Browse","image.remoteImage":"Insert URL","image.localImage":"Upload","image.remoteUrl":"URL","image.localUrl":"File","image.size":"Size","image.width":"Width","image.height":"Height","image.resetSize":"Reset dimensions","image.align":"Align","image.defaultAlign":"Default","image.leftAlign":"Left","image.rightAlign":"Right","image.imgTitle":"Title","image.upload":"Browse","image.viewServer":"Browse","multiimage.uploadDesc":"Allows users to upload <%=uploadLimit%> images, single image size not exceeding <%=sizeLimit%>","multiimage.startUpload":"Start upload","multiimage.clearAll":"Clear all","multiimage.insertAll":"Insert all","multiimage.queueLimitExceeded":"Queue limit exceeded.","multiimage.fileExceedsSizeLimit":"File exceeds size limit.","multiimage.zeroByteFile":"Zero byte file.","multiimage.invalidFiletype":"Invalid file type.","multiimage.unknownError":"Unknown upload error.","multiimage.pending":"Pending ...","multiimage.uploadError":"Upload error","filemanager.emptyFolder":"Blank","filemanager.moveup":"Parent folder","filemanager.viewType":"Display: ","filemanager.viewImage":"Thumbnails","filemanager.listImage":"List","filemanager.orderType":"Sorting: ","filemanager.fileName":"By name","filemanager.fileSize":"By size","filemanager.fileType":"By type","insertfile.url":"URL","insertfile.title":"Title","insertfile.upload":"Upload","insertfile.viewServer":"Browse","table.cells":"Cells","table.rows":"Rows","table.cols":"Columns","table.size":"Dimensions","table.width":"Width","table.height":"Height","table.percent":"%","table.px":"px","table.space":"Space","table.padding":"Padding","table.spacing":"Spacing","table.align":"Align","table.textAlign":"Horizontal","table.verticalAlign":"Vertical","table.alignDefault":"Default","table.alignLeft":"Left","table.alignCenter":"Center","table.alignRight":"Right","table.alignTop":"Top","table.alignMiddle":"Middle","table.alignBottom":"Bottom","table.alignBaseline":"Baseline","table.border":"Border","table.borderWidth":"Width","table.borderColor":"Color","table.backgroundColor":"Background","map.address":"Address: ","map.search":"Search","baidumap.address":"Address: ","baidumap.search":"Search","baidumap.insertDynamicMap":"Dynamic Map","anchor.name":"Anchor name","formatblock.formatBlock":{h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",p:"Normal"},"fontname.fontName":{Arial:"Arial","Arial Black":"Arial Black","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Times New Roman":"Times New Roman","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"Line height 1"},{1.5:"Line height 1.5"},{2:"Line height 2"},{2.5:"Line height 2.5"},{3:"Line height 3"}],"template.selectTemplate":"Template","template.replaceContent":"Replace current content","template.fileList":{"1.html":"Image and Text","2.html":"Table","3.html":"List"}},"en"),KindEditor.each(KindEditor.options.items,function(a,b){"baidumap"==b&&(KindEditor.options.items[a]="map")}),KindEditor.options.langType="en",KindEditor.plugin("anchor",function(a){var b=this,c="anchor",d=b.lang(c+".");b.plugin.anchor={edit:function(){var e=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keName">'+d.name+"</label>",'<input class="ke-input-text" type="text" id="keName" name="name" value="" style="width:260px;" />',"</div>","</div>"].join(""),f=b.createDialog({name:c,width:360,title:b.lang(c),body:e,yesBtn:{name:b.lang("yes"),click:function(a){b.insertHtml('<a name="'+h.val()+'">').hideDialog().focus()}}}),g=f.div,h=a('input[name="name"]',g),i=b.plugin.getSelectedAnchor();i&&h.val(unescape(i.attr("data-ke-name"))),h[0].focus(),h[0].select()},"delete":function(){b.plugin.getSelectedAnchor().remove()}},b.clickToolbar(c,b.plugin.anchor.edit)}),KindEditor.plugin("autoheight",function(a){function b(){var a=e.edit,b=a.doc.body;a.iframe[0].scroll="no",b.style.overflowY="hidden"}function c(){if(!e.fullscreenMode){var b=e.edit,c=b.doc.body;b.iframe.height(f);var d=e.toolbar,g=a(d.div).height(),h=Math.max(a.IE?c.scrollHeight:c.offsetHeight,f,a(c).height())+g+30;e.resize(null,h),c.scrollTo({top:0})}}function d(){f=a.removeUnit(e.height),e.edit.afterChange(c),e.fullscreenMode||b(),c()}var e=this;if(e.autoHeightMode){var f;e.isCreated?d():e.afterCreate(d)}}),KindEditor.plugin("baidumap",function(a){var b=this,c="baidumap",d=b.lang(c+"."),e=a.undef(b.baiduMapAk,"9yfaQtWDimlbXuo4TMLmIk7yDjl36eCy"),f=a.undef(b.mapWidth,558),g=a.undef(b.mapHeight,360);b.clickToolbar(c,function(){function h(){i=q[0].contentWindow,j=a.iframeDoc(q),j.open(),j.write(p),j.close()}var i,j,k=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">',d.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:450px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+d.search+'" />',"</span>","</div>",'<div class="ke-map" style="width:'+f+"px;height:"+g+'px;"></div>',"</div>"].join(""),l=b.createDialog({name:c,width:f+42,title:b.lang(c),body:k,yesBtn:{name:b.lang("yes"),click:function(a){var c=i.map,d=c.getCenter(),h=d.lng+","+d.lat,j=c.getZoom(),k=["http://api.map.baidu.com/staticimage/v2?ak="+e,"&center="+encodeURIComponent(h),"&zoom="+encodeURIComponent(j),"&width="+2*f,"&height="+2*g,"&markers="+encodeURIComponent(h),"&markerStyles="+encodeURIComponent("l,A")].join("");b.exec("insertimage",k,"title",f+"",g+"",0),b.hideDialog().focus()}},beforeRemove:function(){o.remove(),j&&j.write(""),q.remove()}}),m=l.div,n=a('[name="address"]',m),o=a('[name="searchBtn"]',m),p=["<!doctype html><html><head>",'<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />',"<style>","	html { height: 100% }","	body { height: 100%; margin: 0; padding: 0; background-color: #FFF }","	#map_canvas { height: 100% }","</style>",'<script charset="utf-8" src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak='+e+'"></script>',"<script>","var map, geocoder;","function initialize() {",'	map = new BMapGL.Map("map_canvas");',"	var point = new BMapGL.Point(121.473704, 31.230393);","	map.centerAndZoom(point, 11);","	map.addControl(new BMapGL.NavigationControl());","	map.enableScrollWheelZoom();","	var gc = new BMapGL.Geocoder();","	gc.getLocation(point, function(rs){","		var addComp = rs.addressComponents;",'		var address = [addComp.city].join("");','		parent.document.getElementById("kindeditor_plugin_map_address").value = address;',"	});","}","function search(address) {","	if (!map) return;","	var local = new BMapGL.LocalSearch(map, {","		renderOptions: {","			map: map,","			autoViewport: true,","			selectFirstResult: false","		}","	});","	local.search(address);","}","</script>","</head>",'<body onload="initialize();">','<div id="map_canvas" style="width:100%; height:100%"></div>',"</body></html>"].join("\n"),q=a('<iframe class="ke-textarea" frameborder="0" style="width:558px;height:360px;"></iframe>');q.bind("load",function(){q.unbind("load"),a.IE?h():setTimeout(h,0)}),a(".ke-map",m).replaceWith(q),o.click(function(){i.search(n.val())})})}),KindEditor.plugin("clearhtml",function(a){var b=this,c="clearhtml";b.clickToolbar(c,function(){b.focus();var c=b.html();c=c.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/gi,""),c=c.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/gi,""),c=a.formatHtml(c,{a:["href","target"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title",".width",".height"],table:["border"],"td,th":["rowspan","colspan"],"div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":[]}),b.html(c),b.cmd.selection(!0),b.addBookmark()})}),KindEditor.plugin("code",function(a){var b=this,c="code";b.clickToolbar(c,function(){var d=b.lang(c+"."),e=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">','<select class="ke-code-type">','<option value="js">JavaScript</option>','<option value="html">HTML</option>','<option value="css">CSS</option>','<option value="php">PHP</option>','<option value="pl">Perl</option>','<option value="py">Python</option>','<option value="rb">Ruby</option>','<option value="java">Java</option>','<option value="vb">ASP/VB</option>','<option value="cpp">C/C++</option>','<option value="cs">C#</option>','<option value="xml">XML</option>','<option value="bsh">Shell</option>','<option value="">Other</option>',"</select>","</div>",'<textarea class="ke-textarea" style="width:518px;height:260px;"></textarea>',"</div>"].join(""),f=b.createDialog({name:c,width:560,title:b.lang(c),body:e,yesBtn:{name:b.lang("yes"),click:function(c){var e=a(".ke-code-type",f.div).val(),h=g.val().replace(/^\s+/g,"").replace(/\s+$/g,"\n").replace(/(\s*<!--)/g,"\n$1").replace(/>(\s*)(?=<!--\s*\/)/g,"> "),i=""===e?"":" lang-"+e,j='<pre class="'+i+'">\n'+a.escape(h)+"\n</pre> ";return""===a.trim(h)?(alert(d.pleaseInput),void g[0].focus()):void b.insertHtml(j).hideDialog().focus()}}}),g=a("textarea",f.div);g[0].focus()})}),KindEditor.plugin("emoticons",function(a){var b=this,c="emoticons",d={faces:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓"],hands:["🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🦵","🦶","🖕","✍️","🙏","👐🏻","🙌🏻","👏🏻","🙏🏻","👍🏻","👎🏻","👊🏻","✊🏻","🤛🏻","🤜🏻","🤞🏻","✌🏻","🤟🏻","🤘🏻","👌🏻","👈🏻","👉🏻","👆🏻","👇🏻","☝🏻","✋🏻","🤚🏻","🖐🏻","🖖🏻","👋🏻","🤙🏻","💪🏻","🖕🏻","✍🏻","🤲🏾","👐🏾","🙌🏾","👏🏾","🙏🏾","👍🏾","👎🏾","👊🏾","✊🏾","🤛🏾","🤜🏾","🤞🏾","✌🏾","🤟🏾","🤘🏾","👌🏾","👈🏾","👉🏾","👆🏾","👇🏾","☝🏾","✋🏾","🤚🏾","🖐🏾","🖖🏾","👋🏾","🤙🏾","💪🏾","🖕🏾","✍🏾"],avatar:["👶🏻","👦🏻","👧🏻","👨🏻","👩🏻","👱🏻‍♀️","👱🏻","👴🏻","👵🏻","👲🏻","👳🏻‍♀️","👳🏻","👮🏻‍♀️","👮🏻","👷🏻‍♀️","👷🏻","💂🏻‍♀️","💂🏻","🕵🏻‍♀️","🕵🏻","👩🏻‍⚕️","👨🏻‍⚕️","👩🏻‍🌾","👨🏻‍🌾","👩🏻‍🍳","👨🏻‍🍳","👩🏻‍🎓","👨🏻‍🎓","👩🏻‍🎤","👨🏻‍🎤","👩🏻‍🏫","👨🏻‍🏫","👩🏻‍🏭","👨🏻‍🏭","👩🏻‍💻","👨🏻‍💻","👩🏻‍💼","👨🏻‍💼","👩🏻‍🔧","👨🏻‍🔧","👩🏻‍🔬","👨🏻‍🔬","👩🏻‍🎨","👨🏻‍🎨","👩🏻‍🚒","👨🏻‍🚒","👩🏻‍✈️","👨🏻‍✈️","👩🏻‍🚀","👨🏻‍🚀","👩🏻‍⚖️","👨🏻‍⚖️","🤶🏻","🎅🏻","👸🏻","🤴🏻","👰🏻","🤵🏻","👼🏻","🤰🏻","🙇🏻‍♀️","🙇🏻","💁🏻","💁🏻‍♂️","🙅🏻","🙅🏻‍♂️","🙆🏻","🙆🏻‍♂️","🙋🏻","🙋🏻‍♂️","🤦🏻‍♀️","🤦🏻‍♂️","🤷🏻‍♀️","🤷🏻‍♂️","🙎🏻","🙎🏻‍♂️","🙍🏻","🙍🏻‍♂️","💇🏻","💇🏻‍♂️","💆🏻","💆🏻‍♂️","🕴🏻","💃🏻","🕺🏻","🚶🏻‍♀️","🚶🏻","🏃🏻‍♀️","🏃🏻"],foods:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥭","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🥬","🌶","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🥯","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🍤","🍙","🍚","🍘","🍥","🥮","🥠","🍢","🍡","🍧","🍨","🍦","🥧","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🧂","🍩","🍪","🌰","🥜","🍯","🥛","🍼","☕️","🍵","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽","🥣","🥡","🥢"],animals:["🐶","🐱","🐭","🐹","🐰","🦊","🦝","🐻","🐼","🦘","🦡","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦢","🦅","🦉","🦚","🦜","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🦗","🕷","🕸","🦂","🦟","🦠","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🐘","🦏","🦛","🐪","🐫","🦙","🦒","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🐐","🦌","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🦔","🐾","🐉","🐲"],nature:["🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","💫","⭐️","🌟","✨","⚡️","☄️","💥","🔥","🌪","🌈","☀️","🌤","⛅️","🌥","☁️","🌦","🌧","⛈","🌩","🌨","❄️","☃️","⛄️","🌬","💨","💧","💦","☔️","☂️"],tags:["❤️","🧡","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃"]},e={cols:10,total:Object.keys(d),current:"faces",tags:{faces:"表情",hands:"手势",avatar:"头像",foods:"食物",animals:"动物",nature:"自然",tags:"符号"}};b.emojiConfig&&b.emojiConfig instanceof Function&&b.emojiConfig.call(null,d,e),b.clickToolbar(c,function(){function f(c,d){c.mouseover(function(){a(this).addClass("ke-on")}),c.mouseout(function(){a(this).removeClass("ke-on")}),c.click(function(a){b.insertHtml(d).hideMenu().focus(),a.stop()})}function g(b,c){var g=document.createElement("table");c.append(g),g.className="ke-table";for(var h,i=Math.ceil(d[b].length/e.cols),j=0;i>j;j++)for(var l=g.insertRow(j),m=0;m<e.cols;m++){var n=a(l.insertCell(m));if(n.addClass("ke-cell"),h=d[b][e.cols*j+m],void 0!==h){f(n,h);var o=a('<span class="ke-emoji">'+h+"</span>");n.append(o),k.push(n)}}return g}function h(){a.each(k,function(){this.unbind()})}function i(a,b){a.click(function(a){h(),r.parentNode.removeChild(r),q.remove(),
r=g(b,l),j(b),e.current=b,a.stop()})}function j(b){q=a('<div class="ke-page"></div>'),l.append(q);for(var c in e.tags){var d=e.tags[c];if(c!==b){var f=a('<span class="ke-page-item"><a href="javascript:;">['+d+"]</a></span>");i(f,c),q.append(f),k.push(f)}else q.append(a('<span class="ke-page-item">['+d+"]</span>"))}}var k=[],l=a('<div class="ke-plugin-emoji"></div>'),m=b.createMenu({name:c,beforeRemove:function(){h()}}),n=a(".ke-toolbar .ke-icon-emoticons").pos().x,o=a(".ke-toolbar .ke-icon-emoticons").width(),p=a(document.body).width();m.div.append(l);var q,r=g(e.current,l),s=a(l).width();n+s>p&&a(m.div).css({left:n-(s-o)+"px"}),j(e.current)})}),KindEditor.plugin("symbols",function(a){var b=this,c="symbols",d={teshu:"、,。,·,ˉ,ˇ,¨,〃,—,～,‖,…,‘,’,“,”,〝,〞,〓,〔,〕,〈,〉,「,」,『,』,〖,〗,∶,∧,∨,∪,∩,∈,∷,⊥,∥,∠,⌒,⊙,∵,∴,♂,♀,°,′,″,℃,＄,¤,￠,￡,‰,§,№,☆,★,○,●,◎,◇,◆,□,■,△,▲,※,→,←,↑,↓,〡,〢,〣,〤,〥,〦,〧,〨,〩,㊣,㎎,㎏,㎜,㎝,㎞,㎡,㏄,㏎,㏑,㏒,㏕,︰,￢,￤,℡,ˊ,ˋ,˙,–,―,‥,‵,℅,℉,↖,↗,↘,↙,∕,∟,∣,≒,☉,⊕,〒",shuxue:"＋,－,×,·,÷,／,±,㏒,㏑,∑,∏,×,√,﹢,﹣,±,∫,∮,∝,∞,∧,∨,＝,≈,≡,≠,＜,＞,≤,≥,≦,≧,≮,≯,º,¹,²,³,½,¾,¼,％,‰",xuhao:"⒈,⒉,⒊,⒋,⒌,⒍,⒎,⒏,⒐,⒑,⒒,⒓,⒔,⒕,⒖,⒗,⒘,⒙,⒚,⒛,⑴,⑵,⑶,⑷,⑸,⑹,⑺,⑻,⑼,⑽,⑾,⑿,⒀,⒁,⒂,⒃,⒄,⒅,⒆,⒇,①,②,③,④,⑤,⑥,⑦,⑧,⑨,⑩,㈠,㈡,㈢,㈣,㈤,㈥,㈦,㈧,㈨,㈩,ⅰ,ⅱ,ⅲ,ⅳ,ⅴ,ⅵ,ⅶ,ⅷ,ⅸ,ⅹ,Ⅰ,Ⅱ,Ⅲ,Ⅳ,Ⅴ,Ⅵ,Ⅶ,Ⅷ,Ⅸ,Ⅹ,Ⅺ,Ⅻ,❶,❷,❸,❹,❺,❻,❼,❽,❾,❿,㈠,㈡,㈢,㈣,㈤,㈥,㈦,㈧,㈨,㈩",lading:"Α,Β,Γ,Δ,Ε,Ζ,Η,Θ,Ι,Κ,Λ,Μ,Ν,Ξ,Ο,Π,Ρ,Σ,Τ,Υ,Φ,Χ,Ψ,Ω,α,β,γ,δ,ε,ζ,η,θ,ι,κ,λ,μ,ν,ξ,ο,π,ρ,σ,τ,υ,φ,χ,ψ,ω",zhuyin:"ā,á,ǎ,à,ō,ó,ǒ,ò,ē,é,ě,è,ī,í,ǐ,ì,ū,ú,ǔ,ù,ǖ,ǘ,ǚ,ǜ,ü",yinbiao:"i:,i,e,æ,ʌ,ə:,ə,u:,u,ɔ:,ɔ,a:,ei,ai,ɔi,əu,au,iə,εə,uə,p,t,k,b,d,g,f,s,ʃ,θ,h,v,z,ʒ,ð,tʃ,tr,ts,dʒ,dr,dz,m,n,ŋ,l,r,w,j,",rwzf:"ぁ,あ,ぃ,い,ぅ,う,ぇ,え,ぉ,お,か,が,き,ぎ,く,ぐ,け,げ,こ,ご,さ,ざ,し,じ,す,ず,せ,ぜ,そ,ぞ,た,だ,ち,ぢ,っ,つ,づ,て,で,と,ど,な,に,ぬ,ね,の,は,ば,ぱ,ひ,び,ぴ,ふ,ぶ,ぷ,へ,べ,ぺ,ほ,ぼ,ぽ,ま,み,む,め,も,ゃ,や,ゅ,ゆ,ょ,よ,ら,り,る,れ,ろ,ゎ,わ,ゐ,ゑ,を,ん,ァ,ア,ィ,イ,ゥ,ウ,ェ,エ,ォ,オ,カ,ガ,キ,ギ,ク,グ,ケ,ゲ,コ,ゴ,サ,ザ,シ,ジ,ス,ズ,セ,ゼ,ソ,ゾ,タ,ダ,チ,ヂ,ッ,ツ,ヅ,テ,デ,ト,ド,ナ,ニ,ヌ,ネ,ノ,ハ,バ,パ,ヒ,ビ,ピ,フ,ブ,プ,ヘ,ベ,ペ,ホ,ボ,ポ,マ,ミ,ム,メ,モ,ャ,ヤ,ュ,ユ,ョ,ヨ,ラ,リ,ル,レ,ロ,ヮ,ワ,ヰ,ヱ,ヲ,ン,ヴ,ヵ,ヶ",ewzf:"А,Б,В,Г,Д,Е,Ё,Ж,З,И,Й,К,Л,М,Н,О,П,Р,С,Т,У,Ф,Х,Ц,Ч,Ш,Щ,Ъ,Ы,Ь,Э,Ю,Я,а,б,в,г,д,е,ё,ж,з,и,й,к,л,м,н,о,п,р,с,т,у,ф,х,ц,ч,ш,щ,ъ,ы,ь,э,ю,я",zhibiao:"┏,┳,┓,╔,╦,╗,╓,╥,╖,┣,╋,┫,╠,╬,╣,╟,╫,╢,┗,┻,┛,╚,╩,╝,╙,╨,╜,┌,┬,┐,╭,╮,╱,╲,┃,║,├,┼,┤,╰,╯,╲,╱,┆,┇,└,┴,┘,━,═,┅,┈,╳,⊿,▁,▂,▃,▄,▅,▆,▇,█,▉,▊,▋,▌,▍,▎,▏,▓,▔,▕,▼,▽,◢,◣,◤,◥",qita:"✐,✎,✏,✑,✒,✁,✂,✃,✄,✆,✉,☎,☏,☑,☒,☯,☰,☲,☱,☴,☵,☶,☳,☷,❄,☃,♨,웃,유,❖,☽,☾,☪,✿,❀,⚘,♔,♕,♖,♗,♘,♙,♚,♛,♜,♝,♞,♟,▧,▨,❣,✚,✪,✣,✤,✥,✦,❉,❥,❦,❧,❃,❂,❁,❀,✄,☪,☣,☢,☠,☭,☇,☈,⊙,☊,☋,☌,☍,▣,▤,▥,▦,▩,◘,◙,◈,♫,♬,♪,♩,♭,♪,✄,☪,☣,☢,☠,♯,♩,♪,♫,♬,♭,♮,☎,☏,☪"},e={cols:9,total:Object.keys(d),current:"teshu",tags:{teshu:"特殊",shuxue:"数学",xuhao:"序号",lading:"拉丁",zhuyin:"注音",yinbiao:"音标",rwzf:"日文字符",ewzf:"俄文字符",zhibiao:"制表符",qita:"其他"}};b.symbolConfig&&b.symbolConfig instanceof Function&&b.symbolConfig.call(null,d,e),b.clickToolbar(c,function(){function f(c,d){c.mouseover(function(){a(this).addClass("ke-on")}),c.mouseout(function(){a(this).removeClass("ke-on")}),c.click(function(a){b.insertHtml(d).hideMenu().focus(),a.stop()})}function g(b,c){var g=document.createElement("ul");c.append(g),g.className="ke-ul";for(var h,i=d[b].split(","),j=Math.ceil(i.length/e.cols),l=0;j>l;l++){var m=document.createElement("li");a(m).addClass("ke-li"),a(g).append(m);for(var n=0;n<e.cols;n++)if(h=i[e.cols*l+n],void 0!==h){var o=a('<span class="ke-symbol">'+h+"</span>");f(o,h),a(m).append(o),k.push(o)}}return g}function h(){a.each(k,function(){this.unbind()})}function i(a,b){a.click(function(a){h(),r.parentNode.removeChild(r),q.remove(),r=g(b,l),j(b),e.current=b,a.stop()})}function j(b){q=a('<div class="ke-page"></div>'),l.append(q);for(var c in e.tags){var d=e.tags[c];if(c!==b){var f=a('<span class="ke-page-item"><a href="javascript:;">['+d+"]</a></span>");i(f,c),q.append(f),k.push(f)}else q.append(a('<span class="ke-page-item ke-page-active">['+d+"]</span>"))}}var k=[],l=a('<div class="ke-plugin-symbol"></div>'),m=b.createMenu({name:c,beforeRemove:function(){h()}}),n=a(".ke-toolbar .ke-icon-symbols").pos().x,o=a(".ke-toolbar .ke-icon-symbols").width(),p=a(document.body).width();m.div.append(l);var q,r=g(e.current,l),s=a(l).width();n+s>p&&a(m.div).css({left:n-(s-o)+"px"}),j(e.current)})}),KindEditor.plugin("filemanager",function(a){function b(a,b,c){return a+" ("+Math.ceil(b/1024)+"KB, "+c+")"}function c(a,c){c.is_dir?a.attr("title",c.filename):a.attr("title",b(c.filename,c.filesize,c.datetime))}var d=this,e="filemanager",f=a.undef(d.fileManagerJson,d.basePath+"php/file_manager_json.php"),g=d.pluginsPath+e+"/images/",h=d.lang(e+".");d.plugin.filemanagerDialog=function(b){function i(b,c,e){var g="path="+b+"&order="+c+"&dir="+p;t.showLoading(d.lang("ajaxLoading")),a.ajax(a.addParam(f,g+"&"+(new Date).getTime()),function(a){t.hideLoading(),e(a)})}function j(b,c,d,e){var f=a.formatUrl(c.current_url+d.filename,"absolute"),g=encodeURIComponent(c.current_dir_path+d.filename+"/");d.is_dir?b.click(function(a){i(g,y.val(),e)}):d.is_photo?b.click(function(a){r.call(this,f,d.filename)}):b.click(function(a){r.call(this,f,d.filename)}),z.push(b)}function k(b,c){function d(){"VIEW"==x.val()?i(b.current_dir_path,y.val(),m):i(b.current_dir_path,y.val(),l)}a.each(z,function(){this.unbind()}),w.unbind(),x.unbind(),y.unbind(),b.current_dir_path&&w.click(function(a){i(b.moveup_dir_path,y.val(),c)}),x.change(d),y.change(d),v.html("")}function l(b){k(b,l);var c=document.createElement("table");c.className="ke-table",c.cellPadding=0,c.cellSpacing=0,c.border=0,v.append(c);for(var d=b.file_list,e=0,f=d.length;f>e;e++){var i=d[e],m=a(c.insertRow(e));m.mouseover(function(b){a(this).addClass("ke-on")}).mouseout(function(b){a(this).removeClass("ke-on")});var n=g+(i.is_dir?"folder-16.gif":"file-16.gif"),o=a('<img src="'+n+'" width="16" height="16" alt="'+i.filename+'" align="absmiddle" />'),p=a(m[0].insertCell(0)).addClass("ke-cell ke-name").append(o).append(document.createTextNode(" "+i.filename));!i.is_dir||i.has_file?(m.css("cursor","pointer"),p.attr("title",i.filename),j(p,b,i,l)):p.attr("title",h.emptyFolder),a(m[0].insertCell(1)).addClass("ke-cell ke-size").html(i.is_dir?"-":Math.ceil(i.filesize/1024)+"KB"),a(m[0].insertCell(2)).addClass("ke-cell ke-datetime").html(i.datetime)}}function m(b){k(b,m);for(var d=b.file_list,e=0,f=d.length;f>e;e++){var i=d[e],l=a('<div class="ke-inline-block ke-item"></div>');v.append(l);var n=a('<div class="ke-inline-block ke-photo"></div>').mouseover(function(b){a(this).addClass("ke-on")}).mouseout(function(b){a(this).removeClass("ke-on")});l.append(n);var o=b.current_url+i.filename,p=i.is_dir?g+"folder-64.gif":i.is_photo?o:g+"file-64.gif",q=a('<img src="'+p+'" width="80" height="80" alt="'+i.filename+'" />');!i.is_dir||i.has_file?(n.css("cursor","pointer"),c(n,i),j(n,b,i,m)):n.attr("title",h.emptyFolder),n.append(q),l.append('<div class="ke-name" title="'+i.filename+'">'+i.filename+"</div>")}}var n=a.undef(b.width,650),o=a.undef(b.height,510),p=a.undef(b.dirName,""),q=a.undef(b.viewType,"VIEW").toUpperCase(),r=b.clickFn,s=['<div style="padding:10px 20px;">','<div class="ke-plugin-filemanager-header">','<div class="ke-left">','<img class="ke-inline-block" name="moveupImg" src="'+g+'go-up.gif" width="16" height="16" border="0" alt="" /> ','<a class="ke-inline-block" name="moveupLink" href="javascript:;">'+h.moveup+"</a>","</div>",'<div class="ke-right">',h.viewType+' <select class="ke-inline-block" name="viewType">','<option value="VIEW">'+h.viewImage+"</option>",'<option value="LIST">'+h.listImage+"</option>","</select> ",h.orderType+' <select class="ke-inline-block" name="orderType">','<option value="NAME">'+h.fileName+"</option>",'<option value="SIZE">'+h.fileSize+"</option>",'<option value="TYPE">'+h.fileType+"</option>","</select>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-plugin-filemanager-body"></div>',"</div>"].join(""),t=d.createDialog({name:e,width:n,height:o,title:d.lang(e),body:s}),u=t.div,v=a(".ke-plugin-filemanager-body",u),w=(a('[name="moveupImg"]',u),a('[name="moveupLink"]',u)),x=(a('[name="viewServer"]',u),a('[name="viewType"]',u)),y=a('[name="orderType"]',u),z=[];return x.val(q),i("",y.val(),"VIEW"==q?m:l),t}}),KindEditor.plugin("image",function(a){var b=this,c="image",d=a.undef(b.allowImageUpload,!0),e=a.undef(b.allowImageRemote,!0),f=a.undef(b.allowFileManager,!1),g=a.undef(b.uploadHeader,{}),h=a.undef(b.uploadFileSizeLimit,"2MB"),i=a.undef(b.uploadFileTypeLimit,"*.jpg;*.gif;*.png;*.jpeg,*.bmp"),j=a.undef(b.extraFileUploadParams,{}),k=a.undef(b.filePostName,"imgFile"),l=a.undef(b.uploadJson,b.basePath+"_404.html"),m=a.undef(b.formatUploadUrl,!0),n=a.undef(b.imageTabIndex,1),o=(b.pluginsPath+"image/images/",a.undef(b.fillDescAfterUploadImage,!1)),p=b.lang(c+".");b.plugin.imageDialog=function(d){function e(a,b){E.val(a),F.val(b),K=a,L=b}var n=(d.imageUrl,a.undef(d.imageWidth,""),a.undef(d.imageHeight,""),a.undef(d.imageTitle,""),a.undef(d.imageAlign,""),a.undef(d.showRemote,!0)),q=a.undef(d.showLocal,!0),r=a.undef(d.tabIndex,0),s=d.clickFn,t=("kindeditor_upload_iframe_"+(new Date).getTime(),[]);for(var u in j)t.push('<input type="hidden" name="'+u+'" value="'+j[u]+'" />');var v,w=['<div style="padding:20px;">','<div class="tabs"></div>','<div class="tab1" style="display:none;">','<div class="ke-dialog-row">','<label for="remoteUrl" style="width:60px;">'+p.remoteUrl+"</label>",'<input type="text" id="remoteUrl" class="ke-input-text" name="url" value="" style="width:'+(f?250:360)+'px;" />','<span class="ke-button-common ke-button-outer"  style="margin-left:'+(f?12:0)+'px">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+p.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="remoteWidth" style="width:60px;">'+p.size+"</label>",p.width+'：<input type="text" id="remoteWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" style="width:130px;margin-right:10px" />',p.height+'：<input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" style="width:130px;margin-right:10px" />','<span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-refresh-bold"></span>',"</div>",'<div class="ke-dialog-row">','<label style="width:60px;">'+p.align+"</label>",'<input type="radio" name="align" class="ke-inline-block" value="" checked="checked" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-default"></span><text style="margin-right:30px;">&nbsp;默认</text>',' <input type="radio" name="align" class="ke-inline-block" value="left" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-left"></span><text style="margin-right:30px;">&nbsp;左对齐</text>',' <input type="radio" name="align" class="ke-inline-block" value="right" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-right"></span><text style="margin-right:30px;" >&nbsp;右对齐</text>',"</div>",'<div class="ke-dialog-row">','<label for="remoteTitle" style="width:60px;">'+p.imgTitle+"</label>",'<input type="text" id="remoteTitle" class="ke-input-text" name="title" value="" style="width:360px;" />',"</div>","</div>",'<div class="tab2" style="display:none;">','<div class="ke-dialog-row">','<label style="width:60px;">'+p.localUrl+"</label>",'<input type="text" name="localUrl" class="ke-input-text" tabindex="-1" style="width:270px;" readonly="true" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+p.upload+'" />',"</div>","</div>","</div>"].join(""),x=480,y=n?340:220,z=b.createDialog({name:c,width:x,height:y+3,title:b.lang(c),body:w,yesBtn:{name:b.lang("yes"),click:function(c){if(!z.isLoading){if(q&&n&&v&&1===v.selectedIndex||!n)return""==J.fileBox.val()?void alert(b.lang("pleaseSelectFile")):(z.showLoading(b.lang("uploadLoading")),J.submit(),void C.val(""));var d=a.trim(B.val()),e=E.val(),f=F.val(),g=H.val(),h="";return I.each(function(){return this.checked?(h=this.value,!1):void 0}),"http://"==d||a.invalidUrl(d)?(alert(b.lang("invalidUrl")),void B[0].focus()):/^\d*$/.test(e)?/^\d*$/.test(f)?void s.call(b,d,g,e,f,0,h):(alert(b.lang("invalidHeight")),void F[0].focus()):(alert(b.lang("invalidWidth")),void E[0].focus())}}},beforeRemove:function(){D.unbind(),E.unbind(),F.unbind(),G.unbind()}}),A=z.div,B=a('[name="url"]',A),C=a('[name="localUrl"]',A),D=a('[name="viewServer"]',A),E=a('.tab1 [name="width"]',A),F=a('.tab1 [name="height"]',A),G=a(".ke-refresh-btn",A),H=a('.tab1 [name="title"]',A),I=a('.tab1 [name="align"]',A);n&&q?(v=a.tabs({src:a(".tabs",A),afterSelect:function(a){}}),v.add({title:p.remoteImage,panel:a(".tab1",A)}),v.add({title:p.localImage,panel:a(".tab2",A)}),v.select(r)):n?a(".tab1",A).show():q&&a(".tab2",A).show();var J=a.uploadbutton({button:a(".ke-upload-button",A)[0],width:"auto",fieldName:k,fileSizeLimit:h,fileTypeLimit:i,uploadHeader:g,uploadData:j,uploadUrl:a.addParam(l,"dir=image"),afterUpload:function(d){if(z.hideLoading(),0===d.error){var e=d.url;m&&(e=a.formatUrl(e,"absolute")),b.afterUpload&&b.afterUpload.call(b,e,d,c),o?(a(".ke-dialog-row #remoteUrl",A).val(e),a(".ke-tabs-li",A)[0].click(),a(".ke-refresh-btn",A).click()):s.call(b,e,d.title,d.width,d.height,d.border,d.align)}else alert(d.message),setTimeout(function(){C.val("")},100)},afterError:function(a){z.hideLoading(),b.errorDialog(a)}});J.fileBox.change(function(a){C.val(J.fileBox.val())}),f?D.click(function(c){b.loadPlugin("filemanager",function(){b.plugin.filemanagerDialog({viewType:"VIEW",dirName:"image",clickFn:function(c,d){b.dialogs.length>1&&(a('[name="url"]',A).val(c),b.afterSelectFile&&b.afterSelectFile.call(b,c),b.hideDialog())}})})}):D.hide();var K=0,L=0;return G.click(function(b){var c=a('<img src="'+B.val()+'" />',document).css({position:"absolute",visibility:"hidden",top:0,left:"-1000px"});c.bind("load",function(){e(c.width(),c.height()),c.remove()}),a(document.body).append(c)}),E.change(function(a){K>0&&F.val(Math.round(L/K*parseInt(this.value,10)))}),F.change(function(a){L>0&&E.val(Math.round(K/L*parseInt(this.value,10)))}),B.val(d.imageUrl),e(d.imageWidth,d.imageHeight),H.val(d.imageTitle),I.each(function(){return this.value===d.imageAlign?(this.checked=!0,!1):void 0}),n&&0===r&&(B[0].focus(),B[0].select()),z},b.plugin.image={edit:function(){var a=b.plugin.getSelectedImage();b.plugin.imageDialog({imageUrl:a?a.attr("data-ke-src"):"http://",imageWidth:a?a.width():"",imageHeight:a?a.height():"",imageTitle:a?a.attr("title"):"",imageAlign:a?a.attr("align"):"",showRemote:e,showLocal:d,tabIndex:a?0:n,clickFn:function(c,d,e,f,g,h){a?(a.attr("src",c),a.attr("data-ke-src",c),a.attr("width",e),a.attr("height",f),a.attr("title",d),a.attr("align",h),a.attr("alt",d)):(b.exec("insertimage",c,d,e,f,g,h,"ke-image"),setTimeout(function(){b.edit.afterChange.call(b.edit)},300)),setTimeout(function(){b.hideDialog().focus()},0)}})},"delete":function(){var a=b.plugin.getSelectedImage();"a"==a.parent().name&&(a=a.parent()),a.remove(),b.addBookmark()}},b.clickToolbar(c,b.plugin.image.edit)}),KindEditor.plugin("insertfile",function(a){var b=this,c="insertfile",d=a.undef(b.allowFileUpload,!0),e=a.undef(b.allowFileManager,!1),f=a.undef(b.uploadHeader,{}),g=a.undef(b.uploadFileSizeLimit,"20MB"),h=a.undef(b.uploadFileTypeLimit,"*.mp3;*.wav;*.mp4;*.wmv;*.rmvb;*.avi,*.jpg;*.gif;*.png;*.jpeg,*.bmp"),i=a.undef(b.extraFileUploadParams,{}),j=a.undef(b.filePostName,"imgFile"),k=a.undef(b.uploadJson,b.basePath+"_404.html"),l=a.undef(b.formatUploadUrl,!0),m=b.lang(c+".");b.plugin.fileDialog=function(n){var o=a.undef(n.fileUrl,"http://"),p=a.undef(n.fileTitle,""),q=n.clickFn,r=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+m.url+"</label>",'<input type="text" id="keUrl" name="url" class="ke-input-text" style="width:'+(e?160:260)+'px;" />','<input type="button" class="ke-upload-button" value="'+m.upload+'" />','<span class="ke-button-common ke-button-outer" style="margin-left:'+(e?5:0)+'px" >','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+m.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keTitle" style="width:60px;">'+m.title+"</label>",'<input type="text" id="keTitle" class="ke-input-text" name="title" value="" style="width:160px;" /></div>',"</div>","</form>","</div>"].join(""),s=b.createDialog({name:c,width:450,height:220,title:b.lang(c),body:r,yesBtn:{name:b.lang("yes"),click:function(c){var d=a.trim(u.val()),e=w.val();return"http://"==d||a.invalidUrl(d)?(alert(b.lang("invalidUrl")),void u[0].focus()):(""===a.trim(e)&&(e=d),void q.call(b,d,e))}}}),t=s.div,u=a('[name="url"]',t),v=a('[name="viewServer"]',t),w=a('[name="title"]',t);if(d){var x=a.uploadbutton({button:a(".ke-upload-button",t)[0],width:"auto",fieldName:j,fileSizeLimit:g,fileTypeLimit:h,uploadHeader:f,uploadData:i,uploadUrl:a.addParam(k,"dir=file"),afterUpload:function(d){if(s.hideLoading(),0===d.error){var e=d.url;l&&(e=a.formatUrl(e,"absolute")),u.val(e),b.afterUpload&&b.afterUpload.call(b,e,d,c)}else alert(d.message)},afterError:function(a){s.hideLoading(),b.errorDialog(a)}});x.fileBox.change(function(c){var d=a("input[type='file']",x.form[0]).val();d&&(s.showLoading(b.lang("uploadLoading")),x.submit())})}else a(".ke-upload-button",t).hide();e?v.click(function(c){b.loadPlugin("filemanager",function(){b.plugin.filemanagerDialog({viewType:"LIST",dirName:"file",clickFn:function(c,d){b.dialogs.length>1&&(a('[name="url"]',t).val(c),b.afterSelectFile&&b.afterSelectFile.call(b,c),b.hideDialog())}})})}):v.hide(),u.val(o),w.val(p),u[0].focus(),u[0].select()},b.clickToolbar(c,function(){b.plugin.fileDialog({clickFn:function(a,c){var d='<a class="ke-insertfile" href="'+a+'" data-ke-src="'+a+'" target="_blank">'+c+"</a>";b.insertHtml(d).hideDialog().focus()}})})}),KindEditor.plugin("lineheight",function(a){var b=this,c="lineheight",d=b.lang(c+".");b.clickToolbar(c,function(){var e="",f=b.cmd.commonNode({"*":".line-height"});f&&(e=f.css("line-height"));var g=b.createMenu({name:c,width:150});a.each(d.lineHeight,function(c,d){a.each(d,function(a,c){g.addItem({title:c,checked:e===a,click:function(){b.cmd.toggle('<span style="line-height:'+a+';"></span>',{span:".line-height="+a}),b.updateState(),b.addBookmark(),b.hideMenu()}})})})})}),KindEditor.plugin("link",function(a){var b=this,c="link";b.plugin.link={edit:function(){var d=b.lang(c+"."),e='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+d.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+d.linkType+'</label><select id="keType" name="type"></select></div></div>',f=b.createDialog({name:c,width:450,title:b.lang(c),body:e,yesBtn:{name:b.lang("yes"),click:function(c){var d=a.trim(h.val());return"http://"==d||a.invalidUrl(d)?(alert(b.lang("invalidUrl")),void h[0].focus()):void b.exec("createlink",d,i.val()).hideDialog().focus()}}}),g=f.div,h=a('input[name="url"]',g),i=a('select[name="type"]',g);h.val("http://"),i[0].options[0]=new Option(d.newWindow,"_blank"),i[0].options[1]=new Option(d.selfWindow,""),b.cmd.selection();var j=b.plugin.getSelectedLink();j&&(b.cmd.range.selectNode(j[0]),b.cmd.select(),h.val(j.attr("data-ke-src")),i.val(j.attr("target"))),h[0].focus(),h[0].select()},"delete":function(){b.exec("unlink",null)}},b.clickToolbar(c,b.plugin.link.edit)}),KindEditor.plugin("media",function(a){var b=this,c="media",d=b.lang(c+"."),e=a.undef(b.allowMediaUpload,!0),f=a.undef(b.allowFileManager,!1),g=a.undef(b.uploadHeader,{}),h=a.undef(b.uploadFileSizeLimit,"20MB"),i=a.undef(b.uploadFileTypeLimit,"*.mp3;*.wav;*.mp4;*.wmv;*.rmvb;*.avi"),j=a.undef(b.extraFileUploadParams,{}),k=a.undef(b.filePostName,"imgFile"),l=a.undef(b.uploadJson,b.basePath+"_404.html"),m=a.undef(b.formatUploadUrl,!0),n=function(b){for(var c=a(b.commonAncestor());c&&(1!=c.type||c.isStyle());)c=c.parent();return c};b.plugin.media={edit:function(){var o=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+d.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:'+(f?160:260)+'px;" />','<input type="button" class="ke-upload-button" value="'+d.upload+'" />','<span class="ke-button-common ke-button-outer"  style="margin-left:'+(f?5:0)+'px" >','<input type="button" class="ke-button-common ke-button " name="viewServer" value="'+d.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+d.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="320" maxlength="4" />','<label for="keHeight" style="width:60px;text-align:left;margin-left:30px">'+d.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="auto" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="kePreload" style="width:60px;">preload</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="kePreload" name="preload" value="" /></div>','<label for="keAutostart" style="width:60px;text-align:left;margin-left:30px">autoplay</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keAutostart" name="autoplay" value="" /></div>',"</div>",'<div class="ke-dialog-row">','<label for="keControls" style="width:60px;">controls</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keControls" name="controls" checked value="" /></div>','<label for="keLoop" style="width:60px;text-align:left;margin-left:30px">loop</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keLoop" name="loop" checked value="" /></div>',"</div>","</div>"].join(""),p=b.createDialog({name:c,width:450,height:300,title:b.lang(c),body:o,yesBtn:{name:b.lang("yes"),click:function(c){var d=a.trim(r.val()),e=t.val(),f=u.val(),g=w[0].checked,h=v[0].checked,i=x[0].checked,j=y[0].checked;if("http://"==d||a.invalidUrl(d))return alert(b.lang("invalidUrl")),void r[0].focus();if("auto"!=e&&!/^\d*$/.test(e))return alert(b.lang("invalidWidth")),void t[0].focus();if("auto"!=f&&!/^\d*$/.test(f))return alert(b.lang("invalidHeight")),void u[0].focus();var k="video";/\.(mp3|wav|ogg|acc)(\?|$)/i.test(d)&&(k="audio");var l=["<p><"+k,'data-ke-class="ke-audio"','class="ke-media"','style="display:inline;"','src="'+d+'"','width="'+e+'"','height="'+f+'"',g?"preload":"",h?"autoplay":"",i?"controls":"",j?"loop":"","></"+k+"><span>​　</span></p>"].join(" "),m=n(b.cmd.range);m&&"p"!=m.name?b.insertHtml(l).hideDialog().focus():(a(m).after(l),b.hideDialog().focus())}}}),q=p.div,r=a('[name="url"]',q),s=a('[name="viewServer"]',q),t=a('[name="width"]',q),u=a('[name="height"]',q),v=a('[name="autoplay"]',q),w=a('[name="preload"]',q),x=a('[name="controls"]',q),y=a('[name="loop"]',q);if(r.val("http://"),e){var z=a.uploadbutton({button:a(".ke-upload-button",q)[0],width:"auto",fieldName:k,fileSizeLimit:h,fileTypeLimit:i,uploadHeader:g,uploadData:j,uploadUrl:a.addParam(l,"dir=media"),afterUpload:function(d){if(p.hideLoading(),0===d.error){var e=d.url;m&&(e=a.formatUrl(e,"absolute")),r.val(e),b.afterUpload&&b.afterUpload.call(b,e,d,c)}else alert(d.message),setTimeout(function(){r.val("http://")},100)},afterError:function(a){p.hideLoading(),b.errorDialog(a)}});z.fileBox.change(function(c){var d=a("input[type='file']",z.form[0]).val();d&&(p.showLoading(b.lang("uploadLoading")),z.submit())})}else a(".ke-upload-button",q).hide();f?s.click(function(c){b.loadPlugin("filemanager",function(){b.plugin.filemanagerDialog({viewType:"LIST",dirName:"media",clickFn:function(c,d){b.dialogs.length>1&&(a('[name="url"]',q).val(c),b.afterSelectFile&&b.afterSelectFile.call(b,c),b.hideDialog())}})})}):s.hide()},"delete":function(){b.plugin.getSelectedMedia().remove(),b.addBookmark()}},b.clickToolbar(c,b.plugin.media.edit)}),function(a){function b(a){this.init(a)}a.extend(b,{init:function(b){function c(b,c){a(".ke-status",b).addClass("upload-error"),a(".ke-status > div",b).hide(),a(".ke-message",b).addClass("ke-error").show().html(a.escape(c))}var d=this;b.afterError=b.afterError||function(a){alert(a)},d.options=b,d.progressbars={};var e="ke_multi_upload_btn"+1*new Date+"_"+Math.floor(9e4*Math.random()+9999),f="ke_multi_upload_dragbody"+1*new Date+"_"+Math.floor(9e4*Math.random()+9999),g="ke_multi_upload_error"+1*new Date+"_"+Math.floor(9e4*Math.random()+9999);d.div=a(b.container).html(['<div class="ke-swfupload">','<div class="ke-swfupload-top" >','<div class="ke-inline-block ke-swfupload-button" id="'+e+'" style="width: 86px;">',"</div>",'<div class="ke-inline-block ke-swfupload-desc">'+b.uploadDesc+"</div>",'<span class="ke-button-common ke-button-outer ke-swfupload-startupload">','<input type="button" class="ke-button-common ke-button ke-startup-upload-button" value="'+b.startButtonValue+'" />',"</span>","</div>",'<div class="ke-swfupload-body" id="'+f+'"></div>','<div class="upload-error-result" id="'+g+'"></div>',"</div>"].join("")),d.bodyDiv=a(".ke-swfupload-body",d.div),d.uploader=WebUploader.create({server:d.options.uploadUrl,pick:"#"+e,resize:!1,fileVal:"file",accept:{title:"Images",extensions:b.fileTypes.replace(/\*\./g,"").replace(/;/g,","),mimeTypes:"image/*"},uploadBeforeSend:function(a,c,d){d=b.uploadHeaders||{},c=b.uploadData||{}},fileNumLimit:b.fileUploadLimit,fileSingleSizeLimit:1*b.fileSizeLimit.replace(/MB/g,"")*1024*1024}),void 0!==d.options.uploadCompress&&(d.uploader.options.compress=d.options.uploadCompress),d.uploader.on("fileQueued",function(a){d.uploader.makeThumb(a,function(b,c){b&&(c=d.options.fileIconUrl),a.url=c,d.appendFile(a)},80,80)}),d.uploader.on("uploadStart",function(b){var c=this,d=a('div[data-id="'+b.id+'"]',c.bodyDiv);a(".ke-status > div",d).hide(),a(".ke-progressbar",d).show()}),d.uploader.on("uploadProgress",function(a,b){var c=d.progressbars[a.id],e=Math.floor(100*b);c.bar.css("width",e+"%");var f=e>=100?"上传成功":e+"%";c.percent.html(f).show()}),d.uploader.on("uploadSuccess",function(b,e){var f=a('div[data-id="'+b.id+'"]',d.bodyDiv).eq(0),g=e.data;if(0!==g.error)return void c(f,g.message||d.options.errorMessage);var h=g.url;console.info("self.options.formatUploadUrl",d.options.formatUploadUrl),h=d.options.formatUploadUrl?b.url=a.formatUrl(g.url,"absolute"):b.url=g.url,a(".ke-img",f).attr("src",b.url).attr("data-status","1").data("data",{url:h,title:b.name+"",width:(b._info||{width:"auto"}).width+"",height:"",border:"",align:""})}),d.uploader.on("uploadError",function(b,e){if(b){var f=a('div[data-id="'+b.id+'"]',d.bodyDiv).eq(0);console.info("reason",e),c(f,"ERROR:"+e)}}),d.uploader.on("error",function(a){var c="部分或全部文件上传出现错误，请检查后重试！";"Q_TYPE_DENIED"===a?c="["+arguments[1].name+"]文件类型不正确，上传失败！":"Q_EXCEED_NUM_LIMIT"===a?c="同时最多可上传"+b.fileUploadLimit+"张图片，超出部分已经忽略！":"F_EXCEED_SIZE"===a?c="["+arguments[2].name+"]文件大小超出限制（最大"+1*b.fileSizeLimit.replace(/MB/g,"")+"M），上传失败！":"F_DUPLICATE"===a&&(c="["+arguments[1].name+"]文件已存在于待上传列表中！"),console.error("部分或全部文件上传出现错误，请检查后重试！",arguments),alert(c)}),a(".ke-swfupload-startupload input",d.div).click(function(){d.uploader.upload()})},removeFile:function(b){var c=this;c.uploader.cancelFile(b);var d=a('div[data-id="'+b+'"]',c.bodyDiv);a(".ke-photo",d).unbind(),a(".ke-delete",d).unbind(),d.remove()},removeFiles:function(){var b=this;a(".ke-item",b.bodyDiv).each(function(){b.removeFile(a(this).attr("data-id"))})},appendFile:function(b){var c=this,d=a('<div class="ke-inline-block ke-item" draggable="false" data-id="'+b.id+'"></div>');c.bodyDiv.append(d);var e=a('<div class="ke-inline-block ke-photo"></div>').mouseover(function(b){a(this).addClass("ke-on")}).mouseout(function(b){a(this).removeClass("ke-on")});d.append(e);var f=a('<img class="ke-multi-image ke-img" src="'+b.url+'" class="ke-img" draggable="false" data-status="0" alt="'+b.name+'" />');e.append(f),a('<span class="ke-delete"></span>').appendTo(e).click(function(){c.removeFile(b.id)});var g=a('<div class="ke-status"></div>').appendTo(e);a(['<div class="ke-progressbar">','<div class="ke-progressbar-bar"><div class="ke-progressbar-bar-inner"></div></div>','<div class="ke-progressbar-percent">0%</div></div>'].join("")).hide().appendTo(g),a('<div class="ke-message">'+c.options.pendingMessage+"</div>").appendTo(g),d.append('<div class="ke-name">'+b.name+"</div>"),c.progressbars[b.id]={bar:a(".ke-progressbar-bar-inner",e),percent:a(".ke-progressbar-percent",e)}},remove:function(){var a=this;a.removeFiles(),a.destroy(),a.div.html("")},getUrlList:function(){var b=[];return a(".ke-img",self.bodyDiv).each(function(){var c=a(this),d=c.attr("data-status");"1"==d&&b.push(c.data("data"))}),b},destroy:function(){var a=this;a.uploader.destroy()}}),a.swfupload=function(a,c){return new b(a,c)}}(KindEditor),KindEditor.plugin("multiimage",function(a){var b=this,c="multiimage",d=(a.undef(b.formatUploadUrl,!0),a.undef(b.uploadJson,b.basePath+"php/upload_json.php")),e=a.undef(b.uploadHeader,b.basePath+"php/upload_json.php"),f=a.undef(b.uploadData,b.basePath+"php/upload_json.php"),g=b.pluginsPath+"multiimage/images/",h=a.undef(b.imageSizeLimit,"1MB"),i=(a.undef(b.imageFileTypes,"*.jpg;*.gif;*.png"),a.undef(b.imageUploadLimit,20)),j=a.undef(b.filePostName,"imgFile"),k=b.lang(c+".");b.plugin.multiImageDialog=function(l){var m=l.clickFn,n=a.tmpl(k.uploadDesc,{uploadLimit:i,sizeLimit:h}),o=['<div style="padding:10px 20px;">','<div class="swfupload">',"</div>","</div>"].join(""),p=b.createDialog({name:c,width:650,height:500,title:b.lang(c),body:o,previewBtn:{name:k.insertAll,click:function(a){m.call(b,r.getUrlList())}},yesBtn:{name:k.clearAll,click:function(a){r.removeFiles()}},beforeRemove:function(){r.destroy()}}),q=p.div,r=a.swfupload({container:a(".swfupload",q),buttonImageUrl:g+("zh-CN"==b.langType?"select-files-zh-CN.png":"select-files-en.png"),buttonWidth:"zh-CN"==b.langType?72:88,buttonHeight:23,fileIconUrl:g+"image.png",uploadDesc:n,startButtonValue:k.startUpload,uploadUrl:a.addParam(d,"dir=image"),uploadData:f,uploadHeader:e,uploadCompress:b.uploadCompress,formatUploadUrl:b.formatUploadUrl,flashUrl:g+"swfupload.swf",filePostName:j,fileTypes:"*.jpg;*.jpeg;*.gif;*.png;*.bmp",fileTypesDesc:"Image Files",fileUploadLimit:i,fileSizeLimit:h,postParams:a.undef(b.extraFileUploadParams,{}),queueLimitExceeded:k.queueLimitExceeded,fileExceedsSizeLimit:k.fileExceedsSizeLimit,zeroByteFile:k.zeroByteFile,invalidFiletype:k.invalidFiletype,unknownError:k.unknownError,pendingMessage:k.pending,errorMessage:k.uploadError,afterError:function(a){b.errorDialog(a)}});return a(r.bodyDiv).bind("drop",function(b){b.preventDefault(),b.event.preventDefault();var c=[];[].forEach.call(b.event.dataTransfer.files,function(a){c.push(a)},!1),c.length>0&&r.uploader.addFiles(c),a(r.bodyDiv).removeClass("drag-hover")}),a(r.bodyDiv).bind("dragenter",function(b){a(r.bodyDiv).addClass("drag-hover")}),a(r.bodyDiv).bind("dragover",function(a){a.preventDefault()}),a(r.bodyDiv).bind("dragleave",function(){a(r.bodyDiv).removeClass("drag-hover")}),a(r.bodyDiv).bind("mouseleave",function(){a(r.bodyDiv).removeClass("drag-hover")}),a(r.bodyDiv).bind("mouseout",function(){a(r.bodyDiv).removeClass("drag-hover")}),p},b.clickToolbar(c,function(){b.plugin.multiImageDialog({clickFn:function(c){0!==c.length&&(a.each(c,function(a,c){b.afterUpload&&b.afterUpload.call(b,c.url,c,"multiimage"),b.exec("insertimage",c.url,c.title,c.width,c.height,c.border,c.align,"ke-image","p")}),setTimeout(function(){b.hideDialog().focus()},0))}})})}),KindEditor.plugin("pagebreak",function(a){var b=this,c="pagebreak",d=a.undef(b.pagebreakHtml,'<hr style="page-break-after: always;" class="ke-pagebreak" />');b.clickToolbar(c,function(){var c=b.cmd,e=c.range;b.focus();var f="br"==b.newlineTag||a.WEBKIT?"":'<span id="__kindeditor_tail_tag__"></span>';if(b.insertHtml(d+f),""!==f){var g=a("#__kindeditor_tail_tag__",b.edit.doc);e.selectNodeContents(g[0]),g.removeAttr("id"),c.select()}})}),KindEditor.plugin("plainpaste",function(a){var b=this,c="plainpaste";b.clickToolbar(c,function(){var d=b.lang(c+"."),e='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+d.comment+'</div><textarea class="ke-textarea" style="width:518px;height:260px;"></textarea></div>',f=b.createDialog({
name:c,width:560,title:b.lang(c),body:e,yesBtn:{name:b.lang("yes"),click:function(c){var d=g.val();d=a.escape(d),d=d.replace(/ {2}/g," &nbsp;"),d="p"==b.newlineTag?d.replace(/^/,"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>"):d.replace(/\n/g,"<br />$&"),b.insertHtml(d).hideDialog().focus()}}}),g=a("textarea",f.div);g[0].focus()})}),KindEditor.plugin("preview",function(a){var b=this,c="preview";b.clickToolbar(c,function(){var d=(b.lang(c+"."),'<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>'),e=b.createDialog({name:c,width:750,title:b.lang(c),body:d}),f=a("iframe",e.div),g=a.iframeDoc(f);g.open(),g.write(b.fullHtml()),g.close(),a(g.body).css("background-color","#FFF"),f[0].contentWindow.focus()})}),KindEditor.plugin("quote",function(a){function b(b){for(var c=a(b.commonAncestor());c&&(1!=c.type||c.isStyle());)c=c.parent();return c}var c=this,d="quote";c.clickToolbar(d,function(){c.focus();var d="​",e=c.cmd.range,f=b(c.cmd.range);if(e){var g=e.extractContents(),h=a(g).outer();d=h?h:a(g).html()}d=d||"​";var i='<blockquote style="padding: 0 1.5em;border-left: 5px solid #ddd;font-style: italic;margin-block-start: 0;margin-inline-start: 0;min-height: 2rem"><p>'+d+"</p></blockquote>";if(f&&["p","h1","h2","h3","h4","h5","h6"].indexOf(f.name)>-1){a(f).after(i);var j=a(f).next();c.cmd.range.selectNodeContents(j).collapse(),c.cmd.select(),j.focus()}else{c.insertHtml(i);for(var k=f;k&&k.children&&k.children().length;)k=k.children();k&&k[0]&&c.cmd.range.selectNodeContents(k[0]).collapse(),c.cmd.select()}c.cmd.selection(!0)})}),KindEditor.plugin("quickformat",function(a){function b(a){for(var b=a.first();b&&b.first();)b=b.first();return b}var c=this,d="quickformat",e=a.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");c.clickToolbar(d,function(){c.focus();for(var d,f=c.edit.doc,g=c.cmd.range,h=a(f.body).first(),i=[],j=[],k=g.createBookmark(!0);h;){d=h.next();var l=b(h);l&&"img"==l.name||(e[h.name]?(h.html(h.html().replace(/^(\s|&nbsp;|　)+/gi,"")),h.css("text-indent","2em")):j.push(h),(!d||e[d.name]||e[h.name]&&!e[d.name])&&(j.length>0&&i.push(j),j=[])),h=d}a.each(i,function(b,c){var d=a('<p style="text-indent:2em;"></p>',f);c[0].before(d),a.each(c,function(a,b){d.append(b)})}),g.moveToBookmark(k),c.addBookmark()})}),KindEditor.plugin("table",function(a){function b(a,b){b=b.toUpperCase(),a.css("background-color",b),a.css("color","#000000"===b?"#FFFFFF":"#000000"),a.html(b)}function c(c,d){function f(){a.each(i,function(){this.remove()}),i=[],a(document).unbind("click,mousedown",f),c.unbind("click,mousedown",f)}d.bind("click,mousedown",function(a){a.stopPropagation()}),d.click(function(d){f();var g=a(this),h=g.pos(),j=a.colorpicker({x:h.x,y:h.y+g.height(),z:811214,selectedColor:a(this).html(),colors:e.colorTable,noColor:e.lang("noColor"),shadowMode:e.shadowMode,click:function(a){b(g,a),f()}});i.push(j),a(document).bind("click,mousedown",f),c.bind("click,mousedown",f)})}function d(a,b,c){for(var d=0,e=0,f=b.cells.length;f>e&&b.cells[e]!=c;e++)d+=b.cells[e].rowSpan-1;return c.cellIndex-d}var e=this,f="table",g=e.lang(f+"."),h="ke-zeroborder",i=[];e.plugin.table={prop:function(d){var i=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keRows" style="width:90px;">'+g.cells+"</label>",g.rows+' <input type="text" id="keRows" class="ke-input-text ke-input-number" name="rows" value="" maxlength="4" /> &nbsp; ',g.cols+' <input type="text" class="ke-input-text ke-input-number" name="cols" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+g.size+"</label>",g.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+g.percent+"</option>",'<option value="px">'+g.px+"</option>","</select> &nbsp; ",g.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+g.percent+"</option>",'<option value="px">'+g.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="kePadding" style="width:90px;">'+g.space+"</label>",g.padding+' <input type="text" id="kePadding" class="ke-input-text ke-input-number" name="padding" value="" maxlength="4" /> &nbsp; ',g.spacing+' <input type="text" class="ke-input-text ke-input-number" name="spacing" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+g.align+"</label>",'<select id="keAlign" name="align">','<option value="">'+g.alignDefault+"</option>",'<option value="left">'+g.alignLeft+"</option>",'<option value="center">'+g.alignCenter+"</option>",'<option value="right">'+g.alignRight+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+g.border+"</label>",g.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',g.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+g.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),j=e.cmd.range.createBookmark(),k=e.createDialog({name:f,width:500,title:e.lang(f),body:i,beforeRemove:function(){w.unbind()},yesBtn:{name:e.lang("yes"),click:function(b){var c=m.val(),d=n.val(),f=o.val(),g=p.val(),i=q.val(),k=r.val(),l=s.val(),y=t.val(),z=u.val(),A=v.val(),B=a(w[0]).html()||"",C=a(w[1]).html()||"";if(0==c||!/^\d+$/.test(c))return alert(e.lang("invalidRows")),void m[0].focus();if(0==d||!/^\d+$/.test(d))return alert(e.lang("invalidRows")),void n[0].focus();if(!/^\d*$/.test(f))return alert(e.lang("invalidWidth")),void o[0].focus();if(!/^\d*$/.test(g))return alert(e.lang("invalidHeight")),void p[0].focus();if(!/^\d*$/.test(l))return alert(e.lang("invalidPadding")),void s[0].focus();if(!/^\d*$/.test(y))return alert(e.lang("invalidSpacing")),void t[0].focus();if(!/^\d*$/.test(A))return alert(e.lang("invalidBorder")),void v[0].focus();if(x)return""!==f?x.width(f+i):x.css("width",""),void 0!==x[0].width&&x.removeAttr("width"),""!==g?x.height(g+k):x.css("height",""),void 0!==x[0].height&&x.removeAttr("height"),x.css("background-color",C),void 0!==x[0].bgColor&&x.removeAttr("bgColor"),""!==l?x[0].cellPadding=l:x.removeAttr("cellPadding"),""!==y?x[0].cellSpacing=y:x.removeAttr("cellSpacing"),""!==z?x[0].align=z:x.removeAttr("align"),""!==A?x.attr("border",A):x.removeAttr("border"),""===A||"0"===A?x.addClass(h):x.removeClass(h),""!==B?x.attr("borderColor",B):x.removeAttr("borderColor"),e.hideDialog().focus(),e.cmd.range.moveToBookmark(j),e.cmd.select(),void e.addBookmark();var D="";""!==f&&(D+="width:"+f+i+";"),""!==g&&(D+="height:"+g+k+";"),""!==C&&(D+="background-color:"+C+";");var E="<table";""!==D&&(E+=' style="'+D+'"'),""!==l&&(E+=' cellpadding="'+l+'"'),""!==y&&(E+=' cellspacing="'+y+'"'),""!==z&&(E+=' align="'+z+'"'),""!==A&&(E+=' border="'+A+'"'),(""===A||"0"===A)&&(E+=' class="'+h+'"'),""!==B&&(E+=' bordercolor="'+B+'"'),E+=">";for(var F=0;c>F;F++){E+="<tr>";for(var G=0;d>G;G++)E+="<td>"+(a.IE?"&nbsp;":"<br />")+"</td>";E+="</tr>"}E+="</table>",a.IE||(E+="<br />"),e.insertHtml(E),e.select().hideDialog().focus(),e.addBookmark()}}}),l=k.div,m=a('[name="rows"]',l).val(3),n=a('[name="cols"]',l).val(2),o=a('[name="width"]',l).val(100),p=a('[name="height"]',l),q=a('[name="widthType"]',l),r=a('[name="heightType"]',l),s=a('[name="padding"]',l).val(2),t=a('[name="spacing"]',l).val(0),u=a('[name="align"]',l),v=a('[name="border"]',l).val(1),w=a(".ke-input-color",l);c(l,w.eq(0)),c(l,w.eq(1)),b(w.eq(0),"#000000"),b(w.eq(1),""),m[0].focus(),m[0].select();var x;if(!d&&(x=e.plugin.getSelectedTable())){m.val(x[0].rows.length),n.val(x[0].rows.length>0?x[0].rows[0].cells.length:0),m.attr("disabled",!0),n.attr("disabled",!0);var y,z=x[0].style.width||x[0].width,A=x[0].style.height||x[0].height;void 0!==z&&(y=/^(\d+)((?:px|%)*)$/.exec(z))?(o.val(y[1]),q.val(y[2])):o.val(""),void 0!==A&&(y=/^(\d+)((?:px|%)*)$/.exec(A))&&(p.val(y[1]),r.val(y[2])),s.val(x[0].cellPadding||""),t.val(x[0].cellSpacing||""),u.val(x[0].align||""),v.val(void 0===x[0].border?"":x[0].border),b(w.eq(0),a.toHex(x.attr("borderColor")||"")),b(w.eq(1),a.toHex(x[0].style.backgroundColor||x[0].bgColor||"")),o[0].focus(),o[0].select()}},cellprop:function(){var d=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+g.size+"</label>",g.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+g.percent+"</option>",'<option value="px">'+g.px+"</option>","</select> &nbsp; ",g.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+g.percent+"</option>",'<option value="px">'+g.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+g.align+"</label>",g.textAlign+' <select id="keAlign" name="textAlign">','<option value="">'+g.alignDefault+"</option>",'<option value="left">'+g.alignLeft+"</option>",'<option value="center">'+g.alignCenter+"</option>",'<option value="right">'+g.alignRight+"</option>","</select> ",g.verticalAlign+' <select name="verticalAlign">','<option value="">'+g.alignDefault+"</option>",'<option value="top">'+g.alignTop+"</option>",'<option value="middle">'+g.alignMiddle+"</option>",'<option value="bottom">'+g.alignBottom+"</option>",'<option value="baseline">'+g.alignBaseline+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+g.border+"</label>",g.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',g.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+g.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),h=e.cmd.range.createBookmark(),i=e.createDialog({name:f,width:500,title:e.lang("tablecell"),body:d,beforeRemove:function(){t.unbind()},yesBtn:{name:e.lang("yes"),click:function(b){var c=k.val(),d=l.val(),f=m.val(),g=n.val(),i=(o.val(),p.val(),q.val()),j=r.val(),u=s.val(),w=a(t[0]).html()||"",x=a(t[1]).html()||"";return/^\d*$/.test(c)?/^\d*$/.test(d)?/^\d*$/.test(u)?(v.css({width:""!==c?c+f:"",height:""!==d?d+g:"","background-color":x,"text-align":i,"vertical-align":j,"border-width":u,"border-style":""!==u?"solid":"","border-color":w}),e.hideDialog().focus(),e.cmd.range.moveToBookmark(h),e.cmd.select(),void e.addBookmark()):(alert(e.lang("invalidBorder")),void s[0].focus()):(alert(e.lang("invalidHeight")),void l[0].focus()):(alert(e.lang("invalidWidth")),void k[0].focus())}}}),j=i.div,k=a('[name="width"]',j).val(100),l=a('[name="height"]',j),m=a('[name="widthType"]',j),n=a('[name="heightType"]',j),o=a('[name="padding"]',j).val(2),p=a('[name="spacing"]',j).val(0),q=a('[name="textAlign"]',j),r=a('[name="verticalAlign"]',j),s=a('[name="border"]',j).val(1),t=a(".ke-input-color",j);c(j,t.eq(0)),c(j,t.eq(1)),b(t.eq(0),"#000000"),b(t.eq(1),""),k[0].focus(),k[0].select();var u,v=e.plugin.getSelectedCell(),w=v[0].style.width||v[0].width||"",x=v[0].style.height||v[0].height||"";(u=/^(\d+)((?:px|%)*)$/.exec(w))?(k.val(u[1]),m.val(u[2])):k.val(""),(u=/^(\d+)((?:px|%)*)$/.exec(x))&&(l.val(u[1]),n.val(u[2])),q.val(v[0].style.textAlign||""),r.val(v[0].style.verticalAlign||"");var y=v[0].style.borderWidth||"";y&&(y=parseInt(y)),s.val(y),b(t.eq(0),a.toHex(v[0].style.borderColor||"")),b(t.eq(1),a.toHex(v[0].style.backgroundColor||"")),k[0].focus(),k[0].select()},insert:function(){this.prop(!0)},"delete":function(){var a=e.plugin.getSelectedTable();e.cmd.range.setStartBefore(a[0]).collapse(!0),e.cmd.select(),a.remove(),e.addBookmark()},colinsert:function(b){var c=e.plugin.getSelectedTable()[0],f=e.plugin.getSelectedRow()[0],g=e.plugin.getSelectedCell()[0],h=g.cellIndex+b;h+=c.rows[0].cells.length-f.cells.length;for(var i=0,j=c.rows.length;j>i;i++){var k=c.rows[i],l=k.insertCell(h);l.innerHTML=a.IE?"":"<br />",h=d(c,k,l)}e.cmd.range.selectNodeContents(g).collapse(!0),e.cmd.select(),e.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(b){var c=e.plugin.getSelectedTable()[0],d=e.plugin.getSelectedRow()[0],f=e.plugin.getSelectedCell()[0],g=d.rowIndex;1===b&&(g=d.rowIndex+(f.rowSpan-1)+b);for(var h=c.insertRow(g),i=0,j=d.cells.length;j>i;i++){d.cells[i].rowSpan>1&&(j-=d.cells[i].rowSpan-1);var k=h.insertCell(i);1===b&&d.cells[i].colSpan>1&&(k.colSpan=d.cells[i].colSpan),k.innerHTML=a.IE?"":"<br />"}for(var l=g;l>=0;l--){var m=c.rows[l].cells;if(m.length>i){for(var n=f.cellIndex;n>=0;n--)m[n].rowSpan>1&&(m[n].rowSpan+=1);break}}e.cmd.range.selectNodeContents(f).collapse(!0),e.cmd.select(),e.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var a=e.plugin.getSelectedTable()[0],b=e.plugin.getSelectedRow()[0],c=e.plugin.getSelectedCell()[0],d=b.rowIndex,f=d+c.rowSpan,g=a.rows[f];if(!(a.rows.length<=f)){var h=c.cellIndex;if(!(g.cells.length<=h)){var i=g.cells[h];c.colSpan===i.colSpan&&(c.rowSpan+=i.rowSpan,g.deleteCell(h),e.cmd.range.selectNodeContents(c).collapse(!0),e.cmd.select(),e.addBookmark())}}},colmerge:function(){var a=(e.plugin.getSelectedTable()[0],e.plugin.getSelectedRow()[0]),b=e.plugin.getSelectedCell()[0],c=(a.rowIndex,b.cellIndex),d=c+1;if(!(a.cells.length<=d)){var f=a.cells[d];b.rowSpan===f.rowSpan&&(b.colSpan+=f.colSpan,a.deleteCell(d),e.cmd.range.selectNodeContents(b).collapse(!0),e.cmd.select(),e.addBookmark())}},rowsplit:function(){var b=e.plugin.getSelectedTable()[0],c=e.plugin.getSelectedRow()[0],f=e.plugin.getSelectedCell()[0],g=c.rowIndex;if(1!==f.rowSpan){for(var h=d(b,c,f),i=1,j=f.rowSpan;j>i;i++){var k=b.rows[g+i],l=k.insertCell(h);f.colSpan>1&&(l.colSpan=f.colSpan),l.innerHTML=a.IE?"":"<br />",h=d(b,k,l)}a(f).removeAttr("rowSpan"),e.cmd.range.selectNodeContents(f).collapse(!0),e.cmd.select(),e.addBookmark()}},colsplit:function(){var b=(e.plugin.getSelectedTable()[0],e.plugin.getSelectedRow()[0]),c=e.plugin.getSelectedCell()[0],d=c.cellIndex;if(1!==c.colSpan){for(var f=1,g=c.colSpan;g>f;f++){var h=b.insertCell(d+f);c.rowSpan>1&&(h.rowSpan=c.rowSpan),h.innerHTML=a.IE?"":"<br />"}a(c).removeAttr("colSpan"),e.cmd.range.selectNodeContents(c).collapse(!0),e.cmd.select(),e.addBookmark()}},coldelete:function(){for(var b=e.plugin.getSelectedTable()[0],c=e.plugin.getSelectedRow()[0],d=e.plugin.getSelectedCell()[0],f=d.cellIndex,g=0,h=b.rows.length;h>g;g++){var i=b.rows[g],j=i.cells[f];j.colSpan>1?(j.colSpan-=1,1===j.colSpan&&a(j).removeAttr("colSpan")):i.deleteCell(f),j.rowSpan>1&&(g+=j.rowSpan-1)}0===c.cells.length?(e.cmd.range.setStartBefore(b).collapse(!0),e.cmd.select(),a(b).remove()):e.cmd.selection(!0),e.addBookmark()},rowdelete:function(){for(var b=e.plugin.getSelectedTable()[0],c=e.plugin.getSelectedRow()[0],d=e.plugin.getSelectedCell()[0],f=c.rowIndex,g=d.rowSpan-1;g>=0;g--)b.deleteRow(f+g);0===b.rows.length?(e.cmd.range.setStartBefore(b).collapse(!0),e.cmd.select(),a(b).remove()):e.cmd.selection(!0),e.addBookmark()}},e.clickToolbar(f,e.plugin.table.prop)}),KindEditor.plugin("template",function(a){var b=this,c="template",d=(b.lang(c+"."),b.pluginsPath+c+"/html/",a.undef(b.templates,a.Templates));b.clickToolbar(c,function(){var e=b.lang(c+"."),f=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',e.selectTemplate+" <select>"];a.each(d,function(a,b){f.push("<option value='"+b.content+"'>"+b.name+"</option>")}),hc=[f.join(""),"</select></div>",'<div class="ke-right">','<input type="checkbox" id="keReplaceFlag" name="replaceFlag" value="1" /> <label for="keReplaceFlag">'+e.replaceContent+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-temp-preview" style="width:518px;height:260px;background-color:#FFF;padding: 12px;overflow:auto;border-color: #848484 #E0E0E0 #E0E0E0 #848484;border-style: solid;border-width: 1px;"></div>',"</div>"].join("");var g=b.createDialog({name:c,width:560,title:b.lang(c),body:hc,yesBtn:{name:b.lang("yes"),click:function(a){b[i[0].checked?"html":"insertHtml"](h.val()).hideDialog().focus()}}}),h=a("select",g.div),i=a('[name="replaceFlag"]',g.div),j=a(".ke-temp-preview",g.div);i[0].checked=!1,j.html(h.val()),h.change(function(){j.html(this.value)})})}),KindEditor.plugin("wordpaste",function(a){var b=this,c="wordpaste";b.clickToolbar(c,function(){var d=b.lang(c+"."),e='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+d.comment+'</div><iframe class="ke-textarea" frameborder="0" style="width:518px;height:260px;"></iframe></div>',f=b.createDialog({name:c,width:560,title:b.lang(c),body:e,yesBtn:{name:b.lang("yes"),click:function(c){var d=i.body.innerHTML;d=a.clearMsWord(d,b.filterMode?b.htmlTags:a.options.htmlTags),b.insertHtml(d).hideDialog().focus()}}}),g=f.div,h=a("iframe",g),i=a.iframeDoc(h);a.IE||(i.designMode="on"),i.open(),i.write("<!doctype html><html><head><title>WordPaste</title></head>"),i.write('<body style="background-color:#FFF;font-size:12px;margin:2px;">'),a.IE||i.write("<br />"),i.write("</body></html>"),i.close(),a.IE&&(i.body.contentEditable="true"),h[0].contentWindow.focus()})}),KindEditor.plugin("fixtoolbar",function(a){function b(){var b=a(".ke-toolbar"),c=a(b).parent();a(".ke-toolbar").width();a(window).bind("resize",function(){b.css("width",a(c).width()-2+"px")}),b.css("width",a(c).width()+"px"),a(e).bind("scroll",function(){var a=c.pos().y,d=e.pos().y;d>=a?(b.css("position","fixed"),b.css("top",d+"px"),b.css("border-top","1px solid #ccc")):(b.css("position","static"),b.css("top","auto"),b.css("border-top","none"))})}var c=this,d=a("body");if(c.fixToolBar){c.fixToolBarWatchRef&&(d=a(c.fixToolBarWatchRef));var e=a(d);return e.length<1?void console.error("fixToolBarWatchRef can not be null"):void(c.isCreated?b():c.afterCreate(b))}}),KindEditor.lang({source:"HTML代码",preview:"预览",undo:"后退(Ctrl+Z)",redo:"前进(Ctrl+Y)",cut:"剪切(Ctrl+X)",copy:"复制(Ctrl+C)",paste:"粘贴(Ctrl+V)",plainpaste:"粘贴为无格式文本",wordpaste:"从Word粘贴",selectall:"全选(Ctrl+A)",justifyleft:"左对齐",justifycenter:"居中",justifyright:"右对齐",justifyfull:"两端对齐",insertorderedlist:"编号",insertunorderedlist:"项目符号",indent:"增加缩进",outdent:"减少缩进",subscript:"下标",quote:"引用",superscript:"上标",formatblock:"段落",fontname:"字体",fontsize:"文字大小",forecolor:"文字颜色",hilitecolor:"文字背景",bold:"粗体(Ctrl+B)",italic:"斜体(Ctrl+I)",underline:"下划线(Ctrl+U)",strikethrough:"删除线",removeformat:"删除格式",image:"图片",multiimage:"批量图片上传",flash:"Flash",media:"视音频",table:"表格",tablecell:"单元格",hr:"插入横线",emoticons:"插入表情",symbols:"特殊字符",link:"超级链接",unlink:"取消超级链接",fullscreen:"全屏显示",about:"关于",print:"打印(Ctrl+P)",filemanager:"文件空间",code:"插入程序代码",map:"Google地图",baidumap:"百度地图",lineheight:"行距",clearhtml:"清理HTML代码",pagebreak:"插入分页符",quickformat:"一键排版",insertfile:"插入文件",template:"插入模板",anchor:"锚点",yes:"确定",no:"取消",close:"关闭",editImage:"图片属性",deleteImage:"删除图片",editFlash:"Flash属性",deleteFlash:"删除Flash",editMedia:"视音频属性",deleteMedia:"删除视音频",editLink:"超级链接属性",deleteLink:"取消超级链接",editAnchor:"锚点属性",deleteAnchor:"删除锚点",tableprop:"表格属性",tablecellprop:"单元格属性",tableinsert:"插入表格",tabledelete:"删除表格",tablecolinsertleft:"左侧插入列",tablecolinsertright:"右侧插入列",tablerowinsertabove:"上方插入行",tablerowinsertbelow:"下方插入行",tablerowmerge:"向下合并单元格",tablecolmerge:"向右合并单元格",tablerowsplit:"拆分行",tablecolsplit:"拆分列",tablecoldelete:"删除列",tablerowdelete:"删除行",noColor:"无颜色",pleaseSelectFile:"请选择文件。",invalidImg:"请输入有效的URL地址。\n只允许jpg,gif,bmp,png格式。",invalidMedia:"请输入有效的URL地址。\n只允许swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb格式。",invalidWidth:"宽度必须为数字。",invalidHeight:"高度必须为数字。",invalidBorder:"边框必须为数字。",invalidUrl:"请输入有效的URL地址。",invalidRows:"行数为必选项，只允许输入大于0的数字。",invalidCols:"列数为必选项，只允许输入大于0的数字。",invalidPadding:"边距必须为数字。",invalidSpacing:"间距必须为数字。",invalidJson:"服务器发生故障。",uploadSuccess:"上传成功。",cutError:"您的浏览器安全设置不允许使用剪切操作，请使用快捷键(Ctrl+X)来完成。",copyError:"您的浏览器安全设置不允许使用复制操作，请使用快捷键(Ctrl+C)来完成。",pasteError:"您的浏览器安全设置不允许使用粘贴操作，请使用快捷键(Ctrl+V)来完成。",ajaxLoading:"加载中，请稍候 ...",uploadLoading:"上传中，请稍候 ...",uploadError:"上传错误","plainpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","wordpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","code.pleaseInput":"请输入程序代码。","link.url":"URL","link.linkType":"打开类型","link.newWindow":"新窗口","link.selfWindow":"当前窗口","flash.url":"URL","flash.width":"宽度","flash.height":"高度","flash.upload":"上传","flash.viewServer":"文件空间","media.url":"URL","media.width":"宽度","media.height":"高度","media.autostart":"自动播放","media.upload":"上传","media.viewServer":"文件空间","image.remoteImage":"网络图片","image.localImage":"本地上传","image.remoteUrl":"图片地址","image.localUrl":"上传文件","image.size":"图片大小","image.width":"宽","image.height":"高","image.resetSize":"重置大小","image.align":"对齐方式","image.defaultAlign":"默认方式","image.leftAlign":"左对齐","image.rightAlign":"右对齐","image.imgTitle":"图片说明","image.upload":"浏览...","image.viewServer":"图片空间","multiimage.uploadDesc":"允许用户同时上传<%=uploadLimit%>张图片，单张图片容量不超过<%=sizeLimit%>","multiimage.startUpload":"开始上传","multiimage.clearAll":"全部清空","multiimage.insertAll":"全部插入","multiimage.queueLimitExceeded":"文件数量超过限制。","multiimage.fileExceedsSizeLimit":"文件大小超过限制。","multiimage.zeroByteFile":"无法上传空文件。","multiimage.invalidFiletype":"文件类型不正确。","multiimage.unknownError":"发生异常，无法上传。","multiimage.pending":"等待上传","multiimage.uploadError":"上传失败","filemanager.emptyFolder":"空文件夹","filemanager.moveup":"移到上一级文件夹","filemanager.viewType":"显示方式：","filemanager.viewImage":"缩略图","filemanager.listImage":"详细信息","filemanager.orderType":"排序方式：","filemanager.fileName":"名称","filemanager.fileSize":"大小","filemanager.fileType":"类型","insertfile.url":"URL","insertfile.title":"文件说明","insertfile.upload":"上传","insertfile.viewServer":"文件空间","table.cells":"单元格数","table.rows":"行数","table.cols":"列数","table.size":"大小","table.width":"宽度","table.height":"高度","table.percent":"%","table.px":"px","table.space":"边距间距","table.padding":"边距","table.spacing":"间距","table.align":"对齐方式","table.textAlign":"水平对齐","table.verticalAlign":"垂直对齐","table.alignDefault":"默认","table.alignLeft":"左对齐","table.alignCenter":"居中","table.alignRight":"右对齐","table.alignTop":"顶部","table.alignMiddle":"中部","table.alignBottom":"底部","table.alignBaseline":"基线","table.border":"边框","table.borderWidth":"边框","table.borderColor":"颜色","table.backgroundColor":"背景颜色","map.address":"地址: ","map.search":"搜索","baidumap.address":"地址: ","baidumap.search":"搜索","baidumap.insertDynamicMap":"插入动态地图","anchor.name":"锚点名称","formatblock.formatBlock":{h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",p:"正 文"},"fontname.fontName":{SimSun:"宋体",NSimSun:"新宋体",FangSong_GB2312:"仿宋_GB2312",KaiTi_GB2312:"楷体_GB2312",SimHei:"黑体","Microsoft YaHei":"微软雅黑",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"单倍行距"},{1.5:"1.5倍行距"},{2:"2倍行距"},{2.5:"2.5倍行距"},{3:"3倍行距"}],"template.selectTemplate":"可选模板","template.replaceContent":"替换当前内容","template.fileList":{"1.html":"图片和文字","2.html":"表格","3.html":"项目编号"}},"zh-CN"),KindEditor.options.langType="zh-CN",KindEditor});