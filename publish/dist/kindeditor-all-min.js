/*
mhalo.kindeditor 4.4.22 (2024-11-08), 
Copyright (C) kindeditor.net, Licence: http://kindeditor.net/license.php 
*/
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):self.KindEditor=e()}(function(){var i,r,c,d,z,o,P,H;function j(e,t,n){2===arguments.length&&(n=t,t=null),z(t||[],function(){o(e,n,arguments)})}(e=window).KindEditor&&e.KindEditor,i=window,r=function(s){B=(r=[]).concat,o=r.filter,u=r.slice,h=s.document,p={},t={},O={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,U=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,P=/^(?:body|html)$/i,H=/([A-Z])/g,j=["val","css","html","text","data","width","height","offset"],e=h.createElement("table"),q=h.createElement("tr"),W={tr:h.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:q,th:q,"*":h.createElement("div")},$=/^[\w-]*$/,K=(V={}).toString,m={},G=h.createElement("div"),g={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},v=Array.isArray||function(e){return e instanceof Array},m.matches=function(e,t){var n,i;return!(!t||!e||1!==e.nodeType)&&((n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?n.call(e,t):((i=!(n=e.parentNode))&&(n=G).appendChild(e),n=~m.qsa(n,t).indexOf(e),i&&G.removeChild(e),n))},l=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},n=function(n){return o.call(n,function(e,t){return n.indexOf(e)==t})},m.fragment=function(e,t,n){var i,r,o;return(i=U.test(e)?d(h.createElement(RegExp.$1)):i)||(e.replace&&(e=e.replace(z,"<$1></$2>")),t===c&&(t=f.test(e)&&RegExp.$1),(o=W[t=t in W?t:"*"]).innerHTML=""+e,i=d.each(u.call(o.childNodes),function(){o.removeChild(this)})),M(n)&&(r=d(i),d.each(n,function(e,t){-1<j.indexOf(e)?r[e](t):r.attr(e,t)})),i},m.Z=function(e,t){return new ce(e,t)},m.isZ=function(e){return e instanceof m.Z},m.init=function(e,t){var n,i;if(!e)return m.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&f.test(e))n=m.fragment(e,RegExp.$1,t),e=null;else{if(t!==c)return d(t).find(e);n=m.qsa(h,e)}else{if(D(e))return d(h).ready(e);if(m.isZ(e))return e;if(v(e))i=e,n=o.call(i,function(e){return null!=e});else if(N(e))n=[e],e=null;else if(f.test(e))n=m.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==c)return d(t).find(e);n=m.qsa(h,e)}}return m.Z(n,e)},(d=function(e,t){return m.init(e,t)}).extend=function(t){var n,e=u.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach(function(e){!function e(t,n,i){for(a in n)i&&(M(n[a])||v(n[a]))?(M(n[a])&&!M(t[a])&&(t[a]={}),v(n[a])&&!v(t[a])&&(t[a]=[]),e(t[a],n[a],i)):n[a]!==c&&(t[a]=n[a])}(t,e,n)}),t},m.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],o=i||r?t.slice(1):t,a=$.test(o);return e.getElementById&&a&&i?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(a&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},d.contains=h.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},d.type=E,d.isFunction=D,d.isWindow=ie,d.isArray=v,d.isPlainObject=M,d.isEmptyObject=function(e){for(var t in e)return!1;return!0},d.isNumeric=function(e){var t=Number(e),n=_typeof(e);return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},d.inArray=function(e,t,n){return r.indexOf.call(t,e,n)},d.camelCase=l,d.trim=function(e){return null==e?"":String.prototype.trim.call(e)},d.uuid=0,d.support={},d.expr={},d.noop=function(){},d.map=function(e,t){var n,i,r,o,a=[];if(oe(e))for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&a.push(n);else for(r in e)n=t(e[r],r),null!=n&&a.push(n);return 0<(o=a).length?d.fn.concat.apply([],o):o},d.each=function(e,t){var n,i;if(oe(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},d.grep=function(e,t){return o.call(e,t)},s.JSON&&(d.parseJSON=JSON.parse),d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()}),d.fn={constructor:m.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=m.isZ(e=arguments[n])?e.toArray():e;return B.apply(m.isZ(this)?this.toArray():this,t)},map:function(n){return d(d.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return d(u.apply(this,arguments))},ready:function(t){var e;return"complete"===h.readyState||"loading"!==h.readyState&&!h.documentElement.doScroll?setTimeout(function(){t(d)},0):(h.addEventListener("DOMContentLoaded",e=function e(){h.removeEventListener("DOMContentLoaded",e,!1),s.removeEventListener("load",e,!1),t(d)},!1),s.addEventListener("load",e,!1)),this},get:function(e){return e===c?u.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return r.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},filter:function(t){return D(t)?this.not(this.not(t)):d(o.call(this,function(e){return m.matches(e,t)}))},add:function(e,t){return d(n(this.concat(d(e,t))))},is:function(e){return"string"==typeof e?0<this.length&&m.matches(this[0],e):e&&this.selector==e.selector},not:function(t){var n,i=[];return D(t)&&t.call!==c?this.each(function(e){t.call(this,e)||i.push(this)}):(n="string"==typeof t?this.filter(t):oe(t)&&D(t.item)?u.call(t):d(t),this.forEach(function(e){n.indexOf(e)<0&&i.push(e)})),d(i)},has:function(e){return this.filter(function(){return N(e)?d.contains(this,e):d(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!N(e)?e:d(e)},last:function(){var e=this[this.length-1];return e&&!N(e)?e:d(e)},find:function(e){var n=this;return e?"object"==_typeof(e)?d(e).filter(function(){var t=this;return r.some.call(n,function(e){return d.contains(e,t)})}):1==this.length?d(m.qsa(this[0],e)):this.map(function(){return m.qsa(this,e)}):d()},closest:function(n,i){var r=[],o="object"==_typeof(n)&&d(n);return this.each(function(e,t){for(;t&&!(o?0<=o.indexOf(t):m.matches(t,n));)t=t!==i&&!re(t)&&t.parentNode;t&&r.indexOf(t)<0&&r.push(t)}),d(r)},parents:function(e){for(var t=[],n=this;0<n.length;)n=d.map(n,function(e){return(e=e.parentNode)&&!re(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return de(t,e)},parent:function(e){return de(n(this.pluck("parentNode")),e)},children:function(e){return de(this.map(function(){return se(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(e){return de(this.map(function(e,t){return o.call(se(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return d.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,p[e]||(t=h.createElement(e),h.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),p[e]=n="none"==n?"block":n),p[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n,i,r=D(t);return this[0]&&!r&&(n=d(t).get(0),i=n.parentNode||1<this.length),this.each(function(e){d(this).wrapAll(r?t.call(this,e):i?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){d(this[0]).before(e=d(e));for(var t;(t=e.children()).length;)e=t.first();d(e).append(this)}return this},wrapInner:function(i){var r=D(i);return this.each(function(e){var t=d(this),n=t.contents(),e=r?i.call(this,e):i;n.length?n.wrapAll(e):t.append(e)})},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=d(this);(t===c?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return d(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return d(this.pluck("nextElementSibling")).filter(e||"*")},html:function(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;d(this).empty().append(I(this,n,e,t))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){e=I(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(N(t))for(a in t)ue(this,a,t[a]);else ue(this,t,I(this,n,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:c},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){ue(this,e)},this)})},prop:function(t,n){return"string"!=typeof(t=g[t]||t)||1 in arguments?this.each(function(e){if(N(t))for(a in t)this[g[a]||a]=t[a];else this[t]=I(this,n,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=g[e]||e,this.each(function(){delete this[e]})},data:function(e,t){e="data-"+e.replace(H,"-$1").toLowerCase(),t=1 in arguments?this.attr(e,t):this.attr(e);return null!==t?he(t):c},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=I(this,t,e,this.value)})):this[0]&&(this[0].multiple?d(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(i){var e;return i?this.each(function(e){var t=d(this),e=I(this,i,e,t.offset()),n=t.offsetParent().offset(),e={top:e.top-n.top,left:e.left-n.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)}):this.length?h.documentElement===this[0]||d.contains(h.documentElement,this[0])?{left:(e=this[0].getBoundingClientRect()).left+s.pageXOffset,top:e.top+s.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}:{top:0,left:0}:null},css:function(e,t){if(arguments.length<2){var n,i,r=this[0];if("string"==typeof e)return r?r.style[l(e)]||getComputedStyle(r,"").getPropertyValue(e):void 0;if(v(e))return r?(n={},i=getComputedStyle(r,""),d.each(e,function(e,t){n[t]=r.style[l(t)]||i.getPropertyValue(t)}),n):void 0}var o="";if("string"==E(e))t||0===t?o=A(e)+":"+le(e,t):this.each(function(){this.style.removeProperty(A(e))});else for(a in e)e[a]||0===e[a]?o+=A(a)+":"+le(a,e[a])+";":this.each(function(){this.style.removeProperty(A(a))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(d(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&r.some.call(this,function(e){return this.test(R(e))},ae(e))},addClass:function(n){return n?this.each(function(e){var t;"className"in this&&(i=[],t=R(this),I(this,n,e,t).split(/\s+/g).forEach(function(e){d(this).hasClass(e)||i.push(e)},this),i.length)&&R(this,t+(t?" ":"")+i.join(" "))}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===c)return R(this,"");i=R(this),I(this,t,e,i).split(/\s+/g).forEach(function(e){i=i.replace(ae(e)," ")}),R(this,i.trim())}})},toggleClass:function(n,i){return n?this.each(function(e){var t=d(this);I(this,n,e,R(this)).split(/\s+/g).forEach(function(e){(i===c?!t.hasClass(e):i)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){var t;if(this.length)return t="scrollTop"in this[0],e===c?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})},scrollLeft:function(e){var t;if(this.length)return t="scrollLeft"in this[0],e===c?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})},position:function(){var e,t,n,i;if(this.length)return e=this[0],t=this.offsetParent(),n=this.offset(),i=P.test(t[0].nodeName)?{top:0,left:0}:t.offset(),n.top-=parseFloat(d(e).css("margin-top"))||0,n.left-=parseFloat(d(e).css("margin-left"))||0,i.top+=parseFloat(d(t[0]).css("border-top-width"))||0,i.left+=parseFloat(d(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||h.body;e&&!P.test(e.nodeName)&&"static"==d(e).css("position");)e=e.offsetParent;return e})}},d.fn.detach=d.fn.remove,["width","height"].forEach(function(i){var r=i.replace(/./,function(e){return e[0].toUpperCase()});d.fn[i]=function(t){var e,n=this[0];return t===c?ie(n)?n["inner"+r]:re(n)?n.documentElement["scroll"+r]:(e=this.offset())&&e[i]:this.each(function(e){(n=d(this)).css(i,I(this,t,e,n[i]()))})}}),["after","prepend","before","append"].forEach(function(t,a){var l=a%2;d.fn[t]=function(){var n,i,r=d.map(arguments,function(e){var t=[];return"array"==(n=E(e))?(e.forEach(function(e){return e.nodeType!==c?t.push(e):d.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(m.fragment(e)))}),t):"object"==n||null==e?e:m.fragment(e)}),o=1<this.length;return r.length<1?this:this.each(function(e,t){i=l?t:t.parentNode,t=0==a?t.nextSibling:1==a?t.firstChild:2==a?t:null;var n=d.contains(h.documentElement,i);r.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!i)return d(e).remove();i.insertBefore(e,t),n&&function e(t,n){n(t);for(var i=0,r=t.childNodes.length;i<r;i++)e(t.childNodes[i],n)}(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:s).eval.call(t,e.innerHTML)})})})},d.fn[l?t+"To":"insert"+(a?"Before":"After")]=function(e){return d(e)[t](this),this}}),m.Z.prototype=ce.prototype=d.fn,m.uniq=n,m.deserializeValue=he,d.zepto=m;var c,a,d,i,l,n,r,B,o,u,h,p,t,O,f,U,z,P,H,j,q,W,$,V,K,m,G,g,v,b,y,Q,k,w,Y,x,C,T,_,X,S,Z,J,ee,te,ne,e=d;function E(e){return null==e?String(e):V[K.call(e)]||"object"}function D(e){return"function"==E(e)}function ie(e){return null!=e&&e==e.window}function re(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function N(e){return"object"==E(e)}function M(e){return N(e)&&!ie(e)&&Object.getPrototypeOf(e)==Object.prototype}function oe(e){var t=!!e&&"length"in e&&e.length,n=d.type(e);return"function"!=n&&!ie(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function A(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function ae(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function le(e,t){return"number"!=typeof t||O[A(e)]?t:t+"px"}function se(e){return"children"in e?u.call(e.children):d.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function ce(e,t){for(var n=e?e.length:0,i=0;i<n;i++)this[i]=e[i];this.length=n,this.selector=t||""}function de(e,t){return null==t?d(e):d(e).filter(t)}function I(e,t,n,i){return D(t)?t.call(e,n,i):t}function ue(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function R(e,t){var n=e.className||"",i=n&&n.baseVal!==c;return t===c?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function he(t){try{return t&&("true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?d.parseJSON(t):t))}catch(e){return t}}return s.Zepto=e,void 0===s.$&&(s.$=e),k=e,Y=1,x=Array.prototype.slice,C=k.isFunction,T={},_={},X="onfocusin"in s,S={focus:"focusin",blur:"focusout"},Z={mouseenter:"mouseover",mouseleave:"mouseout"},_.click=_.mousedown=_.mouseup=_.mousemove="MouseEvents",k.event={add:be,remove:ye},k.proxy=function(e,t){var n,i=2 in arguments&&x.call(arguments,2);if(C(e))return(n=function(){return e.apply(t,i?i.concat(x.call(arguments)):arguments)})._zid=L(e),n;if(F(t))return i?(i.unshift(e[t],e),k.proxy.apply(null,i)):k.proxy(e[t],e);throw new TypeError("expected function")},k.fn.bind=function(e,t,n){return this.on(e,t,n)},k.fn.unbind=function(e,t){return this.off(e,t)},k.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)},J=function(){return!0},ee=function(){return!1},te=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,ne={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},k.fn.delegate=function(e,t,n){return this.on(t,e,n)},k.fn.undelegate=function(e,t,n){return this.off(t,e,n)},k.fn.live=function(e,t){return k(document.body).delegate(this.selector,e,t),this},k.fn.die=function(e,t){return k(document.body).undelegate(this.selector,e,t),this},k.fn.on=function(t,i,r,o,a){var l,s,n=this;return t&&!F(t)?(k.each(t,function(e,t){n.on(e,i,r,t,a)}),n):(F(i)||C(o)||!1===o||(o=r,r=i,i=w),o!==w&&!1!==r||(o=r,r=w),!1===o&&(o=ee),n.each(function(e,n){a&&(l=function(e){return ye(n,e.type,o),o.apply(this,arguments)}),be(n,t,o,r,i,(s=i?function(e){var t=k(e.target).closest(i,n).get(0);return t&&t!==n?(e=k.extend(we(e),{currentTarget:t,liveFired:n}),(l||o).apply(t,[e].concat(x.call(arguments,1)))):void 0}:s)||l)}))},k.fn.off=function(e,n,t){var i=this;return e&&!F(e)?(k.each(e,function(e,t){i.off(e,n,t)}),i):(F(n)||C(t)||!1===t||(t=n,n=w),!1===t&&(t=ee),i.each(function(){ye(this,e,t,n)}))},k.fn.trigger=function(e,t){return(e=F(e)||k.isPlainObject(e)?k.Event(e):ke(e))._args=t,this.each(function(){e.type in S&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):k(this).triggerHandler(e,t)})},k.fn.triggerHandler=function(n,i){var r,o;return this.each(function(e,t){(r=we(F(n)?k.Event(n):n))._args=i,r.target=t,k.each(fe(t,n.type||n),function(e,t){return o=t.proxy(r),!r.isImmediatePropagationStopped()&&void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){k.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),k.Event=function(e,t){F(e)||(e=(t=e).type);var n=document.createEvent(_[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),ke(n)},y=e,Q=Array.prototype.slice,y.when=function(e){function t(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?Q.call(arguments):e,i===r?c.notifyWith(n,i):--s||c.resolveWith(n,i)}}var r,n,i,o=Q.call(arguments),a=o.length,l=0,s=1!==a||e&&y.isFunction(e.promise)?a:0,c=1===s?e:pe();if(1<a)for(r=new Array(a),n=new Array(a),i=new Array(a);l<a;++l)o[l]&&y.isFunction(o[l].promise)?o[l].promise().done(t(l,i,o)).fail(c.reject).progress(t(l,n,r)):--s;return s||c.resolveWith(i,o),c.promise()},y.Deferred=pe,(b=e).Callbacks=function(i){i=b.extend({},i);function n(e){for(t=i.memory&&e,r=!0,s=a||0,a=0,l=c.length,o=!0;c&&s<l;++s)if(!1===c[s].apply(e[0],e[1])&&i.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&n(d.shift()):t?c.length=0:u.disable())}var t,r,o,a,l,s,c=[],d=!i.once&&[],u={add:function(){var e;return c&&(e=c.length,function n(e){b.each(e,function(e,t){"function"==typeof t?i.unique&&u.has(t)||c.push(t):t&&t.length&&"string"!=typeof t&&n(t)})}(arguments),o?l=c.length:t&&(a=e,n(t))),this},remove:function(){return c&&b.each(arguments,function(e,t){for(var n;-1<(n=b.inArray(t,c,n));)c.splice(n,1),o&&(n<=l&&--l,n<=s)&&--s}),this},has:function(e){return!(!c||!(e?-1<b.inArray(e,c):c.length))},empty:function(){return l=c.length=0,this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||u.disable(),this},locked:function(){return!d},fireWith:function(e,t){return!c||r&&!d||(t=[e,(t=t||[]).slice?t.slice():t],o?d.push(t):n(t)),this},fire:function(){return u.fireWith(this,arguments)},fired:function(){return!!r}};return u},e;function pe(e){var o=[["resolve","done",y.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",y.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",y.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return l.done(arguments).fail(arguments),this},then:function(){var t=arguments;return pe(function(r){y.each(o,function(e,n){var i=y.isFunction(t[e])&&t[e];l[n[1]](function(){var e,t=i&&i.apply(this,arguments);t&&y.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):(e=this===a?r.promise():this,t=i?[t]:arguments,r[n[0]+"With"](e,t))})}),t=null}).promise()},promise:function(e){return null!=e?y.extend(e,a):a}},l={};return y.each(o,function(e,t){var n=t[2],i=t[3];a[t[1]]=n.add,i&&n.add(function(){r=i},o[1^e][2].disable,o[2][2].lock),l[t[0]]=function(){return l[t[0]+"With"](this===l?a:this,arguments),this},l[t[0]+"With"]=n.fireWith}),a.promise(l),e&&e.call(l,l),l}function L(e){return e._zid||(e._zid=Y++)}function fe(e,t,n,i){var r,o;return(t=me(t)).ns&&(o=t.ns,r=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(T[L(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||L(e.fn)===L(n))&&(!i||e.sel==i)})}function me(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function ge(e,t){return e.del&&!X&&e.e in S||!!t}function ve(e){return Z[e]||X&&S[e]||e}function be(i,e,r,o,a,l,s){var t=L(i),c=T[t]||(T[t]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return k(document).ready(r);var t=me(e),n=(t.fn=r,t.sel=a,t.e in Z&&(r=function(e){e=e.relatedTarget;return!e||e!==this&&!k.contains(this,e)?t.fn.apply(this,arguments):void 0}),(t.del=l)||r);t.proxy=function(e){var t;if(!(e=ke(e)).isImmediatePropagationStopped())return e.data=o,!1===(t=n.apply(i,e._args==w?[e]:[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),t},t.i=c.length,c.push(t),"addEventListener"in i&&i.addEventListener(ve(t.e),t.proxy,ge(t,s))})}function ye(t,e,n,i,r){var o=L(t);(e||"").split(/\s/).forEach(function(e){fe(t,e,n,i).forEach(function(e){delete T[o][e.i],"removeEventListener"in t&&t.removeEventListener(ve(e.e),e.proxy,ge(e,r))})})}function ke(i,r){if(r||!i.isDefaultPrevented){r=r||i,k.each(ne,function(e,t){var n=r[e];i[e]=function(){return this[t]=J,n&&n.apply(r,arguments)},i[t]=ee});try{i.timeStamp||(i.timeStamp=Date.now())}catch(e){}(r.defaultPrevented!==w?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(i.isDefaultPrevented=J)}return i}function we(e){var t,n={originalEvent:e};for(t in e)te.test(t)||e[t]===w||(n[t]=e[t]);return ke(n,e)}function F(e){return"string"==typeof e}},"function"==typeof define&&define.amd?define(function(){return r(i)}):r(i),c=window,d={},z=function(e,t){var n,i,r;if("string"==typeof e)return P(e);for(n=[],i=e.length,r=0;r<i;r++)n.push(P(e[r]));return t.apply(null,n)},o=function(e,t,n){var i={exports:t};"function"==typeof t&&(n.length||(n=[z,i.exports,i]),void 0!==(t=t.apply(null,n)))&&(i.exports=t),d[e]=i.exports},P=function(e){var t=d[e]||c[e];if(t)return t;throw new Error("`"+e+"` is undefined")},H=c.WebUploader,c.WebUploader=function(e){c.__dollar=e;p=c,e=z,(a=j)("dollar-third",[],function(){var e=p.require,e=p.__dollar||p.jQuery||p.Zepto||e("jquery")||e("zepto");if(e)return e;throw new Error("jQuery or Zepto not found!")}),a("dollar",["dollar-third"],function(e){return e}),a("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),a("promise",["promise-third"],function(e){return e}),a("base",["dollar","promise"],function(o,e){function t(e,t){return function(){return e.apply(t,arguments)}}function n(){}var i,r,a,l,s,c,d,u,h=Function.call;return{version:"0.1.8-alpha",$:o,Deferred:e.Deferred,isPromise:e.isPromise,when:e.when,browser:(e=navigator.userAgent,a={},l=e.match(/WebKit\/([\d.]+)/),s=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),c=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),d=e.match(/Firefox\/([\d.]+)/),u=e.match(/Safari\/([\d.]+)/),e=e.match(/OPR\/([\d.]+)/),l&&(a.webkit=parseFloat(l[1])),s&&(a.chrome=parseFloat(s[1])),c&&(a.ie=parseFloat(c[1])),d&&(a.firefox=parseFloat(d[1])),u&&(a.safari=parseFloat(u[1])),e&&(a.opera=parseFloat(e[1])),a),os:(l=navigator.userAgent,s={},c=l.match(/(?:Android);?[\s\/]+([\d.]+)?/),l=l.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/),c&&(s.android=parseFloat(c[1])),l&&(s.ios=parseFloat(l[1].replace(/_/g,"."))),s),inherits:function(e,t,n){var i,r;return"function"==typeof t?(i=t,t=null):i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},o.extend(!0,i,e,n||{}),i.__super__=e.prototype,i.prototype=(n=e.prototype,Object.create?Object.create(n):((r=function(){}).prototype=n,new r)),t&&o.extend(!0,i.prototype,t),i},noop:n,bindFn:t,log:p.console?t(console.log,console):n,nextTick:function(e){setTimeout(e,1)},slice:(r=[].slice,function(){return h.apply(r,arguments)}),guid:(i=0,function(e){for(var t=(+new Date).toString(32),n=0;n<5;n++)t+=Math.floor(65535*Math.random()).toString(32);return(e||"wu_")+t+(i++).toString(32)}),formatSize:function(e,t,n){var i;for(n=n||["B","K","M","G","TB"];(i=n.shift())&&1024<e;)e/=1024;return("B"===i?e:e.toFixed(t||2))+i}}}),a("mediator",["base"],function(e){function r(e,t,n,i){return a.grep(e,function(e){return!(!e||t&&e.e!==t||n&&e.cb!==n&&e.cb._cb!==n||i&&e.ctx!==i)})}function o(e,n,i){a.each((e||"").split(t),function(e,t){i(t,n)})}function i(e,t){for(var n,i=!1,r=-1,o=e.length;++r<o;)if(!1===(n=e[r]).cb.apply(n.ctx2,t)){i=!0;break}return!i}var a=e.$,l=[].slice,t=/\s+/,n={on:function(e,t,n){var i,r=this;return t&&(i=this._events||(this._events=[]),o(e,t,function(e,t){e={e:e};e.cb=t,e.ctx=n,e.ctx2=n||r,e.id=i.length,i.push(e)})),this},once:function(e,t,i){var r=this;return t&&o(e,t,function(e,t){function n(){return r.off(e,n),t.apply(i||r,arguments)}n._cb=t,r.on(e,n,i)}),r},off:function(e,t,n){var i=this._events;return i&&(e||t||n?o(e,t,function(e,t){a.each(r(i,e,t,n),function(){delete i[this.id]})}):this._events=[]),this},trigger:function(e){var t,n;return this._events&&e?(t=l.call(arguments,1),e=r(this._events,e),n=r(this._events,"all"),i(e,t)&&i(n,arguments)):this}};return a.extend({installTo:function(e){return a.extend(e,n)}},n)}),a("uploader",["base","mediator"],function(e,r){function n(e){this.options=o.extend(!0,{},n.options,e),this._init(this.options)}var o=e.$;return n.options={},r.installTo(n.prototype),o.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),o.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;return 1<arguments.length?void(o.isPlainObject(t)&&o.isPlainObject(n[e])?o.extend(n[e],t):n[e]=t):e?n[e]:n},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numOfInterrupt}:{}},trigger:function(e){var t=[].slice.call(arguments,1),n=this.options,i="on"+e.substring(0,1).toUpperCase()+e.substring(1);return!(!1===r.trigger.apply(this,arguments)||o.isFunction(n[i])&&!1===n[i].apply(this,t)||o.isFunction(this[i])&&!1===this[i].apply(this,t)||!1===r.trigger.apply(r,[this,e].concat(t)))},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n}),a("runtime/runtime",["base","mediator"],function(t,e){function i(e){this.options=o.extend({container:document.body},e),this.uid=t.guid("rt_")}function r(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null}var o=t.$,a={};return o.extend(i.prototype,{getContainer:function(){var e,t=this.options;return this._container||(t=o(t.container||document.body),(e=o(document.createElement("div"))).attr("id","rt_"+this.uid),e.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden",cursor:"pointer",lineHeight:"0"}),t.append(e),t.addClass("webuploader-container"),this._container=e,this._parent=t,e)},init:t.noop,exec:t.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),i.orders="html5,flash",i.addRuntime=function(e,t){a[e]=t},i.hasRuntime=function(e){return!!(e?a[e]:r(a))},i.create=function(e,t){var n;if(o.each((t=t||i.orders).split(/\s*,\s*/g),function(){return a[this]?(n=this,!1):void 0}),n=n||r(a))return new a[n](e);throw new Error("Runtime Error")},e.installTo(i.prototype),i}),a("runtime/client",["base","mediator","runtime/runtime"],function(o,e,a){function t(t,n){var i,e,r=o.Deferred();this.uid=o.guid("client_"),this.runtimeReady=function(e){return r.done(e)},this.connectRuntime=function(e,t){if(i)throw new Error("already connected!");return r.done(t),(i=(i="string"==typeof e&&l.get(e)?l.get(e):i)||l.get(null,n))?(o.$.extend(i.options,e),i.__promise.then(r.resolve),i.__client++):((i=a.create(e,e.runtimeOrder)).__promise=r.promise(),i.once("ready",r.resolve),i.init(),l.add(i),i.__client=1),n&&(i.__standalone=n),i},this.getRuntime=function(){return i},this.disconnectRuntime=function(){i&&(i.__client--,i.__client<=0&&(l.remove(i),delete i.__promise,i.destroy()),i=null)},this.exec=function(){var e;if(i)return e=o.slice(arguments),t&&e.unshift(t),i.exec.apply(this,e)},this.getRuid=function(){return i&&i.uid},this.destroy=(e=this.destroy,function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()})}var l,i;return i={},l={add:function(e){i[e.uid]=e},get:function(e,t){if(e)return i[e];for(var n in i)if(!t||!i[n].__standalone)return i[n];return null},remove:function(e){delete i[e.uid]}},e.installTo(t.prototype),t}),a("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function i(e){(e=this.options=r.extend({},i.options,e)).container=r(e.container),e.container.length&&n.call(this,"DragAndDrop")}var r=e.$;return i.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),a("widgets/widget",["base","uploader"],function(d,e){function i(e){this.owner=e,this.options=e.options}var u=d.$,t=e.prototype._init,n=e.prototype.destroy,h={},o=[];return u.extend(i.prototype,{init:d.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&u.isFunction(this[n[e]])?this[n[e]].apply(this,t):h},request:function(){return this.owner.request.apply(this.owner,arguments)}}),u.extend(e.prototype,{_init:function(){var n=this,i=n._widgets=[],r=n.options.disableWidgets||"";return u.each(o,function(e,t){r&&~r.indexOf(t._name)||i.push(new t(n))}),t.apply(n,arguments)},request:function(e,t,n){var i,r,o=0,a=this._widgets,l=a&&a.length,s=[],c=[];for(t=function(e){var t,n;if(e)return t=e.length,n=u.type(e),1===e.nodeType&&t||"array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&0<t&&t-1 in e)}(t)?t:[t];o<l;o++)(i=a[o].invoke(e,t))!==h&&(d.isPromise(i)?c:s).push(i);return n||c.length?(r=d.when.apply(d,c))[r=r.pipe?"pipe":"then"](function(){var e=d.Deferred(),t=arguments;return 1===t.length&&(t=t[0]),setTimeout(function(){e.resolve(t)},1),e.promise()})[n?r:"done"](n||d.noop):s[0]},destroy:function(){n.apply(this,arguments),this._widgets=null}}),e.register=i.register=function(e,t){var n={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(t=e,u.each(t,function(e){return"_"===e[0]||"name"===e?void("name"===e&&(n.name=t.name)):void(n[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)})):n=u.extend(n,e),t.responseMap=n,(e=d.inherits(i,t))._name=n.name,o.push(e),e},e.unRegister=i.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=o.length;t--;)o[t]._name===e&&o.splice(t,1)},i}),a("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(i,e,r){var o=i.$;return e.options.dnd="",e.register({name:"dnd",init:function(e){var t,n;if(e.dnd&&"html5"===this.request("predict-runtime-type"))return t=this,n=i.Deferred(),e=o.extend({},{disableGlobalDnd:e.disableGlobalDnd,container:e.dnd,accept:e.accept}),this.dnd=e=new r(e),e.once("ready",n.resolve),e.on("drop",function(e){t.request("add-file",[e])}),e.on("accept",function(e){return t.owner.trigger("dndAccept",e)}),e.init(),n.promise()},destroy:function(){this.dnd&&this.dnd.destroy()}})}),a("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function i(e){(e=this.options=r.extend({},e)).container=r(e.container||document.body),n.call(this,"FilePaste")}var r=e.$;return e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),a("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(i,e,r){var o=i.$;return e.register({name:"paste",init:function(e){var t,n;if(e.paste&&"html5"===this.request("predict-runtime-type"))return t=this,n=i.Deferred(),e=o.extend({},{container:e.paste,accept:e.accept}),this.paste=e=new r(e),e.once("ready",n.resolve),e.on("paste",function(e){t.owner.request("add-file",[e])}),e.init(),n.promise()},destroy:function(){this.paste&&this.paste.destroy()}})}),a("lib/blob",["base","runtime/client"],function(e,n){function t(e,t){this.source=t,this.ruid=e,this.size=t.size||0,this.type=!t.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):t.type||"application/octet-stream",n.call(this,"Blob"),this.uid=t.uid||this.uid,e&&this.connectRuntime(e)}return e.inherits(n,{constructor:t,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),t}),a("lib/file",["base","lib/blob"],function(e,i){var r=1,o=/\.([^.]+)$/;return e.inherits(i,function(e,t){var n;this.name=t.name||"untitled"+r++,!(n=o.exec(t.name)?RegExp.$1.toLowerCase():"")&&t.type&&(n=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(t.type)?RegExp.$1.toLowerCase():"",this.name+="."+n),this.ext=n,this.lastModifiedDate=t.lastModifiedDate||t.lastModified&&new Date(t.lastModified).toLocaleString()||(new Date).toLocaleString(),i.apply(this,arguments)})}),a("lib/filepicker",["base","runtime/client","lib/file"],function(e,t,a){function n(e){if((e=this.options=l.extend({},n.options,e)).container=l(e.id),!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=l(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),t.call(this,"FilePicker",!0)}var l=e.$;return n.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file",style:"webuploader-pick"},e.inherits(t,{constructor:n,init:function(){var n=this,i=n.options,r=i.button,o=i.style;o&&r.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":o&&r.addClass("webuploader-pick-hover");break;case"mouseleave":o&&r.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",l.map(t,function(e){return(e=new a(n.getRuid(),e))._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=e.bindFn(this.refresh,this),l(p).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t[0]&&t[0].offsetWidth||t.outerWidth()||t.width(),i=t[0]&&t[0].offsetHeight||t.outerHeight()||t.height(),t=t.offset();n&&i&&e.css({bottom:"auto",right:"auto",width:n+"px",height:i+"px"}).offset(t)},enable:function(){this.options.button.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var e=this.options.button;l(p).off("resize",this._resizeHandler),e.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),n}),a("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(s,e,c){var d=s.$;return d.extend(e.options,{pick:null,accept:null}),e.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addBtn:function(i){var r=this,o=r.options,a=o.accept,l=[];if(i)return d.isPlainObject(i)||(i={id:i}),d(i.id).each(function(){var e=s.Deferred(),t=d.extend({},i,{accept:d.isPlainObject(a)?[a]:a,swf:o.swf,runtimeOrder:o.runtimeOrder,id:this}),n=new c(t);n.once("ready",e.resolve),n.on("select",function(e){r.owner.request("add-file",[e])}),n.on("dialogopen",function(){r.owner.trigger("dialogOpen",n.button)}),n.init(),r.pickers.push(n),l.push(e.promise())}),s.when.apply(s,l)},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})},destroy:function(){d.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),a("lib/image",["base","runtime/client","lib/blob"],function(t,n,i){function r(e){this.options=o.extend({},r.options,e),n.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var o=t.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},t.inherits(n,{constructor:r,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var e=t.slice(arguments);return this.exec.apply(this,["resize"].concat(e))},crop:function(){var e=t.slice(arguments);return this.exec.apply(this,["crop"].concat(e))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){e=this.exec("getAsBlob",e);return new i(this.getRuid(),e)}}),r}),a("widgets/image",["base","uploader","lib/image","widgets/widget"],function(t,e,l){var a,n,i,r,s=t.$;return n=5242880,i=0,r=[],a=function(e,t,n){r.push([t,n]),e.once("destroy",function(){i-=t,setTimeout(o,1)}),setTimeout(o,1)},s.extend(e.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),e.register({name:"image",makeThumb:function(e,t,n,i){var r,o;return(e=this.request("get-file",e)).type.match(/^image/)?(r=s.extend({},this.options.thumb),s.isPlainObject(n)&&(r=s.extend(r,n),n=null),n=n||r.width,i=i||r.height,(o=new l(r)).once("load",function(){e._info=e._info||o.info(),e._meta=e._meta||o.meta(),n<=1&&0<n&&(n=e._info.width*n),i<=1&&0<i&&(i=e._info.height*i),o.resize(n,i)}),o.once("complete",function(){t(!1,o.getAsDataUrl(r.type)),o.destroy()}),o.once("error",function(e){t(e||!0),o.destroy()}),void a(o,e.source.size,function(){e._info&&o.info(e._info),e._meta&&o.meta(e._meta),o.loadFromBlob(e.source)})):void t(!0)},beforeSendFile:function(n){var i,r,o=this.options.compress||this.options.resize,e=o&&o.compressSize||0,a=o&&o.noCompressIfLarger||!1;return n=this.request("get-file",n),!o||!~"image/jpeg,image/jpg".indexOf(n.type)||n.size<e||n._compressed?void 0:(o=s.extend({},o),r=t.Deferred(),i=new l(o),r.always(function(){i.destroy(),i=null}),i.once("error",r.reject),i.once("load",function(){var e=o.width,t=o.height;n._info=n._info||i.info(),n._meta=n._meta||i.meta(),e<=1&&0<e&&(e=n._info.width*e),t<=1&&0<t&&(t=n._info.height*t),i.resize(e,t)}),i.once("complete",function(){var e,t;try{e=i.getAsBlob(o.type),t=n.size,(!a||e.size<t)&&(n.source=e,n.size=e.size,n.trigger("resize",e.size,t)),n._compressed=!0,r.resolve()}catch(e){r.resolve()}}),n._info&&i.info(n._info),n._meta&&i.meta(n._meta),i.loadFromBlob(n.source),r.promise())}});function o(){for(var e;r.length&&i<n;)e=r.shift(),i+=e[0],e[1]()}}),a("file",["base","mediator"],function(e,t){function n(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||+new Date,this.id=i+r++,this.ext=o.exec(this.name)?RegExp.$1:"",this.statusText="",a[this.id]=n.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(n.Status.ERROR,e)})}var e=e.$,i="WU_FILE_",r=0,o=/\.([^.]+)$/,a={};return e.extend(n.prototype,{setStatus:function(e,t){var n=a[this.id];void 0!==t&&(this.statusText=t),e!==n&&(a[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return a[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete a[this.id]}}),t.installTo(n.prototype),n.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},n}),a("queue",["base","mediator","file"],function(e,t,n){function i(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numOfDeleted:0,numOfInterrupt:0},this._queue=[],this._map={}}var o=e.$,r=n.Status;return o.extend(i.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,i=this._queue.length;for(e=e||r.QUEUED,t=0;t<i;t++)if(e===(n=this._queue[t]).getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],i=0,r=this._queue.length;i<r;i++)e=this._queue[i],t.length&&!~o.inArray(e.getStatus(),t)||n.push(e);return n},removeFile:function(e){this._map[e.id]&&(delete this._map[e.id],this._delFile(e),e.destroy(),this.stats.numOfDeleted++)},_fileAdded:function(e){var n=this;this._map[e.id]||(this._map[e.id]=e).on("statuschange",function(e,t){n._onFileStatusChange(e,t)})},_delFile:function(e){for(var t=this._queue.length-1;0<=t;t--)if(this._queue[t]==e){this._queue.splice(t,1);break}},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case r.PROGRESS:n.numOfProgress--;break;case r.QUEUED:n.numOfQueue--;break;case r.ERROR:n.numOfUploadFailed--;break;case r.INVALID:n.numOfInvalid--;break;case r.INTERRUPT:n.numOfInterrupt--}switch(e){case r.QUEUED:n.numOfQueue++;break;case r.PROGRESS:n.numOfProgress++;break;case r.ERROR:n.numOfUploadFailed++;break;case r.COMPLETE:n.numOfSuccess++;break;case r.CANCELLED:n.numOfCancel++;break;case r.INVALID:n.numOfInvalid++;break;case r.INTERRUPT:n.numOfInterrupt++}}}),t.installTo(i.prototype),i}),a("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(c,e,d,t,n,u){var h=c.$,i=/\.\w+$/,o=t.Status;return e.register({name:"queue",init:function(e){var t,n,i,r,o,a,l,s=this;if(h.isPlainObject(e.accept)&&(e.accept=[e.accept]),e.accept){for(o=[],i=0,n=e.accept.length;i<n;i++)(r=e.accept[i].extensions)&&o.push(r);o.length&&(a="\\."+o.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),s.accept=new RegExp(a,"i")}return s.queue=new d,s.stats=s.queue.stats,"html5"===this.request("predict-runtime-type")?(t=c.Deferred(),this.placeholder=l=new u("Placeholder"),l.connectRuntime({runtimeOrder:"html5"},function(){s._ruid=l.getRuid(),t.resolve()}),t.promise()):void 0},_wrapFile:function(e){if(!(e instanceof t)){if(!(e instanceof n)){if(!this._ruid)throw new Error("Can't add external files.");e=new n(this._ruid,e)}e=new t(e)}return e},acceptFile:function(e){return!(!e||!e.size||this.accept&&i.exec(e.name)&&!this.accept.test(e.name))},_addFile:function(e){var t=this;return e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)?t.acceptFile(e)?(t.queue.append(e),t.owner.trigger("fileQueued",e),e):void t.owner.trigger("error","Q_TYPE_DENIED",e):void 0},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),(e=h.map(e,function(e){return t._addFile(e)})).length&&(t.owner.trigger("filesQueued",e),t.options.auto)&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){e=e.id?e:this.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,i,r;if(e)(e=e.id?e:this.queue.getFile(e)).setStatus(o.QUEUED),t||this.request("start-upload");else{for(i=0,r=(n=this.queue.getFiles(o.ERROR)).length;i<r;i++)(e=n[i]).setStatus(o.QUEUED);this.request("start-upload")}},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new d,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),a("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,r){return e.support=function(){return r.hasRuntime.apply(r,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,t,n=this.options.runtimeOrder||r.orders,i=this.type;if(!i)for(e=0,t=(n=n.split(/\s*,\s*/g)).length;e<t;e++)if(r.hasRuntime(n[e])){this.type=i=n[e];break}return i}})}),a("lib/transport",["base","runtime/client","mediator"],function(e,n,t){function i(e){var t=this;e=t.options=r.extend(!0,{},i.options,e||{}),n.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){t.trigger("progress",1),clearTimeout(t._timer)})}var r=e.$;return i.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(e,t,n){var i=this,r=i.options;i.getRuid()&&i.disconnectRuntime(),i.connectRuntime(t.ruid,function(){i.exec("init")}),i._blob=t,r.fileVal=e||r.fileVal,r.filename=n||r.filename},append:function(e,t){"object"==_typeof(e)?r.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==_typeof(e)?r.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponseHeaders:function(){return this.exec("getResponseHeaders")},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),t.installTo(i.prototype),i}),a("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(u,e,t,i){var h=u.$,a=u.isPromise,p=t.Status;h.extend(e.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,chunkRetryDelay:1e3,threads:3,formData:{}}),e.register({name:"upload",init:function(){var e=this.owner,t=this;this.runing=!1,this.progress=!1,e.on("startUpload",function(){t.progress=!0}).on("uploadFinished",function(){t.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=u.bindFn(this._tick,this),e.on("uploadComplete",function(e){e.blocks&&h.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(n){var i=this;if(h.each(i.request("get-files",p.INVALID),function(){i.request("remove-file",this)}),n?(n=n.id?n:i.request("get-file",n)).getStatus()===p.INTERRUPT?(n.setStatus(p.QUEUED),h.each(i.pool,function(e,t){t.file===n&&(t.transport&&t.transport.send(),n.setStatus(p.PROGRESS))})):n.getStatus()!==p.PROGRESS&&n.setStatus(p.QUEUED):h.each(i.request("get-files",[p.INITED]),function(){this.setStatus(p.QUEUED)}),i.runing)return i.owner.trigger("startUpload",n),u.nextTick(i.__tick);i.runing=!0;var r=[];n||h.each(i.pool,function(e,t){var n=t.file;n.getStatus()===p.INTERRUPT&&(i._trigged=!1,r.push(n),t.waiting||(t.transport?t.transport.send():i._doSend(t)))}),h.each(r,function(){this.setStatus(p.PROGRESS)}),n||h.each(i.request("get-files",p.INTERRUPT),function(){this.setStatus(p.PROGRESS)}),i._trigged=!1,u.nextTick(i.__tick),i.owner.trigger("startUpload")},stopUpload:function(n,i){var r=this;if(!0===n&&(i=n,n=null),!1!==r.runing){if(n)return(n=n.id?n:r.request("get-file",n)).getStatus()!==p.PROGRESS&&n.getStatus()!==p.QUEUED?void 0:(n.setStatus(p.INTERRUPT),h.each(r.pool,function(e,t){t.file===n&&(t.transport&&t.transport.abort(),i)&&(r._putback(t),r._popBlock(t))}),r.owner.trigger("stopUpload",n),u.nextTick(r.__tick));r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(p.INTERRUPT),i&&h.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(p.INTERRUPT)}),r.owner.trigger("stopUpload")}},cancelFile:function(e){(e=e.id?e:this.request("get-file",e)).blocks&&h.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(p.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){(e=e.id?e:this.request("get-file",e)).setStatus(t||p.COMPLETE),e.skipped=!0,e.blocks&&h.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var e,t=this,n=t.options;return t._promise?t._promise.always(t.__tick):void(t.pool.length<n.threads&&(n=t._nextBlock())?(t._trigged=!1,e=function(e){t._promise=null,e&&e.file&&t._startSend(e),u.nextTick(t.__tick)},t._promise=a(n)?n.always(e):e(n)):t.remaning||t._getStats().numOfQueue||t._getStats().numOfInterrupt||(t.runing=!1,t._trigged||u.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0))},_putback:function(e){e.cuted.unshift(e),~this.stack.indexOf(e.cuted)||(this.remaning++,e.file.remaning++,this.stack.unshift(e.cuted))},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===p.PROGRESS)return e;e.has()&&(e.file.getStatus()===p.PROGRESS||e.file.getStatus()===p.INTERRUPT)||this.stack.splice(--t,1)}return null},_nextBlock:function(){var t,e,n,i,r=this,o=r.options;return(t=this._getStack())?(o.prepareNextFile&&!r.pending.length&&r._prepareNextFile(),t.shift()):r.runing?(!r.pending.length&&r._getStats().numOfQueue&&r._prepareNextFile(),e=r.pending.shift(),n=function(e){return e?(t=function(e,t){for(var n,i=[],r=e.source.size,o=t?Math.ceil(r/t):1,a=0,l=0,s={file:e,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(e){i.unshift(e)}};l<o;)n=Math.min(t,r-a),i.push({file:e,start:a,end:t?a+n:r,total:r,chunks:o,chunk:l++,cuted:s}),a+=n;return e.blocks=i.concat(),e.remaning=i.length,s}(e,o.chunked?o.chunkSize:0),r.stack.push(t),t.shift()):null},a(e)?(i=e.file,(e=e[e.pipe?"pipe":"then"](n)).file=i,e):n(e)):void 0},_prepareNextFile:function(){var t,n=this,i=n.request("fetch-file"),r=n.pending;i&&(t=n.request("before-send-file",i,function(){return i.getStatus()===p.PROGRESS||i.getStatus()===p.INTERRUPT?i:n._finishFile(i)}),n.owner.trigger("uploadStart",i),i.setStatus(p.PROGRESS),t.file=i,t.done(function(){var e=h.inArray(t,r);~e&&r.splice(e,1,i)}),t.fail(function(e){i.setStatus(p.ERROR,e),n.owner.trigger("uploadError",i,e),n.owner.trigger("uploadComplete",i)}),r.push(t))},_popBlock:function(e){var t=h.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(e){var t,n=this,i=e.file;return i.getStatus()!==p.PROGRESS?void(i.getStatus()===p.INTERRUPT&&n._putback(e)):(n.pool.push(e),n.remaning++,e.blob=1===e.chunks?i.source:i.source.slice(e.start,e.end),e.waiting=t=n.request("before-send",e,function(){delete e.waiting,i.getStatus()===p.PROGRESS?n._doSend(e):e.file.getStatus()!==p.INTERRUPT&&n._popBlock(e),u.nextTick(n.__tick)}),void t.fail(function(){delete e.waiting,1===i.remaning?n._finishFile(i).always(function(){e.percentage=1,n._popBlock(e),n.owner.trigger("uploadComplete",i),u.nextTick(n.__tick)}):(e.percentage=1,n.updateFileProgress(i),n._popBlock(e),u.nextTick(n.__tick))}))},_doSend:function(r){var o,n,a=this,l=a.owner,s=h.extend({},a.options,r.options),c=r.file,d=new i(s),e=h.extend({},s.formData),t=h.extend({},s.headers);(r.transport=d).on("destroy",function(){delete r.transport,a._popBlock(r),u.nextTick(a.__tick)}),d.on("progress",function(e){r.percentage=e,a.updateFileProgress(c)}),o=function(t){return(n=d.getResponseAsJson()||{})._raw=d.getResponse(),n._headers=d.getResponseHeaders(),r.response=n,t=l.trigger("uploadAccept",r,n,function(e){t=e})?t:t||"server"},d.on("error",function(e,t){var n,i=e.split("|");e=i[0],n=parseFloat(i[1]),i=i[2],r.retried=r.retried||0,1<r.chunks&&~"http,abort,server".indexOf(e.replace(/-.*/,""))&&r.retried<s.chunkRetry?(r.retried++,a.retryTimer=setTimeout(function(){d.send()},s.chunkRetryDelay||1e3)):(t||"server"!==e||(e=o(e)),c.setStatus(p.ERROR,e),l.trigger("uploadError",c,e,n,i),l.trigger("uploadComplete",c))}),d.on("load",function(){var e;return(e=o())?void d.trigger("error",e,!0):void(1===c.remaning?a._finishFile(c,n):d.destroy())}),e=h.extend(e,{id:c.id,name:c.name,type:c.type,lastModifiedDate:c.lastModifiedDate,size:c.size}),1<r.chunks&&h.extend(e,{chunks:r.chunks,chunk:r.chunk}),l.trigger("uploadBeforeSend",r,e,t),d.appendBlob(s.fileVal,r.blob,c.name),d.append(e),d.setRequestHeader(t),d.send()},_finishFile:function(t,e,n){var i=this.owner;return i.request("after-send-file",arguments,function(){t.setStatus(p.COMPLETE),i.trigger("uploadSuccess",t,e,n)}).fail(function(e){t.getStatus()===p.PROGRESS&&t.setStatus(p.ERROR,e),i.trigger("uploadError",t,e)}).always(function(){i.trigger("uploadComplete",t)})},updateFileProgress:function(e){var t,n=0;e.blocks&&(h.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))},destroy:function(){clearTimeout(this.retryTimer)}})}),a("widgets/validator",["base","uploader","file","widgets/widget"],function(t,e,n){var i=t.$,r={},o={addValidator:function(e,t){r[e]=t},removeValidator:function(e){delete r[e]}};return e.register({name:"validator",init:function(){var e=this;t.nextTick(function(){i.each(r,function(){this.call(e.owner)})})}}),o.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,i=parseInt(t.fileNumLimit,10),r=!0;i&&(e.on("beforeFileQueued",function(e){return!(!this.trigger("beforeFileQueuedCheckfileNumLimit",e,n)||(i<=n&&r&&(r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",i,e),setTimeout(function(){r=!0},1)),i<=n))}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),o.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,i=parseInt(t.fileSizeLimit,10),r=!0;i&&(e.on("beforeFileQueued",function(e){var t=n+e.size>i;return t&&r&&(r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",i,e),setTimeout(function(){r=!0},1)),!t}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),o.addValidator("fileSingleSizeLimit",function(){var t=this.options.fileSingleSizeLimit;t&&this.on("beforeFileQueued",function(e){return e.size>t?(e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",t,e),!1):void 0})}),o.addValidator("duplicate",function(){var e=this,t=e.options,n={};t.duplicate||(e.on("beforeFileQueued",function(e){var t=e.__hash||(e.__hash=function(e){for(var t=0,n=0,i=e.length;n<i;n++)t=e.charCodeAt(n)+(t<<6)+(t<<16)-t;return t}(e.name+e.size+e.lastModifiedDate));return n[t]?(this.trigger("error","F_DUPLICATE",e),!1):void 0}),e.on("fileQueued",function(e){e=e.__hash;e&&(n[e]=!0)}),e.on("fileDequeued",function(e){e=e.__hash;e&&delete n[e]}),e.on("reset",function(){n={}}))}),o}),a("runtime/compbase",[],function(){return function(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}}),a("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(a,t,n){function e(){var r={},o=this,e=this.destroy;t.apply(o,arguments),o.type="html5",o.exec=function(e,t){var n=this.uid,i=a.slice(arguments,2);return l[e]&&(n=r[n]=r[n]||new l[e](this,o))[t]?n[t].apply(n,i):void 0},o.destroy=function(){return e&&e.apply(this,arguments)}}var l={};return a.inherits(t,{constructor:e,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),e.register=function(e,t){return l[e]=a.inherits(n,t)},p.Blob&&p.FileReader&&p.DataView&&t.addRuntime("html5",e),e}),a("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,i){return e.register("Blob",{slice:function(e,t){var n=((n=this.owner.source).slice||n.webkitSlice||n.mozSlice).call(n,e,t);return new i(this.getRuid(),n)}})}),a("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(u,e,o){var a=u.$,l="webuploader-dnd-";return e.register("DragAndDrop",{init:function(){var e=this.elem=this.options.container;this.dragEnterHandler=u.bindFn(this._dragEnterHandler,this),this.dragOverHandler=u.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=u.bindFn(this._dragLeaveHandler,this),this.dropHandler=u.bindFn(this._dropHandler,this),this.dndOver=!1,e.on("dragenter",this.dragEnterHandler),e.on("dragover",this.dragOverHandler),e.on("dragleave",this.dragLeaveHandler),e.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(a(document).on("dragover",this.dragOverHandler),a(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,i=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,(t=e.dataTransfer.items)&&t.length&&(n._denied=i=!n.trigger("accept",t)),n.elem.addClass(l+"over"),n.elem[i?"addClass":"removeClass"](l+"denied")),e.dataTransfer.dropEffect=i?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!a.contains(t,e.currentTarget)||(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e)),!1},_dragLeaveHandler:function(){var e=this,t=function(){e.dndOver=!1,e.elem.removeClass(l+"over "+l+"denied")};return clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(e){var t,n=this,i=n.getRuid(),r=n.elem.parent().get(0);if(r&&!a.contains(r,e.currentTarget))return!1;r=(e=e.originalEvent||e).dataTransfer;try{t=r.getData("text/html")}catch(e){}return n.dndOver=!1,n.elem.removeClass(l+"over"),r&&!t?(n._getTansferFiles(r,function(e){n.trigger("drop",a.map(e,function(e){return new o(i,e)}))}),!1):void 0},_getTansferFiles:function(e,t){for(var n,i,r=[],o=[],a=e.items,l=e.files,s=!(!a||!a[0].webkitGetAsEntry),c=0,d=l.length;c<d;c++)n=l[c],i=a&&a[c],s&&i.webkitGetAsEntry().isDirectory?o.push(this._traverseDirectoryTree(i.webkitGetAsEntry(),r)):r.push(n);u.when.apply(u,o).done(function(){r.length&&t(r)})},_traverseDirectoryTree:function(e,o){var a=u.Deferred(),l=this;return e.isFile?e.file(function(e){o.push(e),a.resolve()}):e.isDirectory&&e.createReader().readEntries(function(e){for(var t=e.length,n=[],i=[],r=0;r<t;r++)n.push(l._traverseDirectoryTree(e[r],i));u.when.apply(u,n).then(function(){o.push.apply(o,i),a.resolve()},a.reject)}),a.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd)&&(a(document).off("dragover",this.dragOverHandler),a(document).off("drop",this.dropHandler))}})}),a("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(l,e,s){return e.register("FilePaste",{init:function(){var e,t,n,i,r=this.options,o=this.elem=r.container,a=".*";if(r.accept){for(e=[],t=0,n=r.accept.length;t<n;t++)(i=r.accept[t].mimeTypes)&&e.push(i);e.length&&(a=(a=e.join(",")).replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=a=new RegExp(a,"i"),this.hander=l.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){for(var t,n,i=[],r=this.getRuid(),o=0,a=(t=(e=e.originalEvent||e).clipboardData.items).length;o<a;o++)"file"===(n=t[o]).kind&&(n=n.getAsFile())&&i.push(new s(r,n));i.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",i))},destroy:function(){this.elem.off("paste",this.hander)}})}),a("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var u=e.$;return t.register("FilePicker",{init:function(){var e,t,n,i,r,o=this.getRuntime().getContainer(),a=this,l=a.owner,s=a.options,c=this.label=u(document.createElement("label")),d=this.input=u(document.createElement("input"));if(d.attr("type","file"),d.attr("capture","camera"),d.attr("name",s.name),d.addClass("webuploader-element-invisible"),c.on("click",function(e){d.trigger("click"),e.stopPropagation(),l.trigger("dialogopen")}),c.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),s.multiple&&d.attr("multiple","multiple"),s.accept&&0<s.accept.length){for(e=[],t=0,n=s.accept.length;t<n;t++)e.push(s.accept[t].mimeTypes);d.attr("accept",e.join(","))}o.append(d),o.append(c),i=function(e){l.trigger(e.type)},r=function(e){return 0!==e.target.files.length&&(a.files=e.target.files,(e=this.cloneNode(!0)).value=null,this.parentNode.replaceChild(e,this),d.off(),d=u(e).on("change",r).on("mouseenter mouseleave",i),void l.trigger("change"))},d.on("change",r),c.on("mouseenter mouseleave",i)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),a("runtime/html5/util",["base"],function(e){var t=p.createObjectURL&&p||p.URL&&URL.revokeObjectURL&&URL||p.webkitURL,e=e.noop,n=e;return t&&(e=function(){return t.createObjectURL.apply(t,arguments)},n=function(){return t.revokeObjectURL.apply(t,arguments)}),{createObjectURL:e,revokeObjectURL:n,dataURL2Blob:function(e){for(var e=e.split(","),t=(~e[0].indexOf("base64")?atob:decodeURIComponent)(e[1]),n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return e=e[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(n,e)},dataURL2ArrayBuffer:function(e){for(var e=e.split(","),t=(~e[0].indexOf("base64")?atob:decodeURIComponent)(e[1]),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer},arrayBufferToBlob:function(e,t){var n=p.BlobBuilder||p.WebKitBlobBuilder;return n?((n=new n).append(e),n.getBlob(t)):new Blob([e],t?{type:t}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),a("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var u={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,i=new FileReader;i.onload=function(){t(!1,n._parse(this.result)),i=i.onload=i.onerror=null},i.onerror=function(e){t(e.message),i=i.onload=i.onerror=null},e=e.slice(0,n.maxMetaDataSize),i.readAsArrayBuffer(e.getSource())},_parse:function(e,t){if(!(e.byteLength<6)){var n,i,r,o,a=new DataView(e),l=2,s=a.byteLength-4,c=l,d={};if(65496===a.getUint16(0)){for(;l<s&&(65504<=(n=a.getUint16(l))&&n<=65519||65534===n)&&!(l+(i=a.getUint16(l+2)+2)>a.byteLength);){if(r=u.parsers[n],!t&&r)for(o=0;o<r.length;o+=1)r[o].call(u,a,l,i,d);c=l+=i}6<c&&(d.imageHead=e.slice?e.slice(2,c):new Uint8Array(e).subarray(2,c))}return d}},updateImageHead:function(e,t){var n=this._parse(e,!0),i=2;return n.imageHead&&(i=2+n.imageHead.byteLength),n=e.slice?e.slice(i):new Uint8Array(e).subarray(i),(e=new Uint8Array(t.byteLength+2+n.byteLength))[0]=255,e[1]=216,e.set(new Uint8Array(t),2),e.set(new Uint8Array(n),t.byteLength+2),e.buffer}};return e.parseMeta=function(){return u.parse.apply(u,arguments)},e.updateImageHead=function(){return u.updateImageHead.apply(u,arguments)},u}),a("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(h,e){var p={ExifMap:function(){return this}};return p.ExifMap.prototype.map={Orientation:274},p.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},p.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},p.exifTagTypes[7]=p.exifTagTypes[1],p.getExifValue=function(e,t,n,i,r,o){var a,l,s,c,d,u=p.exifTagTypes[i];if(u){if(!((a=4<(i=u.size*r)?t+e.getUint32(n+8,o):n+8)+i>e.byteLength)){if(1===r)return u.getValue(e,a,o);for(l=[],s=0;s<r;s+=1)l[s]=u.getValue(e,a+s*u.size,o);if(u.ascii){for(c="",s=0;s<l.length&&"\0"!==(d=l[s]);s+=1)c+=d;return c}return l}h.log("Invalid Exif data: Invalid data offset.")}else h.log("Invalid Exif data: Invalid tag type.")},p.parseExifTag=function(e,t,n,i,r){var o=e.getUint16(n,i);r.exif[o]=p.getExifValue(e,t,n,e.getUint16(n+2,i),e.getUint32(n+4,i),i)},p.parseExifTags=function(e,t,n,i,r){var o,a,l;if(n+6>e.byteLength)h.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=n+2+12*(o=e.getUint16(n,i)))+4>e.byteLength)){for(l=0;l<o;l+=1)this.parseExifTag(e,t,n+2+12*l,i,r);return e.getUint32(a,i)}h.log("Invalid Exif data: Invalid directory size.")}},p.parseExifData=function(e,t,n,i){var r,o=t+10;if(1165519206===e.getUint32(t+4))if(o+8>e.byteLength)h.log("Invalid Exif data: Invalid segment size.");else if(0!==e.getUint16(t+8))h.log("Invalid Exif data: Missing byte alignment offset.");else{switch(e.getUint16(o)){case 18761:r=!0;break;case 19789:r=!1;break;default:return void h.log("Invalid Exif data: Invalid byte alignment marker.")}42!==e.getUint16(o+2,r)?h.log("Invalid Exif data: Missing TIFF marker."):(t=e.getUint32(o+4,r),i.exif=new p.ExifMap,p.parseExifTags(e,o,o+t,r,i))}},e.parsers[65505].push(p.parseExifData),p}),a("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(n,e,r){return e.register("Image",{modified:!1,init:function(){var n=this,e=new Image;e.onload=function(){n._info={type:n.type,width:this.width,height:this.height},n._metas||"image/jpeg"!==n.type?n.owner.trigger("load"):r.parseMeta(n._blob,function(e,t){n._metas=t,n.owner.trigger("load")})},e.onerror=function(){n.owner.trigger("error")},n._img=e},loadFromBlob:function(e){var t=this._img;this._blob=e,this.type=e.type,t.src=r.createObjectURL(e.getSource()),this.owner.once("load",function(){r.revokeObjectURL(t.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,i,r){var o=this._canvas||(this._canvas=document.createElement("canvas")),a=this.options,l=this._img,s=l.naturalWidth,c=l.naturalHeight,d=this.getOrientation();r=r||1,o.width=n,o.height=i,a.preserveHeaders||this._rotate2Orientaion(o,d),this._renderImageToCanvas(o,l,-e,-t,s*r,c*r),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,n=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(n=r.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return n=r.dataURL2ArrayBuffer(n),n=r.updateImageHead(n,this._metas.imageHead),r.arrayBufferToBlob(n,e)}else n=r.canvasToDataUrl(t,e);n=r.dataURL2Blob(n)}return n},getAsDataUrl:function(e){var t=this.options;return"image/jpeg"===(e=e||this.type)?r.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._metas=e,this):this._metas},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",this._img=this._blob=null},_resize:function(e,t,n,i){var r,o=this.options,a=e.width,l=e.height,s=this.getOrientation();~[5,6,7,8].indexOf(s)&&(n=(n^=i)^(i^=n)),r=Math[o.crop?"max":"min"](n/a,i/l),a=a*(r=o.allowMagnify?r:Math.min(1,r)),l=l*r,o.crop?(t.width=n,t.height=i):(t.width=a,t.height=l),r=(t.width-a)/2,n=(t.height-l)/2,o.preserveHeaders||this._rotate2Orientaion(t,s),this._renderImageToCanvas(t,e,r,n,a,l)},_rotate2Orientaion:function(e,t){var n=e.width,i=e.height,r=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=i,e.height=n}switch(t){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},_renderImageToCanvas:n.os.ios?7<=n.os.ios?function(e,t,n,i,r,o){var a=t.naturalWidth,l=t.naturalHeight,s=k(t,0,l);return e.getContext("2d").drawImage(t,0,0,a*s,l*s,n,i,r,o)}:function(e,t,n,i,r,o){var a,l,s,c,d,u,h,p=t.naturalWidth,f=t.naturalHeight,m=e.getContext("2d"),e=1048576<(g=(e=t).naturalWidth)*e.naturalHeight&&((h=document.createElement("canvas")).width=h.height=1,(h=h.getContext("2d")).drawImage(e,1-g,0),0===h.getImageData(0,0,1,1).data[3]),g="image/jpeg"===this.type,v=1024,b=0,y=0;for(e&&(p/=2,f/=2),m.save(),(a=document.createElement("canvas")).width=a.height=v,l=a.getContext("2d"),h=g?k(t,0,f):1,s=Math.ceil(v*r/p),c=Math.ceil(v*o/f/h);b<f;){for(u=d=0;d<p;)l.clearRect(0,0,v,v),l.drawImage(t,-d,-b),m.drawImage(a,0,0,v,v,n+u,i+y,s,c),d+=v,u+=s;b+=v,y+=c}m.restore()}:function(e){var t=n.slice(arguments,1),e=e.getContext("2d");e.drawImage.apply(e,t)}});function k(e,t,n){var i,r=document.createElement("canvas"),o=r.getContext("2d"),a=0,l=n,s=n;for(r.width=1,r.height=n,o.drawImage(e,0,0),i=o.getImageData(0,0,1,n).data;a<s;)0===i[4*(s-1)+3]?l=s:a=s,s=l+a>>1;return 0==(r=s/n)?1:r}}),a("runtime/html5/transport",["base","runtime/html5/runtime"],function(s,e){var i=s.noop,c=s.$;return e.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var n,e,t,i=this.owner,r=this.options,o=this._initAjax(),a=i._blob,l=r.server;r.sendAsBinary?(l+=!1!==r.attachInfoToQuery?(/\?/.test(l)?"&":"?")+c.param(i._formData):"",e=a.getSource()):(n=new FormData,c.each(i._formData,function(e,t){n.append(e,t)}),n.append(r.fileVal,a.getSource(),r.filename||i._formData.name||"")),r.withCredentials&&"withCredentials"in o?(o.open(r.method,l,!0),o.withCredentials=!0):o.open(r.method,l),this._setRequestHeader(o,r.headers),e?(o.overrideMimeType&&o.overrideMimeType("application/octet-stream"),s.os.android?((t=new FileReader).onload=function(){o.send(this.result),t=t.onload=null},t.readAsArrayBuffer(e)):o.send(e)):o.send(n)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getResponseHeaders:function(){return this._headers},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=i,e.onreadystatechange=i,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_parseHeader:function(e){var i={};return e&&e.replace(/^([^\:]+):(.*)$/gm,function(e,t,n){i[t.trim()]=n.trim()}),i},_initAjax:function(){var n=this,t=new XMLHttpRequest,e=this.options;return(t=!e.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest?t:new XDomainRequest).upload.onprogress=function(e){var t=0;return e.lengthComputable&&(t=e.loaded/e.total),n.trigger("progress",t)},t.onreadystatechange=function(){var e;if(4===t.readyState)return t.upload.onprogress=i,t.onreadystatechange=i,n._xhr=null,n._status=t.status,e="|"+t.status+"|"+t.statusText,200<=t.status&&t.status<300?(n._response=t.responseText,n._headers=n._parseHeader(t.getAllResponseHeaders()),n.trigger("load")):500<=t.status&&t.status<600?(n._response=t.responseText,n._headers=n._parseHeader(t.getAllResponseHeaders()),n.trigger("error","server"+e)):n.trigger("error",n._status?"http"+e:"abort")},n._xhr=t},_setRequestHeader:function(n,e){c.each(e,function(e,t){n.setRequestHeader(e,t)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){t={}}return t}})}),a("preset/html5only",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/image","runtime/html5/transport"],function(e){return e}),a("webuploader",["preset/html5only"],function(e){return e});var t,n,i,r,o,p,a,l=e("webuploader"),s=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in d)if(n=l,d.hasOwnProperty(t)){for(o=s((i=t.split("/")).pop());r=s(i.shift());)n[r]=n[r]||{},n=n[r];n[o]=d[t]}return l}(),c.WebUploader.noConflict=function(){c.WebUploader=H},window.console||(window.console={}),console.log||(console.log=function(){});var q="4.4.22 (2024-11-08)",e=navigator.userAgent.toLowerCase(),f=-1<e.indexOf("msie")&&-1==e.indexOf("opera"),W=-1==e.indexOf("msie")&&-1<e.indexOf("trident"),h=-1<e.indexOf("gecko")&&-1==e.indexOf("khtml"),m=-1<e.indexOf("applewebkit"),$=-1<e.indexOf("opera"),V=-1<e.indexOf("mobile"),K=/ipad|iphone|ipod/.test(e),u="CSS1Compat"!=document.compatMode,p=!window.getSelection,e=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(e),g=e?e[1]:"0",G=(new Date).getTime();function v(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function Q(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)}function E(e,t){for(var n=0,i=t.length;n<i;n++)if(e===t[n])return n;return-1}function D(e,t){if(v(e))for(var n=0,i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(var r in e)if(e.hasOwnProperty(r)&&!1===t.call(e[r],r,e[r]))break}function T(e){return e.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function Y(e,t,n){return 0<=((n=void 0===n?",":n)+t+n).indexOf(n+e+n)}function b(e,t){return t=t||"px",e&&/^-?\d+(?:\.\d+)?$/.test(e)?e+t:e}function y(e){return e&&(e=/(\d+)/.exec(e))?parseInt(e[1],10):0}function k(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function X(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function Z(n){var e=n.split("-");return n="",D(e,function(e,t){n+=0<e?t.charAt(0).toUpperCase()+t.substr(1):t}),n}function J(e){function r(e){e=parseInt(e,10).toString(16).toUpperCase();return 1<e.length?e:"0"+e}return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,function(e,t,n,i){return"#"+r(t)+r(n)+r(i)})}function _(e,t){t=void 0===t?",":t;var i,r={};return D(v(e)?e:e.split(t),function(e,t){if(i=/^(\d+)\.\.(\d+)$/.exec(t))for(var n=parseInt(i[1],10);n<=parseInt(i[2],10);n++)r[n.toString()]=!0;else r[t]=!0}),r}function ee(e,t){return Array.prototype.slice.call(e,t||0)}function S(e,t){return void 0===e?t:e}function t(e,t,n){var i,r;n||(n=t,t=null),t?((r=function(){}).prototype=t.prototype,i=new r,D(n,function(e,t){i[e]=t})):i=n,(i.constructor=e).prototype=i,e.parent=t?t.prototype:null}function te(e){(t=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(e))&&(e=t[0]);var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(t.lastIndex=0,t.test(e)&&(e=e.replace(t,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return window.eval("("+e+")");throw"JSON parse error"}var w=Math.round,x={DEBUG:!1,VERSION:q,IE:f,GECKO:h,WEBKIT:m,OPERA:$,V:g,TIME:G,each:D,isArray:v,isFunction:Q,inArray:E,inString:Y,trim:T,addUnit:b,removeUnit:y,escape:k,unescape:X,toCamel:Z,toHex:J,toMap:_,toArray:ee,undef:S,invalidUrl:function(e){return!e||/[<>"]/.test(e)},addParam:function(e,t){return 0<=e.indexOf("?")?e+"&"+t:e+"?"+t},extend:t,json:te},ne=_("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),ie=_("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul,audio,video"),re=_("line-break,area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),oe=_("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),ae=_("img,table,input,textarea,button,audio,video"),le=_("pre,style,script"),se=_("html,head,body,td,tr,table,ol,ul,li"),ce=(_("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),_("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected")),de=_("input,button,textarea,select");x.basePath=function(){for(var e,t=document.getElementsByTagName("script"),n=0,i=t.length;n<i;n++)if(e=t[n].src||"",/kindeditor[\w\-\.]*\.js/.test(e))return e.substring(0,e.lastIndexOf("/")+1);return""}(),x.Tools={All:["source","|","undo","redo","removeformat","clearhtml","|","template","code","cut","copy","plainpaste","wordpaste","|","preview","selectall","fullscreen","print","|","quickformat","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","quote","subscript","superscript","|","image","multiimage","media","insertfile","baidumap","link","unlink","|","table","anchor","hr","pagebreak","|","emoticons","symbols"],Normal:["source","|","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","image","multiimage","media","insertfile","baidumap","link","unlink","|","table","anchor","hr","pagebreak","|","quote","subscript","superscript","|","preview","fullscreen","quickformat","emoticons","symbols"],Small:["source","|","formatblock","fontname","fontsize","|","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","indent","outdent","lineheight","/","quote","image","multiimage","media","insertfile","|","table","hr","pagebreak","|","link","unlink","|","preview","fullscreen"],Mini:["formatblock","bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","insertorderedlist","insertunorderedlist","|","image","insertfile","table","link","unlink"]},x.Templates=[{name:"图片和文字",content:'<h3><img align="left" height="100" style="margin-right: 10px" width="100" />在此处输入标题</h3><p>在此处输入内容</p>'},{name:"表格",content:'<h3>表格标题</h3><table style="width:100%;" cellpadding="2" cellspacing="0" border="1"><tbody><tr><td>表头1</td><td>表头2</td></tr><tr><td>内容1</td><td>内容2</td></tr><tr><td>内容3</td><td>内容4</td></tr></tbody></table><p>表格说明</p>'},{name:"项目编号",content:"<p>在此处输入内容</p><ol><li>描述1</li><li>描述2</li><li>描述3</li></ol><p>在此处输入内容</p><ul><li>描述1</li><li>描述2</li><li>描述3</li></ul>"}];var ue=!(x.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:x.basePath,themesPath:x.basePath+"themes/",langPath:x.basePath+"lang/",pluginsPath:x.basePath+"plugins/",themeType:"default",langType:"zh-CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:!0,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:x.Tools.Normal,noDisableItems:["source","fullscreen"],colorTable:[["#1abc9c","#2ecc71","#3498db","#9b59b6","#4e5f70","#f1c40f"],["#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f39c12"],["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],media:["id","class"],audio:["id","class","src","width","height","type","loop","autostart","autoplay",".width",".height","controls","muted","preload","data-ke-class"],video:["id","class","src","width","height","type","loop","autostart","autoplay",".width",".height","controls","muted","poster","preload","data-ke-class"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border","data-ke-class"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"],"line-break":["style"],code:["class","style"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'}),he=_("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),e=_("33..40"),pe={};function fe(e,t,n){e.removeEventListener?e.removeEventListener(t,n,ue):e.detachEvent&&e.detachEvent("on"+t,n)}D(he,function(e,t){pe[e]=t}),D(e,function(e,t){pe[e]=t});var me="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");function ge(e,t){this.init(e,t)}t(ge,{init:function(e,n){var t,i=this,e=e.ownerDocument||e.document||e;switch(i.event=n,D(me,function(e,t){i[t]=n[t]}),i.target||(i.target=i.srcElement||e),3===i.target.nodeType&&(i.target=i.target.parentNode),!i.relatedTarget&&i.fromElement&&(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),null==i.pageX&&null!=i.clientX&&(t=e.documentElement,e=e.body,i.pageX=i.clientX+(t&&t.scrollLeft||e&&e.scrollLeft||0)-(t&&t.clientLeft||e&&e.clientLeft||0),i.pageY=i.clientY+(t&&t.scrollTop||e&&e.scrollTop||0)-(t&&t.clientTop||e&&e.clientTop||0)),!i.which&&(i.charCode||0===i.charCode?i.charCode:i.keyCode)&&(i.which=i.charCode||i.keyCode),!i.metaKey&&i.ctrlKey&&(i.metaKey=i.ctrlKey),i.which||void 0===i.button||(i.which=1&i.button?1:2&i.button?3:4&i.button?2:0),i.which){case 186:i.which=59;break;case 187:case 107:case 43:i.which=61;break;case 189:case 45:i.which=109;break;case 42:i.which=106;break;case 47:i.which=111;break;case 78:i.which=110}96<=i.which&&i.which<=105&&(i.which-=48)},preventDefault:function(){var e=this.event;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},stop:function(){this.preventDefault(),this.stopPropagation()}});var ve="kindeditor_"+G,be=0,a={};function ye(e){return e[ve]||null}function ke(t){try{delete t[ve]}catch(e){t.removeAttribute&&t.removeAttribute(ve)}}function we(i,e,t){var r,n,o;0<=e.indexOf(",")?D(e.split(","),function(){we(i,this,t)}):((n=ye(i))||(i[ve]=++be,n=be),void 0===a[n]&&(a[n]={}),(r=a[n][e])&&0<r.length?fe(i,e,r[0]):(a[n][e]=[],a[n].el=i),0===(r=a[n][e]).length&&(r[0]=function(e){var n=e?new ge(i,e):void 0;D(r,function(e,t){0<e&&t&&t.call(i,n)})}),E(t,r)<0&&r.push(t),n=i,e=e,o=r[0],n.addEventListener?n.addEventListener(e,o,ue):n.attachEvent&&n.attachEvent("on"+e,o))}function xe(n,e,i){var t,r,o;e&&0<=e.indexOf(",")?D(e.split(","),function(){xe(n,this,i)}):(t=ye(n))&&(void 0===e?t in a&&(D(a[t],function(e,t){"el"!=e&&0<t.length&&fe(n,e,t[0])}),delete a[t],ke(n)):a[t]&&(r=a[t][e])&&0<r.length&&(void 0!==i&&(D(r,function(e,t){0<e&&t===i&&r.splice(e,1)}),1!=r.length)||(fe(n,e,r[0]),delete a[t][e]),o=0,D(a[t],function(){o++}),o<2)&&(delete a[t],ke(n)))}function Ce(t,n,i){n=/^\d{2,}$/.test(n)?n:n.toUpperCase().charCodeAt(0),we(t,"keydown",function(e){!e.ctrlKey||e.which!=n||e.shiftKey||e.altKey||(i.call(t),e.stop())})}var Te=!1;function _e(e){e=e.replace(/&quot;/g,'"');for(var t={},n=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;r=n.exec(e);){var i=T(r[1].toLowerCase()),r=T(J(r[2]));t[i]=r}return t}function N(e){for(var t={},n=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;r=n.exec(e);){var i=(r[1]||r[2]||r[4]||r[6]).toLowerCase(),r=(r[2]?r[3]:r[4]?r[5]:r[7])||"";t[i]=r}return t}function Se(a,e,t,l){if(e=S(e,"").toLowerCase(),"data:"!=a.substr(0,5)&&(a=a.replace(/([^:])\/\//g,"$1/")),!(E(e,["absolute","relative","domain"])<0)){var n,s;if(t=t||location.protocol+"//"+location.host,void 0===l&&(n=location.pathname.match(/^(\/.*)\//),l=n?n[1]:""),s=/^(\w+:\/\/[^\/]*)/.exec(a)){if(s[1]!==t)return a}else if(/^\w+:/.test(a))return a;/^\//.test(a)?a=t+i(a.substr(1)):/^\w+:\/\//.test(a)||(a=t+i(l+"/"+a)),"relative"===e?a=function e(t,n){if(a.substr(0,t.length)===t){for(var i=[],r=0;r<n;r++)i.push("..");var o=".";return 0<i.length&&(o+="/"+i.join("/")),"/"==l&&(o+="/"),o+a.substr(t.length)}if(s=/^(.*)\//.exec(t))return e(s[1],++n)}(t+l,0).substr(2):"absolute"===e&&a.substr(0,t.length)===t&&(a=a.substr(t.length))}return a;function i(e){for(var t=e.split("/"),n=[],i=0,r=t.length;i<r;i++){var o=t[i];".."==o?0<n.length&&n.pop():""!==o&&"."!=o&&n.push(o)}return"/"+n.join("/")}}function C(e,v,b,y,k){null==e&&(e=""),b=b||"",y=S(y,!1),k=S(k,"\t");var w="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),x=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(e,t,n,i){return t+n.replace(/<(?:br|br\s[^>]*)>/gi,"\n")+i})).replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/gi,"</p>")).replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/gi,"$1<br />$2")).replace(/\u200B/g,"")).replace(/\u00A9/g,"&copy;")).replace(/\u00AE/g,"&reg;")).replace(/\u2003/g,"&emsp;")).replace(/\u3000/g,"&emsp;")).replace(/<[^>]+/g,function(e){return e.replace(/\s+/g," ")}),{}),C=(v&&(D(v,function(e,t){for(var n=e.split(","),i=0,r=n.length;i<r;i++)x[n[i]]=_(t)}),x.script||(e=e.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/gi,"")),x.style||(e=e.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/gi,""))),[]);return T(e=(e=(e=(e=e.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,function(e,t,n,i,r,o,a){var l,s,c,d=t||"",u=n||"",h=i.toLowerCase(),p=r||"",t=o?" "+o:"",f=a||"";if(v&&!x[h])return"";if(""===t&&re[h]&&(t=" /"),ne[h]&&(d=d&&" ",f=f&&" "),le[h]&&(u?f="\n":d="\n"),y&&"br"==h&&(f="\n"),ie[h]&&!le[h])if(y){u&&0<C.length&&C[C.length-1]===h?C.pop():C.push(h);for(var d="\n",f="\n",m=0,g=u?C.length:C.length-1;m<g;m++)d+=k,u||(f+=k);t?C.pop():u||(f+=k)}else d=f="";return""!==p&&(l=N(e),"font"===h&&(s={},c="",D(l,function(e,t){"color"===e&&(s.color=t,delete l[e]),"size"===e&&(s["font-size"]=w[parseInt(t,10)-1]||"",delete l[e]),"face"===e&&(s["font-family"]=t,delete l[e]),"style"===e&&(c=t)}),c&&!/;$/.test(c)&&(c+=";"),D(s,function(e,t){""!==t&&(/\s/.test(t)&&(t="'"+t+"'"),c+=e+":"+t+";")}),l.style=c),D(l,function(e,t){var n,i;ce[e]&&(l[e]=e),0<=E(e,["src","href"])&&(l[e]=Se(t,b)),(v&&"style"!==e&&!x[h]["*"]&&!x[h][e]||"body"===h&&"contenteditable"===e||/^kindeditor_\d+$/.test(e))&&delete l[e],"style"===e&&""!==t&&(D(n=_e(t),function(e,t){!v||x[h].style||x[h]["."+e]||delete n[e]}),i="",D(n,function(e,t){i+=e+":"+t+";"}),l.style=i)}),p="",D(l,function(e,t){"style"===e&&""===t||(t=t.replace(/"/g,"&quot;"),p+=" "+e+'="'+t+'"')})),d+"<"+u+(h="font"===h?"span":h)+p+t+">"+f})).replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(e,t,n,i){return t+n.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+i})).replace(/\n\s*\n/g,"\n")).replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n"))}function Ee(e,t){return C(e=e.replace(/<meta[\s\S]*?>/gi,"").replace(/<![\s\S]*?>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/gi,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/gi,"").replace(/<xml>[\s\S]*?<\/xml>/gi,"").replace(/<(?:table|td)[^>]*>/gi,function(e){return e.replace(/border-bottom:([#\w\s]+)/gi,"border:$1")}),t)}function De(e){return/\.(rm|rmvb)(\?|$)/i.test(e)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(e)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function Ne(e){return N(unescape(e))}function Me(e){var n="<embed ";return D(e,function(e,t){n+=e+'="'+t+'" '}),n+="/>"}function Ae(e,t){var n=t.width,i=t.height,r=t.type||De(t.src),t=Me(t),o="",i=(/\D/.test(n)?o+="width:"+n+";":0<n&&(o+="width:"+n+"px;"),/\D/.test(i)?o+="height:"+i+";":0<i&&(o+="height:"+i+"px;"),'<img class="'+(/realaudio/i.test(n=r)?"ke-rm":/flash/i.test(n)?"ke-flash":"ke-media")+'" src="'+e+'" ');return""!==o&&(i+='style="'+o+'" '),i+='data-ke-tag="'+escape(t)+'" alt="" />'}function Ie(e,t){if(9==e.nodeType&&9!=t.nodeType)return!0;for(;t=t.parentNode;)if(t==e)return!0;return!1}window.attachEvent&&window.attachEvent("onunload",function(){D(a,function(e,t){t.el&&xe(t.el)})}),x.ctrl=Ce,x.ready=function(e){if(Te)e(KindEditor);else{var n=!1;if(document.addEventListener)we(document,"DOMContentLoaded",i);else if(document.attachEvent){we(document,"readystatechange",function(){"complete"===document.readyState&&i()});var t=!1;try{t=null==window.frameElement}catch(e){}document.documentElement.doScroll&&t&&!function t(){if(!n){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,100)}i()}}()}we(window,"load",i)}function i(){n||(n=!0,e(KindEditor),Te=!0)}},x.formatUrl=Se,x.formatHtml=C,x.getCssList=_e,x.getAttrList=N,x.mediaType=De,x.mediaAttrs=Ne,x.mediaEmbed=Me,x.mediaImg=Ae,x.clearMsWord=Ee,x.tmpl=function(e,t){return e=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"),t?e(t):e};var e=document.createElement("div"),Re=(e.setAttribute("className","t"),"t"!==e.className);function Le(t,n){n=n.toLowerCase();var i,r=null;if(Re||"script"==t.nodeName.toLowerCase())try{r=t.getAttribute(n,2)}catch(e){r=t.getAttribute(n,1)}else{var e=t.ownerDocument.createElement("div"),t=(e.appendChild(t.cloneNode(!1)),N(X(e.innerHTML)));n in t&&(r=t[n])}return"style"===n&&null!==r&&(i="",D(_e(r),function(e,t){i+=e+":"+t+";"}),r=i),r}function Fe(e,t){var n,i=e.split(",");if(1<i.length)return n=[],D(i,function(){D(Fe(this,t),function(){E(this,n)<0&&n.push(this)})}),n;function c(e){return"string"!=typeof e?e:e.replace(/([^\w\-])/g,"\\$1")}function d(e){return e.replace(/\\/g,"")}function u(e,t){return"*"===e||e.toLowerCase()===c(t.toLowerCase())}function h(e,t,n){var i=[],e=(n.ownerDocument||n).getElementById(d(e));return e&&u(t,e.nodeName)&&Ie(n,e)&&i.push(e),i}function p(e,t,n){var i,r,o,a,l,s=n.ownerDocument||n,c=[];if(n.getElementsByClassName)for(r=0,o=(i=n.getElementsByClassName(d(e))).length;r<o;r++)u(t,(l=i[r]).nodeName)&&c.push(l);else if(s.querySelectorAll)for(r=0,o=(i=s.querySelectorAll(("#document"!==n.nodeName?n.nodeName+" ":"")+t+"."+e)).length;r<o;r++)Ie(n,l=i[r])&&c.push(l);else for(e=" "+e+" ",r=0,o=(i=n.getElementsByTagName(t)).length;r<o;r++)1==(l=i[r]).nodeType&&(a=l.className)&&-1<(" "+a+" ").indexOf(e)&&c.push(l);return c}function f(e,t,n,i){for(var r,o=[],a=i.getElementsByTagName(n),l=0,s=a.length;l<s;l++)1==(r=a[l]).nodeType&&(null===t?null!==Le(r,e)&&o.push(r):t===c(Le(r,e))&&o.push(r));return o}function r(e,t){var n=[],i=/^((?:\\.|[^.#\s\[<>])+)/.exec(e),r=i?i[1]:"*";if(i=/#((?:[\w\-]|\\.)+)$/.exec(e))n=h(i[1],r,t);else if(i=/\.((?:[\w\-]|\\.)+)$/.exec(e))n=p(i[1],r,t);else if(i=/\[((?:[\w\-]|\\.)+)\]/.exec(e))n=f(i[1].toLowerCase(),null,r,t);else if(i=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(e))e=i[1].toLowerCase(),i=i[2],n="id"===e?h(i,r,t):"class"===e?p(i,r,t):"name"===e?function(e,t,n){for(var i,r=[],o=(n.ownerDocument||n).getElementsByName(d(e)),a=0,l=o.length;a<l;a++)u(t,(i=o[a]).nodeName)&&Ie(n,i)&&null!==i.getAttribute("name")&&r.push(i);return r}(i,r,t):f(e,i,r,t);else for(var o,a=t.getElementsByTagName(r),l=0,s=a.length;l<s;l++)1==(o=a[l]).nodeType&&n.push(o);return n}t=t||document;for(var o,a=[],l=/((?:\\.|[^\s>])+|[\s>])/g;o=l.exec(e);)" "!==o[1]&&a.push(o[1]);var s=[];if(1==a.length)return r(a[0],t);for(var m,g,v,b,y,k,w,x,C,T=!1,_=0,S=a.length;_<S;_++)if(">"===(m=a[_]))T=!0;else{if(0<_){for(g=[],k=0,x=s.length;k<x;k++)for(w=0,C=(v=r(m,b=s[k])).length;w<C;w++)y=v[w],(!T||b===y.parentNode)&&g.push(y);s=g}else s=r(m,t);if(0===s.length)return[]}return s}function M(e){return x(e)[0]}function A(e){return e?e.ownerDocument||e.document||e:document}function s(e){return e?(e=A(e)).parentWindow||e.defaultView:window}function Be(e,t){return Y(t,e.className," ")}function Oe(e,t,n){f&&g<8&&"class"==t.toLowerCase()&&(t="className"),e.setAttribute(t,""+n)}function Ue(e){return e&&e.nodeName?e.nodeName.toLowerCase():""}function ze(e){return!!de[Ue(e)]}function I(e){return e=e||document,u?e.body:e.documentElement}function Pe(e){var t;return e=e||document,e=f||W||$?(t=I(e).scrollLeft,I(e).scrollTop):(t=s(e).scrollX,s(e).scrollY),{x:t,y:e}}function R(e){this.init(e)}x.query=function(e,t){return 0<(e=Fe(e,t)).length?e[0]:null},x.queryAll=Fe,t(R,{init:function(e){for(var t=this,n=0,i=0,r=(e=v(e)?e:[e]).length;i<r;i++)e[i]&&(t[i]=e[i].constructor===R?e[i][0]:e[i],n++);t.length=n,t.doc=A(t[0]),t.name=Ue(t[0]),t.type=0<t.length?t[0].nodeType:null,t.win=s(t[0])},each:function(e){for(var t=this,n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t;return t},bind:function(e,t){return this.each(function(){we(this,e,t)}),this},unbind:function(e,t){return this.each(function(){xe(this,e,t)}),this},fire:function(e){return this.length<1||function e(t,n){var i;0<=n.indexOf(",")?D(n.split(","),function(){e(t,this)}):(i=ye(t))&&(n=a[i][n],a[i])&&n&&0<n.length&&n[0]()}(this[0],e),this},hasAttr:function(e){return!(this.length<1||!Le(this[0],e))},attr:function(e,t){var n=this;if(void 0===e)return N(n.outer());if("object"===_typeof(e))D(e,function(e,t){n.attr(e,t)});else{if(void 0===t)return null===(t=n.length<1?null:Le(n[0],e))?"":t;n.each(function(){Oe(this,e,t)})}return n},removeAttr:function(n){return this.each(function(){var e,t;t=n,Oe(e=this,t=f&&g<8&&"class"==t.toLowerCase()?"className":t,""),e.removeAttribute(t)}),this},get:function(e){return this.length<1?null:this[e||0]},eq:function(e){return!(this.length<1)&&this[e]?new R(this[e]):null},hasClass:function(e){return!(this.length<1)&&Be(this[0],e)},addClass:function(e){return this.each(function(){Be(this,e)||(this.className=T(this.className+" "+e))}),this},removeClass:function(e){return this.each(function(){Be(this,e)&&(this.className=T(this.className.replace(new RegExp("(^|\\s)"+e+"(\\s|$)")," ")))}),this},html:function(r){var e=this;return void 0===r?e.length<1||1!=e.type?"":C(e[0].innerHTML):(e.each(function(){var t=this,n=r;if(1==t.nodeType){var i=A(t);try{t.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+n;var e=i.getElementById("__kindeditor_temp_tag__");e.parentNode.removeChild(e)}catch(e){x(t).empty(),x("@"+n,i).each(function(){t.appendChild(this)})}}}),e)},text:function(){return this.length<1?"":f?this[0].innerText:this[0].textContent},hasVal:function(){return!(this.length<1)&&ze(this[0])},val:function(e){var t=this;return void 0===e?t.length<1?"":t.hasVal()?t[0].value:t.attr("value"):(t.each(function(){ze(this)?this.value=e:Oe(this,"value",e)}),t)},css:function(e,t){var n,i,r,o,a,l=this;if(void 0===e)return _e(l.attr("style"));if("object"===_typeof(e))D(e,function(e,t){l.css(e,t)});else{if(void 0===t)return!(l.length<1)&&(l[0].style[Z(e)]||(n=l[0],i=e,r=s(n),o=Z(i),a="",r.getComputedStyle?a=(r=r.getComputedStyle(n,null))[o]||r.getPropertyValue(i)||n.style[o]:n.currentStyle&&(a=n.currentStyle[o]||n.style[o]),a))||"";l.each(function(){this.style[Z(e)]=t})}return l},width:function(e){return void 0===e?this.length<1?0:this[0].offsetWidth:this.css("width",b(e))},height:function(e){return void 0===e?this.length<1?0:this[0].offsetHeight:this.css("height",b(e))},opacity:function(e){return this.each(function(){void 0===this.style.opacity?this.style.filter=1==e?"":"alpha(opacity="+100*e+")":this.style.opacity=1==e?"":e}),this},data:function(e,t){return e="kindeditor_data_"+e,void 0===t?this.length<1?null:this[0][e]:(this.each(function(){this[e]=t}),this)},pos:function(){var e=this[0],t=0,n=0;if(e)if(e.getBoundingClientRect)var i=e.getBoundingClientRect(),r=Pe(this.doc),t=i.left+r.x,n=i.top+r.y;else for(;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:w(t),y:w(n)}},clone:function(e){return this.length<1?new R([]):new R(this[0].cloneNode(e))},append:function(e){return this.each(function(){this.appendChild&&this.appendChild(M(e))}),this},appendTo:function(e){return this.each(function(){M(e).appendChild(this)}),this},before:function(e){return this.each(function(){this.parentNode.insertBefore(M(e),this)}),this},after:function(e){return this.each(function(){this.nextSibling?this.parentNode.insertBefore(M(e),this.nextSibling):this.parentNode.appendChild(M(e))}),this},replaceWith:function(i){var r=[];return this.each(function(e,t){xe(t);var n=M(i);t.parentNode.replaceChild(n,t),r.push(n)}),x(r)},empty:function(){return this.each(function(e,t){for(var n=t.firstChild;n;){if(!t.parentNode)return;var i=n.nextSibling;n.parentNode.removeChild(n),n=i}}),this},remove:function(r){var o=this;return o.each(function(e,t){if(t.parentNode){if(xe(t),r)for(var n=t.firstChild;n;){var i=n.nextSibling;t.parentNode.insertBefore(n,t),n=i}t.parentNode.removeChild(t),delete o[e]}}),o.length=0,o},show:function(e){return void 0===e&&(e=this._originDisplay||""),"none"!=this.css("display")?this:this.css("display",e)},hide:function(){var e=this;return e.length<1?e:(e._originDisplay=e[0].style.display,e.css("display","none"))},outer:function(){var e,t;return this.length<1?"":((e=this.doc.createElement("div")).appendChild(this[0].cloneNode(!0)),t=C(e.innerHTML),e=null,t)},isSingle:function(){return!!re[this.name]},isInline:function(){return!!ne[this.name]},isBlock:function(){return!!ie[this.name]},isStyle:function(){return!!oe[this.name]},isControl:function(){return!!ae[this.name]},contains:function(e){return!(this.length<1)&&Ie(this[0],M(e))},parent:function(){var e;return!(this.length<1)&&(e=this[0].parentNode)?new R(e):null},children:function(){if(this.length<1)return new R([]);for(var e=[],t=this[0].firstChild;t;)3==t.nodeType&&""===T(t.nodeValue)||e.push(t),t=t.nextSibling;return new R(e)},first:function(){var e=this.children();return 0<e.length?e.eq(0):null},last:function(){var e=this.children();return 0<e.length?e.eq(e.length-1):null},index:function(){if(this.length<1)return-1;for(var e=-1,t=this[0];t;)e++,t=t.previousSibling;return e},prev:function(){var e;return!(this.length<1)&&(e=this[0].previousSibling)?new R(e):null},next:function(){var e;return!(this.length<1)&&(e=this[0].nextSibling)?new R(e):null},scan:function(r,o){if(!(this.length<1))return o=void 0===o||o,function e(t){for(var n=o?t.firstChild:t.lastChild;n;){var i=o?n.nextSibling:n.previousSibling;if(!1===r(n))return!1;if(!1===e(n))return!1;n=i}}(this[0]),this}}),D("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),function(e,t){R.prototype[t]=function(e){return e?this.bind(t,e):this.fire(t)}});var e=x,x=function(e,t){if(null!=e){if("string"!=typeof e)return e&&e.constructor===R?e:v(e=e.toArray?e.toArray():e)?s(e):s(ee(arguments));t=t&&M(t);var n=e.length;if((e="@"===e.charAt(0)?e.substr(1):e).length!==n||/<.+>/.test(e)){var i=(t?t.ownerDocument||t:document).createElement("div"),r=[];i.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+e;for(var o=0,a=i.childNodes.length;o<a;o++){var l=i.childNodes[o];"__kindeditor_temp_tag__"!=l.id&&r.push(l)}return s(r)}return s(Fe(e,t))}function s(e){return new R(e=e[0]?e:[])}},He=(D(e,function(e,t){x[e]=t}),x.NodeClass=R,window.KindEditor=x,0);function je(e){return e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e}function qe(l,s,c){var d=l.doc,u=[];function h(e,t,n){var i,r,o=e.nodeValue.length;return s&&(i=e.cloneNode(!0),i=0<t?i.splitText(t):i,n<o)&&i.splitText(n-t),c&&(r=e,0<t&&(r=e.splitText(t),l.setStart(e,t)),n<o&&(e=r.splitText(n-t),l.setEnd(e,0)),u.push(r)),i}var p=l.cloneRange().down(),f=-1,m=-1,g=-1,v=-1,e=l.commonAncestor(),t=d.createDocumentFragment();if(3==e.nodeType){var n=h(e,l.startOffset,l.endOffset);s&&t.appendChild(n),c&&l.up().collapse(!0);for(var i=0,r=u.length;i<r;i++){var o=u[i];o.parentNode&&o.parentNode.removeChild(o)}}else{!function e(t,n){for(var i=t.firstChild;i;){var r,o=new L(d).selectNode(i);if(f=o.compareBoundaryPoints(1,l),0<=(m=0<=f&&m<=0?o.compareBoundaryPoints(0,l):m)&&g<=0&&(g=o.compareBoundaryPoints(2,l)),0<=(v=0<=g&&v<=0?o.compareBoundaryPoints(3,l):v))return!1;if(o=i.nextSibling,0<f)if(1==i.nodeType){if(0<=m&&g<=0)s&&n.appendChild(i.cloneNode(!0)),c&&u.push(i);else if(s&&(r=i.cloneNode(!1),n.appendChild(r)),!1===e(i,r))return!1}else if(3==i.nodeType){var a=i==p.startContainer?h(i,p.startOffset,i.nodeValue.length):i==p.endContainer?h(i,0,p.endOffset):h(i,0,i.nodeValue.length);if(s)try{n.appendChild(a)}catch(e){}}i=o}}(e,t),c&&l.up().collapse(!0);for(var a=0,b=u.length;a<b;a++){var y=u[a];y.parentNode&&y.parentNode.removeChild(y)}}return s?t:l}function We(e,t){for(var n=t;n;){var i=x(n);if("marquee"==i.name||"select"==i.name)return;n=n.parentNode}try{e.moveToElementText(t)}catch(e){}}function $e(e,t){var n=e.parentElement().ownerDocument,i=e.duplicate(),t=(i.collapse(t),i.parentElement()),r=t.childNodes;if(0===r.length)return{node:t.parentNode,offset:x(t).index()};var o=n,a=0,l=-1,s=e.duplicate();We(s,t);for(var c=0,d=r.length;c<d;c++){var u,h,p,f,m=r[c];if(0===(l=s.compareEndPoints("StartToStart",i)))return{node:m.parentNode,offset:c};1==m.nodeType?(u=e.duplicate(),(p=x(f=m)).isControl()&&(h=n.createElement("span"),p.after(h),f=h,a+=p.text().replace(/\r\n|\n|\r/g,"").length),We(u,f),s.setEndPoint("StartToEnd",u),0<l?a+=u.text.replace(/\r\n|\n|\r/g,"").length:a=0,h&&x(h).remove()):3==m.nodeType&&(s.moveStart("character",m.nodeValue.length),a+=m.nodeValue.length),l<0&&(o=m)}if(l<0&&1==o.nodeType)return{node:t,offset:x(t.lastChild).index()+1};if(0<l)for(;o.nextSibling&&1==o.nodeType;)o=o.nextSibling;if(We(s=e.duplicate(),t),s.setEndPoint("StartToEnd",i),a-=s.text.replace(/\r\n|\n|\r/g,"").length,0<l&&3==o.nodeType)for(var g=o.previousSibling;g&&3==g.nodeType;)a-=g.nodeValue.length,g=g.previousSibling;return{node:o,offset:a}}function Ve(e,t){var n=e.ownerDocument||e,i=n.body.createTextRange();if(n==e)i.collapse(!0);else{if(1==e.nodeType&&0<e.childNodes.length){var r,o,a=e.childNodes,a=0===t?(r=a[0],!0):(r=a[t-1],!1);if(!r)return i;if("head"===x(r).name)return 1===t&&(a=!0),i.collapse(a=2===t?!1:a),i;if(1==r.nodeType)return(l=x(r)).isControl()&&(o=n.createElement("span"),a?l.before(o):l.after(o),r=o),We(i,r),i.collapse(a),o&&x(o).remove(),i;e=r,t=a?0:r.nodeValue.length}var l=n.createElement("span");x(e).before(l),We(i,l),i.moveStart("character",t),x(l).remove()}return i}function Ke(e){var t,n,i,r;function o(e){"tr"==x(e.node).name&&(e.node=e.node.cells[e.offset],e.offset=0)}return p?e.item?(t=new L(n=A(e.item(0)))).selectNode(e.item(0)):(n=e.parentElement().ownerDocument,r=$e(e,!0),i=$e(e,!1),o(r),o(i),(t=new L(n)).setStart(r.node,r.offset),t.setEnd(i.node,i.offset)):((t=new L(n=(r=e.startContainer).ownerDocument||r)).setStart(r,e.startOffset),t.setEnd(e.endContainer,e.endOffset)),t}function L(e){this.init(e)}function Ge(e){return e.nodeName?new L(e):e.constructor===L?e:Ke(e)}function F(e,t,n){try{e.execCommand(t,!1,n)}catch(e){}}function Qe(e,t){var n="";try{n=e.queryCommandValue(t)}catch(e){}return n="string"!=typeof n?"":n}function Ye(e){var t=s(e);return p?e.selection:t.getSelection()}function Xe(e){var r,o,a={};return D(e,function(e,t){for(var n=0,i=(r=e.split(",")).length;n<i;n++)o=r[n],a[o]=t}),a}function Ze(e,t){return Je(e,t,"*")||Je(e,t)}function Je(e,t,n){if(n=n||e.name,1===e.type){t=Xe(t);if(t[n])for(var i=t[n].split(","),r=0,o=i.length;r<o;r++){if("*"===(s=i[r]))return!0;var a=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(s),l=a[1]?"css":"attr",s=a[2],a=a[3]||"";if(""===a&&""!==e[l](s))return!0;if(""!==a&&e[l](s)===a)return!0}}return!1}function et(e,t){1==e.type&&(tt(e,t,"*"),tt(e,t))}function tt(e,t,n){if(n=n||e.name,1===e.type){t=Xe(t);if(t[n]){for(var i=t[n].split(","),r=!1,o=0,a=i.length;o<a;o++){if("*"===(s=i[o])){r=!0;break}var l=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(s),s=l[2];l[1]?(s=Z(s),e[0].style[s]&&(e[0].style[s]="")):e.removeAttr(s)}r&&e.remove(!0)}}}function nt(e){for(var t=e;t.first();)t=t.first();return t}function it(e){return 1==e.type&&!e.isSingle()&&""===e.html().replace(/<[^>]+>/g,"")}function rt(e,t){for(var n=nt(e=e.clone(!0)),i=e,r=!1;t;){for(;i;)i.name===t.name&&(!function(n,e,t){D(e,function(e,t){"style"!==e&&n.attr(e,t)}),D(t,function(e,t){n.css(e,t)})}(i,t.attr(),t.css()),r=!0),i=i.first();r||n.append(t.clone(!1)),r=!1,t=t.first()}return e}function ot(e,t){this.init(e,t)}function at(e,t){var n;return new ot(e=e.nodeName?Ge(n=A(e)).selectNodeContents(n.body).collapse(!1):e,t)}function lt(e){var t=e.moveEl,u=e.moveFn,h=e.clickEl||t,p=e.beforeDrag,e=void 0===e.iframeFix||e.iframeFix,f=[document];e&&x("iframe").each(function(){var e,t=Se(this.src||"","absolute");if(!/^https?:\/\//.test(t)){try{e=ct(this)}catch(e){}e&&(t=x(this).pos(),x(e).data("pos-x",t.x),x(e).data("pos-y",t.y),f.push(e))}}),h.mousedown(function(e){var n,i,r,o,a,l,s;function c(e){e.preventDefault();var t=x(A(e.target)),n=w((t.data("pos-x")||0)+e.pageX-l),t=w((t.data("pos-y")||0)+e.pageY-s);u.call(h,i,r,o,a,n,t)}function d(e){e.preventDefault()}0!==e.button&&1!==e.button||(e.stopPropagation(),n=h.get(),i=y(t.css("left")),r=y(t.css("top")),o=t.width(),a=t.height(),l=e.pageX,s=e.pageY,p&&p(),x(f).mousemove(c).mouseup(function e(t){t.preventDefault(),x(f).unbind("mousemove",c).unbind("mouseup",e).unbind("selectstart",d),n.releaseCapture&&n.releaseCapture()}).bind("selectstart",d),n.setCapture&&n.setCapture())})}function n(e){this.init(e)}function st(e){return new n(e)}function ct(e){return(e=M(e)).contentDocument||e.contentWindow.document}t(L,{init:function(e){var t=this;t.startContainer=e,t.startOffset=0,t.endContainer=e,t.endOffset=0,t.collapsed=!0,t.doc=e},commonAncestor:function(){function e(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t}for(var t,n,i=e(this.startContainer),r=e(this.endContainer),o=0,a=i.length,l=r.length;++o&&(t=i[a-o],n=r[l-o],t)&&n&&t===n;);return i[a-o+1]},setStart:function(e,t){var n=this,i=n.doc;return n.startContainer=e,n.startOffset=t,n.endContainer===i&&(n.endContainer=e,n.endOffset=t),je(this)},setEnd:function(e,t){var n=this,i=n.doc;return n.endContainer=e,n.endOffset=t,n.startContainer===i&&(n.startContainer=e,n.startOffset=t),je(this)},setStartBefore:function(e){return this.setStart(e.parentNode||this.doc,x(e).index())},setStartAfter:function(e){return this.setStart(e.parentNode||this.doc,x(e).index()+1)},setEndBefore:function(e){return this.setEnd(e.parentNode||this.doc,x(e).index())},setEndAfter:function(e){return this.setEnd(e.parentNode||this.doc,x(e).index()+1)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){var t=x(e);return 3==t.type||t.isSingle()?this.selectNode(e):0<(t=t.children()).length?this.setStartBefore(t[0]).setEndAfter(t[t.length-1]):this.setStart(e,0).setEnd(e,0)},collapse:function(e){return e?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(e,t){var n=this.get(),i=t.get();if(p){var r,o,a,l,s,c={0:"StartToStart",1:"EndToStart",2:"EndToEnd",3:"StartToEnd"},c=n.compareEndPoints(c[e],i);if(0!==c)return c;if(0!==e&&3!==e||(r=this.startContainer,l=this.startOffset),1!==e&&2!==e||(r=this.endContainer,l=this.endOffset),0!==e&&1!==e||(o=t.startContainer,s=t.startOffset),2!==e&&3!==e||(o=t.endContainer,s=t.endOffset),r===o)return 0<(c=l-s)?1:c<0?-1:0;for(a=o;a&&a.parentNode!==r;)a=a.parentNode;if(a)return x(a).index()>=l?-1:1;for(a=r;a&&a.parentNode!==o;)a=a.parentNode;return a?x(a).index()>=s?1:-1:(a=x(o).next())&&a.contains(r)?1:(a=x(r).next())&&a.contains(o)?-1:void 0}return n.compareBoundaryPoints(e,i)},cloneRange:function(){return new L(this.doc).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var e=this.get();return(p?e.text:e.toString()).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return qe(this,!0,!1)},deleteContents:function(){return qe(this,!1,!0)},extractContents:function(){return qe(this,!0,!0)},insertNode:function(e){var t,n,i,r=this,o=r.startContainer,a=r.startOffset,l=r.endContainer,s=r.endOffset,c=1;return"#document-fragment"===e.nodeName.toLowerCase()&&(t=e.firstChild,n=e.lastChild,c=e.childNodes.length),1==o.nodeType?(i=o.childNodes[a])?(o.insertBefore(e,i),o===l&&(s+=c)):o.appendChild(e):3==o.nodeType&&(0===a?(o.parentNode.insertBefore(e,o),o.parentNode===l&&(s+=c)):a>=o.nodeValue.length?o.nextSibling?o.parentNode.insertBefore(e,o.nextSibling):o.parentNode.appendChild(e):(i=0<a?o.splitText(a):o,o.parentNode.insertBefore(e,i),o===l&&(l=i,s-=a))),t?r.setStartBefore(t).setEndAfter(n):r.selectNode(e),1<=r.compareBoundaryPoints(2,r.cloneRange().setEnd(l,s))?r:r.setEnd(l,s)},surroundContents:function(e){return e.appendChild(this.extractContents()),this.insertNode(e).selectNode(e)},isControl:function(){var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset;return 1==e.nodeType&&e===n&&t+1===i&&x(e.childNodes[t]).isControl()},get:function(e){var t,n=this,i=n.doc;if(p)e&&n.isControl()?(t=i.body.createControlRange()).addElement(n.startContainer.childNodes[n.startOffset]):(e=n.cloneRange().down(),(t=i.body.createTextRange()).setEndPoint("StartToStart",Ve(e.startContainer,e.startOffset)),t.setEndPoint("EndToStart",Ve(e.endContainer,e.endOffset)));else{t=i.createRange();try{t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset)}catch(e){}}return t},html:function(){return x(this.cloneContents()).outer()},down:function(){var l=this;function e(e,t,n){var i,r,o,a;1==e.nodeType&&0!==(e=x(e).children()).length&&(0<t&&(i=e.eq(t-1)),t<e.length&&(r=e.eq(t)),i&&3==i.type&&(a=(o=i[0]).nodeValue.length),r&&3==r.type&&(o=r[0],a=0),o)&&(n?l.setStart(o,a):l.setEnd(o,a))}return e(l.startContainer,l.startOffset,!0),e(l.endContainer,l.endOffset,!1),l},up:function(){var i=this;function e(e,t,n){3==e.nodeType&&(0===t?n?i.setStartBefore(e):i.setEndBefore(e):t==e.nodeValue.length&&(n?i.setStartAfter(e):i.setEndAfter(e)))}return e(i.startContainer,i.startOffset,!0),e(i.endContainer,i.endOffset,!1),i},enlarge:function(o){var a=this;function e(e,t,n){var i,r=x(e);if(!(3==r.type||se[r.name]||!o&&r.isBlock()))if(0===t){for(;!r.prev()&&(i=r.parent())&&!se[i.name]&&(o||!i.isBlock());)r=i;n?a.setStartBefore(r[0]):a.setEndBefore(r[0])}else if(t==r.children().length){for(;!r.next()&&(i=r.parent())&&!se[i.name]&&(o||!i.isBlock());)r=i;n?a.setStartAfter(r[0]):a.setEndAfter(r[0])}}return a.up(),e(a.startContainer,a.startOffset,!0),e(a.endContainer,a.endOffset,!1),a},shrink:function(){for(var e,t=this,n=t.collapsed;1==t.startContainer.nodeType&&(e=t.startContainer.childNodes[t.startOffset])&&1==e.nodeType&&!x(e).isSingle();)t.setStart(e,0);if(n)return t.collapse(n);for(;1==t.endContainer.nodeType&&0<t.endOffset&&(e=t.endContainer.childNodes[t.endOffset-1])&&1==e.nodeType&&!x(e).isSingle();)t.setEnd(e,e.childNodes.length);return t},createBookmark:function(e){var t,n=this.doc,n=x('<span style="display:none;"></span>',n)[0];return n.id="__kindeditor_bookmark_start_"+He+++"__",this.collapsed||((t=n.cloneNode(!0)).id="__kindeditor_bookmark_end_"+He+++"__"),t&&this.cloneRange().collapse(!1).insertNode(t).setEndBefore(t),this.insertNode(n).setStartAfter(n),{start:e?"#"+n.id:n,end:t?e?"#"+t.id:t:null}},moveToBookmark:function(e){var t=this,n=t.doc,i=x(e.start,n),e=e.end?x(e.end,n):null;return!i||i.length<1||(t.setStartBefore(i[0]),i.remove(),e&&0<e.length?(t.setEndBefore(e[0]),e.remove()):t.collapse(!0)),t},dump:function(){console.log("--------------------"),console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset),console.log(3==this.endContainer.nodeType?this.endContainer.nodeValue:this.endContainer,this.endOffset)}}),x.RangeClass=L,x.range=Ge,x.START_TO_START=0,x.START_TO_END=1,x.END_TO_END=2,x.END_TO_START=3,t(ot,{init:function(e,t){var n=this,i=e.doc;n.doc=i,n.win=s(i),n.sel=Ye(i),n.range=e,n.editorOptions=t},selection:function(e){var t=this,n=t.doc,i=function(e){var t,n=Ye(e);try{t=0<n.rangeCount?n.getRangeAt(0):n.createRange()}catch(e){}return!p||t&&(t.item||t.parentElement().ownerDocument===e)?t:null}(n);return t.sel=Ye(n),i?(t.range=Ge(i),"html"==x(t.range.startContainer).name&&t.range.selectNodeContents(n.body).collapse(!1)):e&&t.range.selectNodeContents(n.body).collapse(!1),t},select:function(e){e=S(e,!0);var t,n=this,i=n.sel,r=n.range.cloneRange().shrink(),o=r.startContainer,a=r.startOffset,l=(r.endContainer,r.endOffset,A(o)),s=n.win,c=!1;if(e&&1==o.nodeType&&r.collapsed){if(p){var e=x("<span>&nbsp;</span>",l);r.insertNode(e[0]),t=l.body.createTextRange();try{t.moveToElementText(e[0])}catch(e){}return t.collapse(!1),t.select(),e.remove(),s.focus(),n}m&&(e=o.childNodes,x(o).isInline()||0<a&&x(e[a-1]).isInline()||e[a]&&x(e[a]).isInline())&&(r.insertNode(l.createTextNode("​")),c=!0)}if(p)try{(t=r.get(!0)).select()}catch(e){console.info("error",e)}else if(c&&r.collapse(!1),t=r.get(!0),i.removeAllRanges(),i.addRange(t),n.editorOptions&&n.editorOptions.scrollToEditingTarget&&l!==document){try{if(1<[].filter.call(t.endContainer.children,function(e){return"IMG"==e.nodeName}).length)return}catch(e){console.info("error",e)}o=x(t.endContainer).pos();s.scrollTo(o.x,o.y)}return s.focus(),n},wrap:function(e){var t=this,n=t.doc,i=t.range,l=x(e,n);if(i.collapsed)i.shrink(),i.insertNode(l[0]).selectNodeContents(l[0]);else if(l.isBlock()){for(var e=l.clone(!0),r=e;r.first();)r=r.first();r.append(i.extractContents()),i.insertNode(e[0]).selectNode(e[0])}else{i.enlarge();var s=i.createBookmark(),n=i.commonAncestor(),c=!1;x(n).scan(function(e){if(c||e!=s.start){if(c){if(e==s.end)return!1;var t,n=x(e);if(!function(e){for(;e&&"body"!=e.name;){if(le[e.name]||"div"==e.name&&e.hasClass("ke-script"))return 1;e=e.parent()}}(n)&&(3==n.type&&0<T(e.nodeValue).length)){for(;(t=n.parent())&&t.isStyle()&&1==t.children().length;)n=t;var i=n,e=l;if(e=e.clone(!0),3==i.type)nt(e).append(i.clone(!1)),i.replaceWith(e);else{for(var r=i;(o=i.first())&&1==o.children().length;)i=o;for(var o=i.first(),a=i.doc.createDocumentFragment();o;)a.appendChild(o[0]),o=o.next();e=rt(r,e),a.firstChild&&nt(e).append(a),r.replaceWith(e)}}}}else c=!0}),i.moveToBookmark(s)}return t},split:function(e,t){for(var n,i,r=this.range,o=r.doc,a=r.cloneRange().collapse(e),l=a.startContainer,s=a.startOffset,c=3==l.nodeType?l.parentNode:l,d=!1;c&&c.parentNode;){if(n=x(c),t){if(!n.isStyle())break;if(!Ze(n,t))break}else if(se[n.name])break;d=!0,c=c.parentNode}return d&&(o=o.createElement("span"),r.cloneRange().collapse(!e).insertNode(o),e?a.setStartBefore(c.firstChild).setEnd(l,s):a.setStart(l,s).setEndAfter(c.lastChild),s=(l=a.extractContents()).firstChild,i=l.lastChild,e?(a.insertNode(l),r.setStartAfter(i).setEndBefore(o)):(c.appendChild(l),r.setStartBefore(o).setEndBefore(s)),(a=o.parentNode)==r.endContainer&&(i=x(o).prev(),l=x(o).next(),i&&l&&3==i.type&&3==l.type?r.setEnd(i[0],i[0].nodeValue.length):e||r.setEnd(r.endContainer,r.endOffset-1)),a.removeChild(o)),this},remove:function(n){var e,t,i,r,o,a,l,s=this,c=s.doc,d=s.range;if(d.enlarge(),0===d.startOffset){for(var u,h=x(d.startContainer);(u=h.parent())&&u.isStyle()&&1==u.children().length;)h=u;d.setStart(h[0],0),(h=x(d.startContainer)).isBlock()&&et(h,n);var p=h.parent();p&&p.isBlock()&&et(p,n)}return d.collapsed?(s.split(!0,n),e=d.startContainer,0<(a=d.startOffset)&&(p=x(e.childNodes[a-1]))&&it(p)&&(p.remove(),d.setStart(e,a-1)),(p=x(e.childNodes[a]))&&it(p)&&p.remove(),it(e)&&(d.startBefore(e),e.remove()),d.collapse(!0)):(s.split(!0,n),s.split(!1,n),t=c.createElement("span"),i=c.createElement("span"),d.cloneRange().collapse(!1).insertNode(i),d.cloneRange().collapse(!0).insertNode(t),o=!(r=[]),p=(x(d.commonAncestor()).scan(function(e){if(o||e!=t)return e!=i&&void(o&&r.push(e));o=!0}),x(t).remove(),x(i).remove(),e=d.startContainer,a=d.startOffset,d.endContainer),c=d.endOffset,0<a&&((l=x(e.childNodes[a-1]))&&it(l)&&(l.remove(),d.setStart(e,a-1),e==p)&&d.setEnd(p,c-1),l=x(e.childNodes[a]))&&it(l)&&(l.remove(),e==p)&&d.setEnd(p,c-1),l=((a=x(p.childNodes[d.endOffset]))&&it(a)&&a.remove(),d.createBookmark(!0)),D(r,function(e,t){et(x(t),n)}),d.moveToBookmark(l)),s},commonNode:function(i){var e=this.range,t=e.endContainer,e=e.endOffset,n=3==t.nodeType||0===e?t:t.childNodes[e-1];function r(e){for(var t=e,n=e;n;){if(Ze(x(n),i))return x(n);n=n.parentNode}for(;t=t&&t.lastChild;)if(Ze(x(t),i))return x(t);return null}var o=r(n);if(o)return o;if(n&&(1==n.nodeType||3==t.nodeType&&0===e)){o=x(n).prev();if(o)return r(o)}return null},commonAncestor:function(t){var e=this.range,n=e.startContainer,i=e.startOffset,r=e.endContainer,e=e.endOffset,n=3==n.nodeType||0===i?n:n.childNodes[i-1],i=3==r.nodeType||0===e?r:r.childNodes[e-1];function o(e){for(;e;){if(1==e.nodeType&&e.tagName.toLowerCase()===t)return e;e=e.parentNode}return null}r=o(n),e=o(i);return r&&e&&r===e?x(r):null},state:function(e){var t=this.doc,n=!1;try{n=t.queryCommandState(e)}catch(e){}return n},val:function(e){var t=this,n=t.doc;t.range;function i(e){return e.toLowerCase()}var r,o="";return"fontfamily"===(e=i(e))||"fontname"===e?i(o=(o=Qe(n,"fontname")).replace(/['"]/g,"")):"formatblock"===e?i(o="Normal"===(o=""===(o=Qe(n,e))&&(r=t.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))?r.name:o)?"p":o):"fontsize"===e?i(o=(r=t.commonNode({"*":".font-size"}))?r.css("font-size"):o):"forecolor"===e?i(o=""===(o=J(o=(r=t.commonNode({"*":".color"}))?r.css("color"):o))?"default":o):"hilitecolor"===e?i(o=""===(o=J(o=(r=t.commonNode({"*":".background-color"}))?r.css("background-color"):o))?"default":o):o},toggle:function(e,t){return this.commonNode(t)?this.remove(t):this.wrap(e),this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(e){return this.wrap('<span style="color:'+e+';"></span>').select()},hilitecolor:function(e){return this.wrap('<span style="background-color:'+e+';"></span>').select()},fontsize:function(e){return this.wrap('<span style="font-size:'+e+';"></span>').select()},fontname:function(e){return this.fontfamily(e)},fontfamily:function(e){return this.wrap('<span style="font-family:'+e+';"></span>').select()},removeformat:function(){var n={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"};return D(oe,function(e,t){n[e]="*"}),this.remove(n),this.select()},inserthtml:function(t,e){var r=this,n=r.range;if(""!==t)if(p&&e)try{var i=n,o=t,a=(o='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+o,i.get());a.item?a.item(0).outerHTML=o:a.pasteHTML(o),(o=i.doc.getElementById("__kindeditor_temp_tag__")).parentNode.removeChild(o),o=Ke(a),i.setEnd(o.endContainer,o.endOffset),i.collapse(!1),r.select(!1)}catch(e){l(n,t)}else l(n,t);return r;function l(e,t){var n=e.doc,i=n.createDocumentFragment();x("@"+t,n).each(function(){i.appendChild(this)}),e.deleteContents(),e.insertNode(i),e.collapse(!1),r.select(!1)}},hr:function(){return this.inserthtml("<hr />")},print:function(){return this.win.print(),this},insertimage:function(e,t,n,i,r,o,a,l){t=S(t,""),r=S(r,0);r='<img data-ke-class="'+(a=S(a,""))+'" src="'+k(e)+'" data-ke-src="'+k(e)+'" ';return n&&(r+='width="'+k(n)+'" '),i&&(r+='height="'+k(i)+'" '),t&&(r+='title="'+k(t)+'" '),o&&(r+='align="'+k(o)+'" '),r=r+('alt="'+k(t)+'" ')+"/>",this.inserthtml(r=l?"<"+l+">"+r+"</"+l+">":r)},createlink:function(e,t){var n=this,i=n.doc,r=n.range,o=(n.select(),n.commonNode({a:"*"})),o=(o&&!r.isControl()&&(r.selectNode(o.get()),n.select()),'<a href="'+k(e)+'" data-ke-src="'+k(e)+'" ');if(t&&(o+=' target="'+k(t)+'"'),r.collapsed)return o+=">"+k(e)+"</a>",n.inserthtml(o);if(r.isControl())return(l=x(r.startContainer.childNodes[r.startOffset])).after(x(o+="></a>",i)),l.next().append(l),r.selectNode(l[0]),n.select();function a(e,t,n){x(e).attr("href",t).attr("data-ke-src",t),n?x(e).attr("target",n):x(e).removeAttr("target")}var o=r.startContainer,l=r.startOffset,s=r.endContainer,r=r.endOffset;if(1==o.nodeType&&o===s&&l+1===r){s=o.childNodes[l];if("a"==s.nodeName.toLowerCase())return a(s,e,t),n}return F(i,"createlink","__kindeditor_temp_url__"),x('a[href="__kindeditor_temp_url__"]',i).each(function(){a(this,e,t)}),n},unlink:function(){var e,t=this,n=t.doc,i=t.range;return t.select(),i.collapsed?((e=t.commonNode({a:"*"}))&&(i.selectNode(e.get()),t.select()),F(n,"unlink",null),m&&"img"===x(i.startContainer).name&&"a"===(e=x(i.startContainer).parent()).name&&e.remove(!0)):F(n,"unlink",null),t}}),D("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(e,n){ot.prototype[n]=function(e){var t=this;return t.select(),F(t.doc,n,e),p&&0<=E(n,"justifyleft,justifycenter,justifyright,justifyfull".split(","))&&t.selection(),(!p||0<=E(n,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(",")))&&t.selection(),t}}),D("cut,copy,paste".split(","),function(e,t){ot.prototype[t]=function(){if(this.doc.queryCommandSupported(t))return this.select(),F(this.doc,t,null),this;throw"not supported"}}),x.CmdClass=ot,x.cmd=at,t(n,{init:function(e){var i,r=this;r.name=e.name||"",r.doc=e.doc||document,r.win=s(r.doc),r.x=b(e.x),r.y=b(e.y),r.z=e.z,r.width=b(e.width),r.height=b(e.height),r.div=x('<div style="display:block;"></div>'),r.options=e,r._alignEl=e.alignEl,r.width&&r.div.css("width",r.width),r.height&&r.div.css("height",r.height),r.z&&r.div.css({position:"absolute",left:r.x,top:r.y,"z-index":r.z}),!r.z||void 0!==r.x&&void 0!==r.y||r.autoPos(r.width,r.height),e.cls&&r.div.addClass(e.cls),e.shadowMode&&r.div.addClass("ke-shadow"),e.css&&r.div.css(e.css),e.src?x(e.src).replaceWith(r.div):x(r.doc.body).append(r.div),e.html&&r.div.html(e.html),e.autoScroll&&(f&&g<7||u?(i=Pe(),x(r.win).bind("scroll",function(e){var t=Pe(),n=t.x-i.x,t=t.y-i.y;r.pos(y(r.x)+n,y(r.y)+t,!1)})):r.div.css("position","fixed"))},pos:function(e,t,n){var i=this;return n=S(n,!0),null!==e&&(e=e<0?0:b(e),i.div.css("left",e),n)&&(i.x=e),null!==t&&(t=t<0?0:b(t),i.div.css("top",t),n)&&(i.y=t),i},autoPos:function(e,t){var n,i,r,e=y(e)||0,t=y(t)||0,o=Pe();return i=this._alignEl?(r=(i=x(this._alignEl)).pos(),n=w(i[0].clientWidth/2-e/2),i=w(i[0].clientHeight/2-t/2),n=n<0?r.x:r.x+n,i<0?r.y:r.y+i):(r=I(this.doc),n=w(o.x+(r.clientWidth-e)/2),w(o.y+(r.clientHeight-t)/2)),f&&g<7||u||(n-=o.x,i-=o.y),this.pos(n,i)},remove:function(){var t=this;return(f&&g<7||u)&&x(t.win).unbind("scroll"),t.div.remove(),D(t,function(e){t[e]=null}),this},show:function(){return this.div.show(),this},hide:function(){return this.div.hide(),this},draggable:function(e){var a=this;return(e=e||{}).moveEl=a.div,e.moveFn=function(e,t,n,i,r,o){(e+=r)<0&&(e=0),(t+=o)<0&&(t=0),a.pos(e,t)},lt(e),a}}),x.WidgetClass=n,x.widget=st;var dt,ut="";function ht(e,t){return e.hasVal()?void 0===t?e.val().replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,""):e.val(t):e.html(t)}function pt(e){this.init(e)}function ft(e){return new pt(e)}function mt(e,t){e=this.get(e);e&&!e.hasClass("ke-disabled")&&t(e)}function gt(e){this.init(e)}function vt(e){return new gt(e)}function bt(e){this.init(e)}function yt(e){return new bt(e)}function kt(e){this.init(e)}function wt(e){return new kt(e)}function xt(e){this.init(e)}function Ct(e){this.init(e)}function Tt(e){return new Ct(e)}function _t(e,t){var n=document.getElementsByTagName("head")[0]||(u?document.body:document.documentElement),i=document.createElement("script");n.appendChild(i),i.src=e,i.charset="utf-8",i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(t&&t(),i.onload=i.onreadystatechange=null,n.removeChild(i))}}function St(e){var t=e.indexOf("?");return 0<t?e.substr(0,t):e}function Et(e){for(var t=document.getElementsByTagName("head")[0]||(u?document.body:document.documentElement),n=document.createElement("link"),i=St(Se(e,"absolute")),r=x('link[rel="stylesheet"]',t),o=0,a=r.length;o<a;o++)if(St(Se(r[o].href,"absolute"))===i)return;t.appendChild(n),n.href=e,n.rel="stylesheet"}(dt=document.getElementsByTagName("html"))&&(ut=dt[0].dir),t(pt,n,{init:function(l){var s=this,c=(pt.parent.init.call(s,l),s.srcElement=x(l.srcElement),s.div.addClass("ke-edit"),s.designMode=S(l.designMode,!0),s.beforeGetHtml=l.beforeGetHtml,s.beforeSetHtml=l.beforeSetHtml,s.afterSetHtml=l.afterSetHtml,S(l.themesPath,""),S(l.editorOptions.prismPath,"")),d=l.bodyClass,u=l.cssPath,h=l.cssData,p="res:"!=location.protocol&&location.host.replace(/:\d+/,"")!==document.domain,e="document.open();"+(p?'document.domain="'+document.domain+'";':"")+"document.close();",e=f?' src="javascript:void(function(){'+encodeURIComponent(e)+'}())"':"";function t(){var e,n,t,i,r,o=ct(s.iframe),a=(o.open(),p&&(o.domain=document.domain),o.write((e=d,i=u,r=h,n=[""===ut?"<html>":'<html dir="'+ut+'">','<head><meta charset="utf-8" /><title></title>',(t=c)?'<link href="'.concat(t,'/prism.css" rel="stylesheet" />'):"","<style>","html,body {margin:0;padding:0;}",'body, td {font:12px/1.5 "PingFang","Microsoft Yahei","苹方","微软雅黑", "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;line-height:28px;}","table {border-collapse:collapse;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",".ke-content {padding: 15px;}",'img[data-ke-class="ke-image"] { max-width: 100%;border: 2px solid transparent; }','img[data-ke-class="ke-image"]:hover { border-color: #4696ec; }',"audio,video{ border:3px solid transparent; }","audio:hover, video:hover{ border:3px solid #2196f3; }","pre{ font-size: 14px!important;line-height: 20px;width: 100%;background-color: #f4f2f0;padding: 6px 18px;box-sizing: border-box; border: 3px solid transparent;    word-break: break-all;white-space: break-spaces;-webkit-user-modify: read-only;line-height: 1.2em!important;}","pre:hover,pre:active{border: 3px solid #4696ec;}",".ke-script, .ke-noscript, .ke-display-none {","\tdisplay:none;","\tfont-size:0;","\twidth:0;","\theight:0;","}",".ke-pagebreak {","\tborder:1px dotted #AAA;","\tfont-size:0;","\theight:2px;","}","</style>"],D(i=v(i)?i:[i],function(e,t){t&&n.push('<link href="'+t+'" rel="stylesheet" />')}),r&&n.push("<style>"+r+"</style>"),n.push("</head><body "+(e?'class="'+e+'"':"")+' author="MHalo"></body>'),n.push("</html>"),n.join("\n"))),o.close(),s.win=s.iframe[0].contentWindow,at(s.doc=o,l.editorOptions));s.afterChange(function(e){a.selection();var t=null==(t=x(o.body).last())?void 0:t.children();!t||1==t.length&&"br"===t.name||x(o.body).append("<p><br /></p>")}),m&&x(o).click(function(e){"img"!==x(e.target).name&&"audio"!==x(e.target).name&&"video"!==x(e.target).name&&"pre"!==x(e.target).name||(a.selection(!0),a.range.selectNode(e.target),a.select())}),f&&(s._mousedownHandler=function(){var e=a.range.cloneRange();e.shrink(),e.isControl()&&s.blur()},x(document).mousedown(s._mousedownHandler),x(o).keydown(function(e){var t;8==e.which&&(console.info("ieieieie"),a.selection(),(t=a.range).isControl())&&(t.collapse(!0),x(t.startContainer.childNodes[t.startOffset]).remove(),e.preventDefault())})),s.cmd=a,s.html(ht(s.srcElement)),f?(o.body.disabled=!0,o.body.contentEditable=!0,o.body.removeAttribute("disabled")):o.designMode="on",l.afterCreate&&(i=null==s||null==(t=s.doc)?void 0:t.head,c&&i&&((r=s.doc.createElement("script")).src="".concat(c,"/prism.js"),r.setAttribute("data-manual","true"),i.appendChild(r)),l.afterCreate.call(s))}s.iframe=x('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+e+"></iframe>").css("width","100%"),s.textarea=x('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%"),s.tabIndex=isNaN(parseInt(l.tabIndex,10))?s.srcElement.attr("tabindex"):parseInt(l.tabIndex,10),s.iframe.attr("tabindex",s.tabIndex),s.textarea.attr("tabindex",s.tabIndex),s.width&&s.setWidth(s.width),s.height&&s.setHeight(s.height),(s.designMode?s.textarea:s.iframe).hide(),p&&s.iframe.bind("load",function(e){s.iframe.unbind("load"),f?t():setTimeout(t,0)}),s.div.append(s.iframe),s.div.append(s.textarea),s.srcElement.hide(),p||t()},setWidth:function(e){return e=b(e),this.width=e,this.div.css("width",e),this},setHeight:function(e){var t=this;return e=b(e),t.height=e,t.div.css("height",e),t.iframe.css("height",e),(f&&g<8||u)&&(e=b(y(e)-2)),t.textarea.css("height",e),t},remove:function(){var e=this,t=e.doc;x(t.body).unbind(),x(t).unbind(),x(e.win).unbind(),e._mousedownHandler&&x(document).unbind("mousedown",e._mousedownHandler),ht(e.srcElement,e.html()),e.srcElement.show(),e.iframe.unbind(),e.textarea.unbind(),pt.parent.remove.call(e)},html:function(e,t){var n=this,i=n.doc;return n.designMode?(i=i.body,void 0===e?(e=t?"<!doctype html><html>"+i.parentNode.innerHTML+"</html>":i.innerHTML,n.beforeGetHtml&&(e=n.beforeGetHtml(e)),h&&"<br />"==e?"":e):(n.beforeSetHtml&&(e=n.beforeSetHtml(e)),f&&9<=g&&(e=e.replace(/(<.*?checked=")checked(".*>)/gi,"$1$2")),x(i).html(e),n.afterSetHtml&&n.afterSetHtml(),n)):void 0===e?n.textarea.val():(n.textarea.val(e),n)},design:function(e){var t,n,i,r=this;return(void 0===e?!r.designMode:e)?r.designMode||(t=r.html(),r.designMode=!0,r.textarea.hide(),r.html(t),n=r.iframe,i=y(r.height),n.height(i-2),n.show(),setTimeout(function(){n.height(i)},0)):r.designMode&&(t=r.html(),r.designMode=!1,r.html(t),r.iframe.hide(),r.textarea.show()),r.focus()},focus:function(){return(this.designMode?this.win:this.textarea[0]).focus(),this},blur:function(){var e,t=this;return f?(e=x('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',t.div),t.div.append(e),e[0].focus(),e.remove()):(t.designMode?t.win:t.textarea[0]).blur(),t},afterChange:function(t){var e=this.doc,n=e.body;if(t)return x(e).keyup(function(e){e.ctrlKey||e.altKey||!pe[e.which]||t(e)}),x(e).mouseup(t).contextmenu(t),x(this.win).blur(t),x(n).bind("paste",i),x(n).bind("cut",i),this;function i(e){setTimeout(function(){t(e)},1)}}}),x.EditClass=pt,x.edit=ft,x.iframeDoc=ct,t(gt,n,{init:function(e){var n=this;function i(e){e=x(e);return e.hasClass("ke-outline")?e:e.hasClass("ke-toolbar-icon")?e.parent():void 0}function t(e,t){e=i(e.target);!e||e.hasClass("ke-disabled")||e.hasClass("ke-selected")||e[t]("ke-on")}gt.parent.init.call(n,e),n.disableMode=S(e.disableMode,!1),n.noDisableItemMap=_(S(e.noDisableItems,[])),n._itemMap={},n.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(e){e.preventDefault()}).attr("unselectable","on"),n.div.mouseover(function(e){t(e,"addClass")}).mouseout(function(e){t(e,"removeClass")}).click(function(e){var t=i(e.target);t&&!t.hasClass("ke-disabled")&&n.options.click.call(this,e,t.attr("data-name"))})},get:function(e){return this._itemMap[e]||(this._itemMap[e]=x("span.ke-icon-"+e,this.div).parent())},select:function(e){return mt.call(this,e,function(e){e.addClass("ke-selected")}),self},unselect:function(e){return mt.call(this,e,function(e){e.removeClass("ke-selected").removeClass("ke-on")}),self},enable:function(e){e=e.get?e:this.get(e);return e&&(e.removeClass("ke-disabled"),e.opacity(1)),this},disable:function(e){e=e.get?e:this.get(e);return e&&(e.removeClass("ke-selected").addClass("ke-disabled"),e.opacity(.5)),this},disableAll:function(e,t){var n=this,i=n.noDisableItemMap;return t&&(i=_(t)),(void 0===e?!n.disableMode:e)?(x("span.ke-outline",n.div).each(function(){var e=x(this),t=e[0].getAttribute("data-name",2);i[t]||n.disable(e)}),n.disableMode=!0):(x("span.ke-outline",n.div).each(function(){var e=x(this),t=e[0].getAttribute("data-name",2);i[t]||n.enable(e)}),n.disableMode=!1),n}}),x.ToolbarClass=gt,x.toolbar=vt,t(bt,n,{init:function(e){e.z=e.z||811213,bt.parent.init.call(this,e),this.centerLineMode=S(e.centerLineMode,!0),this.div.addClass("ke-menu").bind("click,mousedown",function(e){e.stopPropagation()}).attr("unselectable","on")},addItem:function(t){var e,n,i,r,o,a;if("-"!==t.title)return e=x('<div class="ke-menu-item" unselectable="on"></div>'),n=x('<div class="ke-inline-block ke-menu-item-left"></div>'),i=x('<div class="ke-inline-block ke-menu-item-right"></div>'),r=b(t.height),o=S(t.iconClass,""),this.div.append(e),r&&(e.css("height",r),i.css("line-height",r)),this.centerLineMode&&(a=x('<div class="ke-inline-block ke-menu-item-center"></div>'),r)&&a.css("height",r),e.mouseover(function(e){x(this).addClass("ke-menu-item-on"),a&&a.addClass("ke-menu-item-center-on")}).mouseout(function(e){x(this).removeClass("ke-menu-item-on"),a&&a.removeClass("ke-menu-item-center-on")}).click(function(e){t.click.call(x(this)),e.stopPropagation()}).append(n),a&&e.append(a),e.append(i),""!==(o=t.checked?"ke-icon-checked icon-ke-font":o)&&n.html('<span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-toolbar-icon-url '+o+'"></span>'),i.html(t.title),this;this.div.append(x('<div class="ke-menu-separator"></div>'))},remove:function(){var e=this;return e.options.beforeRemove&&e.options.beforeRemove.call(e),x(".ke-menu-item",e.div[0]).unbind(),bt.parent.remove.call(e),e}}),x.MenuClass=bt,x.menu=yt,t(kt,n,{init:function(e){var t=this,n=(e.z=e.z||811213,kt.parent.init.call(t,e),e.colors||[["#1abc9c","#2ecc71","#3498db","#9b59b6","#4e5f70","#f1c40f"],["#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f39c12"],["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]]),i=(t.selectedColor=(e.selectedColor||"").toLowerCase(),t._cells=[],t.div.addClass("ke-colorpicker").bind("click,mousedown",function(e){e.stopPropagation()}).attr("unselectable","on"),t.doc.createElement("table"));t.div.append(i),i.className="ke-colorpicker-table",i.cellPadding=0,i.cellSpacing=0,i.border=0;var r=(a=i.insertRow(0)).insertCell(0);r.colSpan=n[0].length,t._addAttr(r,"","ke-colorpicker-cell-top");for(var o=0;o<n.length;o++)for(var a=i.insertRow(o+1),l=0;l<n[o].length;l++)r=a.insertCell(l),t._addAttr(r,n[o][l],"ke-colorpicker-cell")},_addAttr:function(e,t,n){var i=this;e=x(e).addClass(n),i.selectedColor===t.toLowerCase()&&e.addClass("ke-colorpicker-cell-selected"),e.attr("title",t||i.options.noColor),e.mouseover(function(e){x(this).addClass("ke-colorpicker-cell-on")}),e.mouseout(function(e){x(this).removeClass("ke-colorpicker-cell-on")}),e.click(function(e){e.stop(),i.options.click.call(x(this),t)}),t?e.append(x('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",t)):e.html(i.options.noColor),x(e).attr("unselectable","on"),i._cells.push(e)},remove:function(){return D(this._cells,function(){this.unbind()}),kt.parent.remove.call(this),this}}),x.ColorPickerClass=kt,x.colorpicker=wt,t(xt,{init:function(n){var e,i=this,t=x(n.button),r=n.fieldName||"file",o=n.url||"",a=t.val(),l=n.extraParams||{},s=n.uploadResponseFilter,c=n.uploadCompress,d=t[0].className||"",u=n.target||"kindeditor_upload_iframe_"+(new Date).getTime(),h=(n.afterError=n.afterError||function(e){alert(e)},[]);for(e in l)h.push('<input type="hidden" name="'+e+'" value="'+l[e]+'" />');d=['<div class="ke-inline-block '+d+'">',n.target?"":'<iframe name="'+u+'" style="display:none;"></iframe>',n.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+u+'" action="'+o+'">','<span class="ke-button-common">',h.join(""),'<input type="button" class="ke-button-common ke-button" value="'+a+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+r+'" tabindex="-1" />',n.form?"</div>":"</form>","</div>"].join(""),u=x(d,t.doc),t.hide(),t.before(u),i.div=u,i.button=t,i.fileBox=x(".ke-upload-file",u),i.form=n.form?x(n.form):x("form",u),o=x.undef(n.fileSizeLimit,"1MB"),a=x.undef(n.fileTypeLimit,"*.jpg;*.gif;*.png"),i.uploader=WebUploader.create({server:n.uploadUrl,resize:!1,fileVal:"file",accept:{title:"Images",extensions:a.replace(/\*\./g,"").replace(/;/g,","),mimeTypes:"image/*"},headers:n.uploadHeader,formData:n.uploadData,fileNumLimit:1,fileSingleSizeLimit:1024*+o.replace(/MB/g,"")*1024}),void 0!==c&&(i.uploader.options.compress=c),i.uploader.on("uploadStart",function(e){}),i.uploader.on("uploadSuccess",function(e,t){var n=t;s&&(n=s.call(null,t)),i.options.afterUpload.call(i,n)}),i.uploader.on("uploadError",function(e,t){i.options.afterUpload.call(i,{error:1,message:"[http-error]图片上传失败！"})}),i.uploader.on("error",function(e){var t="文件上传出现错误，请检查后重试！";"Q_TYPE_DENIED"===e?t="["+arguments[1].name+"]文件类型不正确！":"F_EXCEED_SIZE"===e?t="文件大小超出限制（最大"+ +n.fileSizeLimit.replace(/MB/g,"")+"M）！":"F_DUPLICATE"===e&&(t="["+arguments[1].name+"]文件已存在于待上传列表中！"),console.error("文件上传出现错误，请检查后重试！",arguments),i.options.afterUpload.call(i,{error:1,message:t}),i.uploader.reset(),i.form&&i.form[0]&&i.form[0].reset&&i.form[0].reset()}),i.fileBox.bind("change",function(){i.uploader.reset(),this.files&&i.uploader.addFiles(this.files)}),r=n.width||x(".ke-button-common",u).width();x(".ke-upload-area",u).width(r),i.options=n},submit:function(){var e=this;if(!(e.uploader.getFiles().length<=0))return setTimeout(function(){e.uploader.upload()},100),e;alert("请选择文件"),e.uploader.reset()},remove:function(){var e=this;return e.fileBox&&e.fileBox.unbind(),e.div.remove(),e.button.show(),e}}),x.UploadButtonClass=xt,x.uploadbutton=function(e){return new xt(e)},t(Ct,n,{init:function(e){var t=this,n=S(e.shadowMode,!0),i=(e.z=e.z||811213,e.shadowMode=!1,e.autoScroll=S(e.autoScroll,!0),Ct.parent.init.call(t,e),e.title),r=x(e.body,t.doc),o=e.previewBtn,a=e.yesBtn,l=e.noBtn,s=e.closeBtn,c=S(e.showMask,!0),d=(t.div.addClass("ke-dialog").bind("click,mousedown",function(e){e.stopPropagation()}),x('<div class="ke-dialog-content"></div>').appendTo(t.div)),n=(f&&g<7?t.iframeMask=x('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(t.div):n&&x('<div class="ke-dialog-shadow"></div>').appendTo(t.div),x('<div class="ke-dialog-header"></div>')),i=(d.append(n),n.html(i),t.closeIcon=x('<span class="ke-dialog-icon-close" title="'+s.name+'"></span>').click(s.click),n.append(t.closeIcon),t.draggable({clickEl:n,beforeDrag:e.beforeDrag}),x('<div class="ke-dialog-body"></div>')),u=(d.append(i),i.append(r),x('<div class="ke-dialog-footer"></div>'));(o||a||l)&&d.append(u),D([{btn:o,name:"preview"},{btn:a,name:"yes"},{btn:l,name:"no"}],function(){var e,t,n;this.btn&&(e=this.btn,t=(e=e||{}).name||"",n=x('<span class="ke-button-common ke-button-outer" title="'+t+'"></span>'),t=x('<input class="ke-button-common ke-button" type="button" value="'+t+'" />'),e.click&&t.click(e.click),n.append(t),(e=n).addClass("ke-dialog-"+this.name),u.append(e))}),t.height&&i.height(y(t.height)-n.height()-u.height()-2),t.div.width(t.div.width()),t.div.height(t.div.height()),t.mask=null,c&&(s=I(t.doc),e=Math.max(s.scrollWidth,s.clientWidth),r=Math.max(s.scrollHeight,s.clientHeight),t.mask=st({x:0,y:0,z:t.z-1,cls:"ke-dialog-mask",width:e,height:r})),t.autoPos(t.div.width(),t.div.height()),t.footerDiv=u,t.bodyDiv=i,t.headerDiv=n,t.isLoading=!1},setMaskIndex:function(e){this.mask.div.css("z-index",e)},showLoading:function(e){e=S(e,"");var t=this,n=t.bodyDiv;return t.loading=x('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(n.height()/3)+'px;">'+e+"</div></div>").width(n.width()).height(n.height()).css("top",t.headerDiv.height()+"px"),n.css("visibility","hidden").after(t.loading),t.isLoading=!0,t},hideLoading:function(){return this.loading&&this.loading.remove(),this.bodyDiv.css("visibility","visible"),this.isLoading=!1,this},remove:function(){var e=this;return e.options.beforeRemove&&e.options.beforeRemove.call(e),e.mask&&e.mask.remove(),e.iframeMask&&e.iframeMask.remove(),e.closeIcon.unbind(),x("input",e.div).unbind(),x("button",e.div).unbind(),e.footerDiv.unbind(),e.bodyDiv.unbind(),e.headerDiv.unbind(),x("iframe",e.div).each(function(){x(this).remove()}),Ct.parent.remove.call(e),e}}),x.DialogClass=Ct,x.dialog=Tt,x.tabs=function(e){var i=st(e),t=i.remove,r=e.afterSelect,e=i.div,o=[],n=(e.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(e){e.preventDefault()}),x('<ul class="ke-tabs-ul ke-clearfix"></ul>'));return e.append(n),i.add=function(e){var t=x('<li class="ke-tabs-li">'+e.title+"</li>");t.data("tab",e),o.push(t),n.append(t)},i.selectedIndex=0,i.select=function(n){i.selectedIndex=n,D(o,function(e,t){t.unbind(),e===n?(t.addClass("ke-tabs-li-selected"),x(t.data("tab").panel).show("")):(t.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){x(this).addClass("ke-tabs-li-on")}).mouseout(function(){x(this).removeClass("ke-tabs-li-on")}).click(function(){i.select(e)}),x(t.data("tab").panel).hide())}),r&&r.call(i,n)},i.remove=function(){D(o,function(){this.remove()}),n.remove(),t.call(i)},i},x.loadScript=_t,x.loadStyle=Et,x.ajax=function(e,t,n,i,r){n=n||"GET",r=r||"json";var o=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(o.open(n,e,!0),o.onreadystatechange=function(){var e;4==o.readyState&&200==o.status&&t&&(e=T(o.responseText),"json"==r&&(e=te(e)),t(e))},"POST"==n){var a=[];D(i,function(e,t){a.push(encodeURIComponent(e)+"="+encodeURIComponent(t))});try{o.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(e){}o.send(a.join("&"))}else o.send(null)};var l={};function Dt(e,t){return void 0===e?l:t?void(l[e]=t):l[e]}var B={};function Nt(e){var t,n="core";return(t=/^(\w+)\.(\w+)$/.exec(e))&&(n=t[1],e=t[2]),{ns:n,key:e}}function Mt(e,n){var t;if(n=void 0===n?x.options.langType:n,"string"==typeof e)return B[n]?(t=e.length-1,"."===e.substr(t)?B[n][e.substr(0,t)]:(t=Nt(e),B[n][t.ns][t.key])):"no language";D(e,function(e,t){e=Nt(e);B[n]||(B[n]={}),B[n][e.ns]||(B[n][e.ns]={}),B[n][e.ns][e.key]=t})}function At(e,t){var n,i;if(!e.collapsed)return n=(e=e.cloneRange().up()).startContainer,i=e.startOffset,(m||e.isControl())&&(e=x(n.childNodes[i]))&&"img"==e.name&&t(e)?e:void 0}function O(e){return T(e.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/gi,""))}function It(e){return e.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/gi,"")}function Rt(e,t){var n;0!==e.length&&(n=e[e.length-1],O(t.html)===O(n.html))||e.push(t)}function Lt(e,t){var n,i,r=this,o=r.edit,a=o.doc.body;return 0!==e.length&&(o.designMode?(i=(n=r.cmd.range).createBookmark(!0)).html=a.innerHTML:i={html:a.innerHTML},Rt(t,i),t=e.pop(),O(i.html)===O(t.html)&&0<e.length&&(t=e.pop()),o.designMode?(o.html(t.html),t.start&&(n.moveToBookmark(t),r.select())):x(a).html(O(t.html))),r}function Ft(n){var i=this;function r(e,t){void 0===Ft.prototype[e]&&(i[e]=t),i.options[e]=t}i.options={},D(n,function(e,t){r(e,n[e])}),D(x.options,function(e,t){void 0===i[e]&&r(e,t)});var e=x(i.srcElement||"<textarea/>");i.width||(i.width=e[0].style.width||e.width()),i.height||(i.height=e[0].style.height||e.height()),r("width",S(i.width,i.minWidth)),r("height",S(i.height,i.minHeight)),r("width",b(i.width)),r("height",b(i.height)),V&&(!K||g<534)&&(i.designMode=!1),i.srcElement=e,i.initContent="",i.plugin={},i.isCreated=!1,i._handlers={},i._contextmenus=[],i._undoStack=[],i._redoStack=[],i._firstAddBookmark=!0,i.menu=i.contextmenu=null,i.dialogs=[]}Ft.prototype={lang:function(e){return Mt(e,this.langType)},loadPlugin:function(e,t){var n=this,i=(i=this._pluginStatus)||(this._pluginStatus={});return l[e]?Q(l[e])?(i[e]||(l[e].call(n,KindEditor),i[e]="inited"),t&&t.call(n)):setTimeout(function(){n.loadPlugin(e,t)},100):(l[e]="loading",_t(n.pluginsPath+e+"/"+e+".js?ver="+encodeURIComponent(x.DEBUG?G:q),function(){setTimeout(function(){l[e]&&n.loadPlugin(e,t)},0)})),n},handler:function(e,t){var n=this;return n._handlers[e]||(n._handlers[e]=[]),Q(t)?(n._handlers[e].push(t),n):(D(n._handlers[e],function(){t=this.call(n,t)}),t)},clickToolbar:function(e,t){var n=this,i="clickToolbar"+e;return void 0===t?n._handlers[i]?n.handler(i):(n.loadPlugin(e,function(){n.handler(i)}),n):n.handler(i,t)},updateState:function(){var n=this;return D("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough".split(","),function(e,t){n.cmd.state(t)?n.toolbar.select(t):n.toolbar.unselect(t)}),n},addContextmenu:function(e){return this._contextmenus.push(e),this},afterCreate:function(e){return this.handler("afterCreate",e)},beforeRemove:function(e){return this.handler("beforeRemove",e)},beforeGetHtml:function(e){return this.handler("beforeGetHtml",e)},beforeSetHtml:function(e){return this.handler("beforeSetHtml",e)},afterSetHtml:function(e){return this.handler("afterSetHtml",e)},create:function(){var t,n,e,i,r,o,a,l,s,c=this,d=c.fullscreenMode;return c.isCreated||c.srcElement.data("kindeditor")||(c.srcElement.data("kindeditor","true"),I().style.overflow=d?"hidden":"",t=d?I().clientWidth+"px":c.width,n=d?I().clientHeight+"px":c.height,(f&&g<8||u)&&(n=b(y(n)+2)),e=c.container=x(c.layout),d?x(document.body).append(e):c.srcElement.before(e),a=x(".toolbar",e),i=x(".edit",e),r=c.statusbar=x(".statusbar",e),e.removeClass("container").addClass("ke-container ke-container-"+c.themeType).css("width",t),d?(e.css({position:"absolute",left:0,top:0,"z-index":811211}),h||(c._scrollPos=Pe()),window.scrollTo(0,0),x(document.body).css({height:"1px",overflow:"hidden"}),x(document.body.parentNode).css("overflow","hidden"),c._fullscreenExecuted=!0):(c._fullscreenExecuted&&(x(document.body).css({height:"",overflow:""}),x(document.body.parentNode).css("overflow","")),c._scrollPos&&window.scrollTo(c._scrollPos.x,c._scrollPos.y)),o=[],x.each(c.items,function(e,t){"|"==t?o.push('<span class="ke-inline-block ke-separator"></span>'):"/"==t?o.push('<div class="ke-hr"></div>'):(o.push('<span class="ke-outline" data-name="'+t+'" title="'+c.lang(t)+'" unselectable="on">'),o.push('<span class="ke-toolbar-icon icon-ke-font ke-toolbar-icon-url ke-icon-'+t+'" unselectable="on"></span></span>'))}),a=c.toolbar=vt({src:a,html:o.join(""),noDisableItems:c.noDisableItems,click:function(e,t){if(e.stop(),c.menu){e=c.menu.name;if(c.hideMenu(),e===t)return}c.clickToolbar(t)}}),l=y(n)-a.div.height(),s=c.edit=ft({height:0<l&&y(n)>c.minHeight?l:c.minHeight,src:i,srcElement:c.srcElement,designMode:c.designMode,themesPath:c.themesPath,bodyClass:c.bodyClass,cssPath:c.cssPath,cssData:c.cssData,editorOptions:c.options,beforeGetHtml:function(e){return C(e=O(It(e=c.beforeGetHtml(e))),c.filterMode?c.htmlTags:null,c.urlType,c.wellFormatMode,c.indentChar)},beforeSetHtml:function(e){return e=C(e,c.filterMode?c.htmlTags:null,"",!1),c.beforeSetHtml(e)},afterSetHtml:function(){c.edit=s=this,c.afterSetHtml()},afterCreate:function(){var e;c.edit=s=this,c.cmd=s.cmd,c._docMousedownFn=function(e){c.menu&&c.hideMenu()},x(s.doc,document).mousedown(c._docMousedownFn),function(){var l=this,e=l.edit.doc;x(e).contextmenu(function(e){if(l.menu&&l.hideMenu(),l.useContextmenu){if(0!==l._contextmenus.length){var t=0,n=[];for(D(l._contextmenus,function(){"-"==this.title?n.push(this):this.cond&&this.cond()&&(n.push(this),this.width)&&this.width>t&&(t=this.width)});0<n.length&&"-"==n[0].title;)n.shift();for(;0<n.length&&"-"==n[n.length-1].title;)n.pop();var i,r,o,a=null;D(n,function(e){"-"==this.title&&"-"==a.title&&delete n[e],a=this}),0<n.length&&(e.preventDefault(),r=x(l.edit.iframe).pos(),i=yt({x:r.x+e.clientX,y:r.y+e.clientY,width:t,css:{visibility:"hidden"},shadowMode:l.shadowMode}),D(n,function(){this.title&&i.addItem(this)}),r=I(i.doc),o=i.div.height(),e.clientY+o>=r.clientHeight-100&&i.pos(i.x,y(i.y)-o),i.div.css("visibility","visible"),l.menu=i)}}else e.preventDefault()})}.call(c),function(){var n,l,s=this,c=s.edit.doc,d=s.newlineTag;function u(e){for(var t=x(e.commonAncestor());t&&(1!=t.type||t.isStyle());)t=t.parent();return t}f&&"br"!==d||h&&g<3&&"p"!==d||$&&g<9||(n=_("h1,h2,h3,h4,h5,h6,pre,li"),l=_("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote"),x(c).keydown(function(e){var t;13!=e.which||e.shiftKey||e.ctrlKey||e.altKey||(s.cmd.selection(),t=u(s.cmd.range),x(t).prev(),x(t).parent(),"marquee"!=(t=t.name)&&"select"!=t&&("br"!==d||n[t]?l[t]||F(c,"formatblock","<p>"):(e.preventDefault(),s.insertHtml("<br />"+(f&&g<9?"":"​")))))}),x(c).keyup(function(e){var t,n,i,r,o,a;13!=e.which||e.shiftKey||e.ctrlKey||e.altKey||"br"!=d&&(h?(n=s.cmd.commonAncestor("p"),(t=s.cmd.commonAncestor("a"))&&""==t.text()&&(t.remove(!0),s.cmd.range.selectNodeContents(n[0]).collapse(!0),s.cmd.select())):(s.cmd.selection(),t=u(s.cmd.range),n=x(t).prev(),i=x(t).parent(),r=t.name,a=i&&i.name?i.name:"",o=n&&n.html?n.html():"","blockquote"==a&&"<br />"==o?(e.preventDefault(),x(n).remove(),x(t).remove(),x(i).after("<p>​</p>"),a=x(i).next(),s.cmd.range.selectNodeContents(a).collapse(!0),s.cmd.select(),a.focus()):"marquee"==r||"select"==r||l[r]||F(c,"formatblock","<p>")))}))}.call(c),function(){var n=this,i=n.edit.doc;x(i).keydown(function(e){var t;9==e.which&&(e.preventDefault(),n.afterTab?n.afterTab.call(n,e):((t=(e=n.cmd).range).shrink(),t.collapsed&&1==t.startContainer.nodeType&&(t.insertNode(x("@&nbsp;",i)[0]),e.select()),n.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")))})}.call(c),function(){var t=this;x(t.edit.textarea[0],t.edit.win).focus(function(e){t.afterFocus&&t.afterFocus.call(t,e)}).blur(function(e){t.afterBlur&&t.afterBlur.call(t,e)})}.call(c),s.afterChange(function(e){s.designMode&&(c.updateState(),c.addBookmark(),c.options.afterChange)&&c.options.afterChange.call(c)}),s.textarea.keyup(function(e){e.ctrlKey||e.altKey||!he[e.which]||c.options.afterChange&&c.options.afterChange.call(c)}),c.readonlyMode&&c.readonly(),c.isCreated=!0,""===c.initContent&&(c.initContent=c.html()),0<c._undoStack.length&&(e=c._undoStack.pop()).start&&(c.html(e.html),s.cmd.range.moveToBookmark(e),c.select()),c.afterCreate(),c.options.afterCreate&&c.options.afterCreate.call(c)}}),r.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"><i></i><i></i><i></i></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>'),c._fullscreenResizeHandler&&(x(window).unbind("resize",c._fullscreenResizeHandler),c._fullscreenResizeHandler=null),function e(){0===r.height()?setTimeout(e,100):c.resize(t,n,!1)}(),d?(c._fullscreenResizeHandler=function(e){c.isCreated&&c.resize(I().clientWidth,I().clientHeight,!1)},x(window).bind("resize",c._fullscreenResizeHandler),a.select("fullscreen"),r.first().css("visibility","hidden"),r.last().css("visibility","hidden")):(h&&x(window).bind("scroll",function(e){c._scrollPos=Pe()}),0<c.resizeType?lt({moveEl:e,clickEl:r,moveFn:function(e,t,n,i,r,o){c.resize(null,i+=o)}}):r.first().css("visibility","hidden"),2===c.resizeType?lt({moveEl:e,clickEl:r.last(),moveFn:function(e,t,n,i,r,o){c.resize(n+=r,i+=o)}}):r.last().css("visibility","hidden")),setTimeout(function(){c.focus&&c.focus()},100)),c},remove:function(){var e=this;return e.isCreated&&(e.beforeRemove(),e.srcElement.data("kindeditor",""),e.menu&&e.hideMenu(),D(e.dialogs,function(){e.hideDialog()}),x(document).unbind("mousedown",e._docMousedownFn),e.toolbar.remove(),e.edit.remove(),e.statusbar.last().unbind(),e.statusbar.unbind(),e.container.remove(),e.container=e.toolbar=e.edit=e.menu=null,e.dialogs=[],e.isCreated=!1),e},resize:function(e,t,n){var i=this;return n=S(n,!0),e&&(/%/.test(e)||(e=(e=y(e))<i.minWidth?i.minWidth:e),i.container.css("width",b(e)),n)&&(i.width=b(e)),t&&(t=y(t),e=(e=y(t)-i.toolbar.div.height()-i.statusbar.height())<i.minHeight?i.minHeight:e,i.edit.setHeight(e),n)&&(i.height=b(t)),i},select:function(){return this.isCreated&&this.cmd.select(),this},html:function(e){var t=this;return void 0===e?t.isCreated?t.edit.html():ht(t.srcElement):(t.isCreated?t.edit.html(e):ht(t.srcElement,e),t.isCreated&&t.cmd.selection(),t)},fullHtml:function(){return this.isCreated?this.edit.html(void 0,!0):""},text:function(e){return void 0===e?T(this.html().replace(/<(?!img|embed).*?>/gi,"").replace(/&nbsp;/gi," ")):this.html(k(e))},isEmpty:function(){return""===T(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return T(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==T(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){return O(It(this.isCreated?this.cmd.range.html():""))},count:function(e){return"html"===(e=(e||"html").toLowerCase())?this.html().length:"text"===e?this.text().replace(/<(?:img|embed).*?>/gi,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(e){e=e.toLowerCase();var t=this,n=t.cmd,i=E(e,"selectall,copy,paste,print".split(","))<0;return i&&t.addBookmark(!1),n[e].apply(n,ee(arguments,1)),i&&(t.updateState(),t.addBookmark(!1),t.options.afterChange)&&t.options.afterChange.call(t),t},insertHtml:function(e,t){return this.isCreated&&(e=this.beforeSetHtml(e),this.exec("inserthtml",e,t)),this},appendHtml:function(e){return this.html(this.html()+e),this.isCreated&&((e=this.cmd).range.selectNodeContents(e.doc.body).collapse(!1),e.select()),this},sync:function(){return ht(this.srcElement,this.html()),this},focus:function(){return(this.isCreated?this.edit:this.srcElement[0]).focus(),this},blur:function(){return(this.isCreated?this.edit:this.srcElement[0]).blur(),this},addBookmark:function(e){e=S(e,!0);var t,n=this,i=n.edit,r=i.doc.body,o=It(r.innerHTML);if(e&&0<n._undoStack.length){var e=n._undoStack[n._undoStack.length-1];if(Math.abs(o.length-O(e.html).length)<n.minChangeSize)return n}return i.designMode&&!n._firstAddBookmark?((t=(e=n.cmd.range).createBookmark(!0)).html=It(r.innerHTML),e.moveToBookmark(t)):t={html:o},n._firstAddBookmark=!1,Rt(n._undoStack,t),n},undo:function(){return Lt.call(this,this._undoStack,this._redoStack)},redo:function(){return Lt.call(this,this._redoStack,this._undoStack)},fullscreen:function(e){return this.fullscreenMode=void 0===e?!this.fullscreenMode:e,this.addBookmark(!1),this.remove().create()},readonly:function(e){e=S(e,!0);var t=this,n=t.edit,i=n.doc;t.designMode?t.toolbar.disableAll(e,[]):D(t.noDisableItems,function(){t.toolbar[e?"disable":"enable"](this)}),f?i.body.contentEditable=!e:i.designMode=e?"off":"on",n.textarea[0].disabled=e},createMenu:function(e){var t=e.name,t=this.toolbar.get(t),n=t.pos();return e.x=n.x,e.y=n.y+t.height(),e.z=this.options.zIndex,e.shadowMode=S(e.shadowMode,this.shadowMode),void 0!==e.selectedColor?(e.cls="ke-colorpicker-"+this.themeType,e.noColor=this.lang("noColor"),this.menu=wt(e)):(e.cls="ke-menu-"+this.themeType,e.centerLineMode=!1,this.menu=yt(e)),this.menu},hideMenu:function(){return this.menu.remove(),this.menu=null,this},hideContextmenu:function(){return this.contextmenu.remove(),this.contextmenu=null,this},createDialog:function(e){var t,n=this,i=(e.name,e.z=n.options.zIndex,e.shadowMode=S(e.shadowMode,n.shadowMode),e.closeBtn=S(e.closeBtn,{name:n.lang("close"),click:function(e){n.hideDialog(),f&&n.cmd&&n.cmd.select()}}),e.noBtn=S(e.noBtn,{name:n.lang(e.yesBtn?"no":"close"),click:function(e){n.hideDialog(),f&&n.cmd&&n.cmd.select()}}),"page"!=n.dialogAlignType&&(e.alignEl=n.container),e.cls="ke-dialog-"+n.themeType,0<n.dialogs.length&&(i=n.dialogs[0],t=n.dialogs[n.dialogs.length-1],i.setMaskIndex(t.z+2),e.z=t.z+3,e.showMask=!1),Tt(e));return n.dialogs.push(i),i},hideDialog:function(){var e,t;return 0<this.dialogs.length&&this.dialogs.pop().remove(),0<this.dialogs.length&&(e=this.dialogs[0],t=this.dialogs[this.dialogs.length-1],e.setMaskIndex(t.z-1)),this},errorDialog:function(e){var t=this.createDialog({width:750,title:this.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),t=x("iframe",t.div),n=x.iframeDoc(t);return n.open(),n.write(e),n.close(),x(n.body).css("background-color","#FFF"),t[0].contentWindow.focus(),this}};var U,Bt=[];function Ot(e,i){x(e).each(function(e,n){x.each(Bt,function(e,t){if(t&&t.srcElement[0]==n)return i.call(t,e),!1})})}function Ut(e){this.init(e)}return x.remove=function(e){Ot(e,function(e){this.remove(),Bt.splice(e,1)})},x.sync=function(e){Ot(e,function(){this.sync()})},x.html=function(e,t){Ot(e,function(){this.html(t)})},x.insertHtml=function(e,t){Ot(e,function(){this.insertHtml(t)})},x.appendHtml=function(e,t){Ot(e,function(){this.appendHtml(t)})},f&&g<7&&F(document,"BackgroundImageCache",!0),x.EditorClass=Ft,x.editor=function(e){return new Ft(e)},x.create=function e(t,n){function i(n){return D(l,function(e,t){Q(t)&&(t.call(n,KindEditor),n._pluginStatus||(n._pluginStatus={}),n._pluginStatus[e]="inited")}),n.create()}(n=n||{}).basePath=S(n.basePath,x.basePath),n.themesPath=S(n.themesPath,n.basePath+"themes/"),n.langPath=S(n.langPath,n.basePath+"lang/"),n.pluginsPath=S(n.pluginsPath,n.basePath+"plugins/"),S(n.loadStyleMode,x.options.loadStyleMode)&&(r=S(n.themeType,x.options.themeType),Et(n.themesPath+"default/default.css"),Et(n.themesPath+r+"/"+r+".css"));var r=x(t);if(r&&0!==r.length){if(1<r.length)return r.each(function(){e(this,n)}),Bt[0];n.srcElement=r[0];var o=new Ft(n);return Bt.push(o),B[o.langType]?i(o):(_t(o.langPath+o.langType+".js?ver="+encodeURIComponent(x.DEBUG?G:q),function(){i(o)}),o)}},x.instances=Bt,x.plugin=Dt,x.lang=Mt,Dt("core",function(s){var e,c=this,n={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};c.afterSetHtml(function(){c.options.afterChange&&c.options.afterChange.call(c)}),c.afterCreate(function(){if("form"==c.syncType){for(var e,t=s(c.srcElement),n=!1;t=t.parent();)if("form"==t.name){n=!0;break}n&&(t.bind("submit",function(e){c.sync(),s(window).bind("unload",function(){c.edit.textarea.remove()})}),(e=s('[type="reset"]',t)).click(function(){c.html(c.initContent),c.cmd.selection()}),c.beforeRemove(function(){t.unbind(),e.unbind()}))}}),c.clickToolbar("source",function(){c.edit.designMode?(c.toolbar.disableAll(!0),c.edit.design(!1),c.toolbar.select("source")):(c.toolbar.disableAll(!1),c.edit.design(!0),c.toolbar.unselect("source"),h?setTimeout(function(){c.cmd.selection()},0):c.cmd.selection()),c.designMode=c.edit.designMode}),c.afterCreate(function(){c.designMode||c.toolbar.disableAll(!0).select("source")}),c.clickToolbar("fullscreen",function(){c.fullscreen()}),c.fullscreenShortcut&&(e=!1,c.afterCreate(function(){if(s(c.edit.doc,c.edit.textarea).keyup(function(e){27==e.which&&setTimeout(function(){c.fullscreen()},0)}),e){if(f&&!c.designMode)return;c.focus()}e=e||!0})),D("undo,redo".split(","),function(e,t){n[t]&&c.afterCreate(function(){Ce(this.edit.doc,n[t],function(){c.clickToolbar(t)})}),c.clickToolbar(t,function(){c[t]()})}),c.clickToolbar("formatblock",function(){var e=c.lang("formatblock.formatBlock"),i={h1:28,h2:24,h3:18,H4:14,p:12},r=c.cmd.val("formatblock"),o=c.createMenu({name:"formatblock",width:"en"==c.langType?200:150});D(e,function(e,t){var n="font-size:"+i[e]+"px;";"h"===e.charAt(0)&&(n+="font-weight:bold;"),o.addItem({title:'<span style="'+n+'" unselectable="on">'+t+"</span>",height:i[e]+12,checked:r===e||r===t,click:function(){c.select().exec("formatblock","<"+e+">").hideMenu()}})})}),c.clickToolbar("fontname",function(){var n=c.cmd.val("fontname"),i=c.createMenu({name:"fontname",width:150});D(c.lang("fontname.fontName"),function(e,t){i.addItem({title:'<span style="font-family: '+e+';" unselectable="on">'+t+"</span>",height:30,checked:n===e.toLowerCase()||n===t.toLowerCase(),click:function(){c.exec("fontname",e).hideMenu()}})})}),c.clickToolbar("fontsize",function(){var n=c.cmd.val("fontsize"),i=c.createMenu({name:"fontsize",width:150});D(c.fontSizeTable,function(e,t){i.addItem({title:'<span style="font-size:'+t+';" unselectable="on">'+t+"</span>",height:y(t)+12,checked:n===t,click:function(){c.exec("fontsize",t).hideMenu()}})})}),D("forecolor,hilitecolor".split(","),function(e,t){c.clickToolbar(t,function(){c.createMenu({name:t,selectedColor:c.cmd.val(t)||"default",colors:c.colorTable,click:function(e){c.exec(t,e).hideMenu()}})})}),D("cut,copy,paste".split(","),function(e,t){c.clickToolbar(t,function(){c.focus();try{c.exec(t,null)}catch(e){alert(c.lang(t+"Error"))}})}),c.clickToolbar("about",function(){c.createDialog({name:"about",width:350,title:c.lang("about"),body:'<div style="margin:20px;"><div>KindEditor 4.4.22 (2024-11-08)</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>'})}),c.plugin.getSelectedLink=function(){return c.cmd.commonAncestor("a")},c.plugin.getSelectedPreCode=function(){return c.cmd.commonAncestor("pre")},c.plugin.getSelectedImage=function(){return At(c.edit.cmd.range,function(e){return!/^ke-\w+$/i.test(e[0].className)})},c.plugin.getSelectedFlash=function(){return At(c.edit.cmd.range,function(e){return"ke-flash"==e[0].className})},c.plugin.getSelectedMedia=function(){return At(c.edit.cmd.range,function(e){return"ke-media"==e[0].className||"ke-rm"==e[0].className})},c.plugin.getSelectedAnchor=function(){return At(c.edit.cmd.range,function(e){return"ke-anchor"==e[0].className})},D("link,image,flash,media,anchor".split(","),function(e,n){var i=n.charAt(0).toUpperCase()+n.substr(1);D("edit,delete".split(","),function(e,t){c.addContextmenu({title:c.lang(t+i),click:function(){c.loadPlugin(n,function(){c.plugin[n][t](),c.hideMenu()})},cond:c.plugin["getSelected"+i],width:150,iconClass:"edit"==t?"ke-icon-"+n:void 0})}),c.addContextmenu({title:"-"})}),c.plugin.getSelectedTable=function(){return c.cmd.commonAncestor("table")},c.plugin.getSelectedRow=function(){return c.cmd.commonAncestor("tr")},c.plugin.getSelectedCell=function(){return c.cmd.commonAncestor("td")},D("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete".split(","),function(e,t){var n=E(t,["prop","delete"])<0?c.plugin.getSelectedCell:c.plugin.getSelectedTable;c.addContextmenu({title:c.lang("table"+t),click:function(){c.loadPlugin("table",function(){c.plugin.table[t](),c.hideMenu()})},cond:n,width:170,iconClass:"ke-icon-table"+t})}),c.addContextmenu({title:"-"}),D("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),function(e,t){n[t]&&c.afterCreate(function(){Ce(this.edit.doc,n[t],function(){c.cmd.selection(),c.clickToolbar(t)})}),c.clickToolbar(t,function(){c.focus().exec(t,null)})}),c.afterCreate(function(){var n,i,r,o=c.edit.doc,a="__kindeditor_paste__",l=!1;s(o.body).bind("paste",function(e){var t;0===c.pasteType?e.stop():l||(l=!0,s("div."+a,o).remove(),n=c.cmd.selection(),i=n.range.createBookmark(),r=s('<div class="'+a+'"></div>',o).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:s(i.start).pos().y+"px","white-space":"nowrap"}),s(o.body).append(r),f?((t=n.range.get(!0)).moveToElementText(r[0]),t.select(),t.execCommand("paste"),e.preventDefault()):(n.range.selectNodeContents(r[0]),n.select(),r[0].tabIndex=-1,r[0].focus()),setTimeout(function(){var e;n.range.moveToBookmark(i),n.select(),m&&(s("div."+a,r).each(function(){s(this).after("<br />").remove(!0)}),s("span.Apple-style-span",r).remove(!0),s("span.Apple-tab-span",r).remove(!0),s("span[style]",r).each(function(){"nowrap"==s(this).css("white-space")&&s(this).remove(!0)}),s("meta",r).remove()),e=r[0].innerHTML,r.remove(),""!==e&&(m&&(e=e.replace(/(<br>)\1/gi,"$1")),2===c.pasteType&&(e=e.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,""),e=/schemas-microsoft-com|worddocument|mso-\w+/i.test(e)?Ee(e,(c.filterMode?c:s.options).htmlTags):(e=C(e,c.filterMode?c.htmlTags:null),c.beforeSetHtml(e))),1===c.pasteType&&(e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/\n\s*\n/g,"\n")).replace(/<br[^>]*>/gi,"\n")).replace(/<\/p><p[^>]*>/gi,"\n")).replace(/<[^>]+>/g,"")).replace(/ {2}/g," &nbsp;"),"p"==c.newlineTag?/\n/.test(e)&&(e=e.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")):e=e.replace(/\n/g,"<br />$&")),c.insertHtml(e,!0)),l=!1},0))})}),c.beforeGetHtml(function(e){return(e=f&&g<=8?(e=e.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(e,t){return unescape(t)})).replace(/(<input)((?:\s+[^>]*)?>)/gi,function(e,t,n){return/\s+type="[^"]+"/i.test(e)?e:t+' type="text"'+n}):e).replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/gi,function(e,t,n,i){return t+X(n).replace(/\s+/g," ")+i}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/gi,function(e){var e=N(e),t=_e(e.style||""),n=Ne(e["data-ke-tag"]),i=S(t.width,""),t=S(t.height,"");return/px/i.test(i)&&(i=y(i)),/px/i.test(t)&&(t=y(t)),n.width=S(e.width,i),n.height=S(e.height,t),Me(n)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/gi,function(e){e=N(e);return'<a name="'+unescape(e["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(e,t,n){return"<script"+unescape(t)+">"+unescape(n)+"<\/script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(e,t,n){return"<noscript"+unescape(t)+">"+unescape(n)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/gi,function(e,t,i,n){return e=(e=e.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(e,t,n){return t+X(i)+n})).replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/gi,function(e,t,n){return t+n})}),c.beforeSetHtml(function(e){return(e=f&&g<=8?e.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/gi,function(e){return"none"==_e(N(e).style||"").display?'<div class="ke-display-none" data-ke-input-tag="'+escape(e)+'"></div>':e}):e).replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/gi,function(e){e=N(e);return e.src=S(e.src,""),e.width=S(e.width,0),e.height=S(e.height,0),Ae(c.themesPath+"common/blank.gif",e)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/gi,function(e){var t=N(e);return void 0!==t.href?e:'<img class="ke-anchor" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjY3NDAwOTEzOTg0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9Ijg3NDQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjxwYXRoIGQ9Ik03NTYuMTM1IDUxMmE4IDggMCAwIDEtNi4zNjctMTIuODQzbDkxLjg2NC0xMjAuNzg1YTggOCAwIDAgMSAxMi43MzYgMGw5MS44NjQgMTIwLjc4NUE4IDggMCAwIDEgOTM5Ljg2NSA1MTJIODg4YzAgMjA3LjY2LTE2OC4zNCAzNzYtMzc2IDM3Ni0yMDUuNTgyIDAtMzcyLjYzLTE2NC45OS0zNzUuOTUtMzY5Ljc4MkwxMzYgNTEySDgyLjEzNWE4IDggMCAwIDEtNi4zNjctMTIuODQzbDkxLjg2NC0xMjAuNzg1YTggOCAwIDAgMSAxMi43MzYgMGw5MS44NjQgMTIwLjc4NUE4IDggMCAwIDEgMjY1Ljg2NSA1MTJIMjEyYzAgMTUzLjUwMSAxMTUuMjg3IDI4MC4wNzYgMjYzLjk5OCAyOTcuODYybDAuMDAxLTM5MC4zOTlDNDEzLjg5MSA0MDMuNDc3IDM2OCAzNDcuMDk4IDM2OCAyODBjMC03OS41MjkgNjQuNDcxLTE0NCAxNDQtMTQ0czE0NCA2NC40NzEgMTQ0IDE0NGMwIDY3LjA5OC00NS44OSAxMjMuNDc3LTEwNy45OTggMTM5LjQ2M2wwLjAwMSAzOTAuMzk5QzY5NS4xMSA3OTIuMjY3IDgwOS41MDcgNjY4LjIyIDgxMS45NiA1MTYuOTZMODEyIDUxMmgtNTUuODY1ek01MTIgMjEyYy0zNy41NTUgMC02OCAzMC40NDUtNjggNjhzMzAuNDQ1IDY4IDY4IDY4IDY4LTMwLjQ0NSA2OC02OC0zMC40NDUtNjgtNjgtNjh6IiBwLWlkPSI4NzQ1IiBmaWxsPSIjZDgxZTA2Ij48L3BhdGg+PC9zdmc+" data-ke-name="'+escape(t.name)+'" style="vertical-align:text-bottom" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/gi,function(e,t,n){return'<div class="ke-script" data-ke-script-attr="'+escape(t)+'">'+escape(n)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/gi,function(e,t,n){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(t)+'">'+escape(n)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/gi,function(e,t,n,i,r){return e=e.match(/\sdata-ke-src="[^"]*"/i)?e:t+n+'="'+i+'" data-ke-src="'+k(i)+'"'+r}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/gi,function(e,t,n){return t+"data-ke-"+n}).replace(/<table[^>]*\s+border="0"[^>]*>/gi,function(e){return 0<=e.indexOf("ke-zeroborder")?e:(r="ke-zeroborder",e=/\s+class\s*=/.test(e=e)?e.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(e,t,n,i){return(" "+n+" ").indexOf(" "+r+" ")<0?""===n?t+r+i:t+n+" "+r+i:e}):e.substr(0,e.length-1)+' class="'+r+'">');var r})})}),(e=window).KindEditor&&e.KindEditor,KindEditor.lang({source:"Source",preview:"Preview",undo:"Undo(Ctrl+Z)",redo:"Redo(Ctrl+Y)",cut:"Cut(Ctrl+X)",copy:"Copy(Ctrl+C)",paste:"Paste(Ctrl+V)",plainpaste:"Paste as plain text",wordpaste:"Paste from Word",selectall:"Select all",justifyleft:"Align left",justifycenter:"Align center",justifyright:"Align right",justifyfull:"Align full",insertorderedlist:"Ordered list",insertunorderedlist:"Unordered list",indent:"Increase indent",outdent:"Decrease indent",subscript:"Subscript",superscript:"Superscript",formatblock:"Paragraph format",fontname:"Font family",fontsize:"Font size",forecolor:"Text color",hilitecolor:"Highlight color",bold:"Bold(Ctrl+B)",italic:"Italic(Ctrl+I)",underline:"Underline(Ctrl+U)",strikethrough:"Strikethrough",removeformat:"Remove format",image:"Image",multiimage:"Multi image",flash:"Flash",media:"Embeded media",table:"Table",tablecell:"Cell",hr:"Insert horizontal line",emoticons:"Insert emoticon",link:"Link",unlink:"Unlink",fullscreen:"Toggle fullscreen mode",about:"About",print:"Print",filemanager:"File Manager",code:"Insert code",map:"Google Maps",baidumap:"Baidu Maps",lineheight:"Line height",clearhtml:"Clear HTML code",pagebreak:"Insert Page Break",quickformat:"Quick Format",insertfile:"Insert file",template:"Insert Template",anchor:"Anchor",yes:"OK",no:"Cancel",close:"Close",editImage:"Image properties",deleteImage:"Delete image",editFlash:"Flash properties",deleteFlash:"Delete flash",editMedia:"Media properties",deleteMedia:"Delete media",editLink:"Link properties",deleteLink:"Unlink",editAnchor:"Anchor properties",deleteAnchor:"Delete Anchor",tableprop:"Table properties",tablecellprop:"Cell properties",tableinsert:"Insert table",tabledelete:"Delete table",tablecolinsertleft:"Insert column left",tablecolinsertright:"Insert column right",tablerowinsertabove:"Insert row above",tablerowinsertbelow:"Insert row below",tablerowmerge:"Merge down",tablecolmerge:"Merge right",tablerowsplit:"Split row",tablecolsplit:"Split column",tablecoldelete:"Delete column",tablerowdelete:"Delete row",noColor:"Default",pleaseSelectFile:"Please select file.",invalidImg:"Please type valid URL.\nAllowed file extension: jpg,gif,bmp,png",invalidMedia:"Please type valid URL.\nAllowed file extension: swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb",invalidWidth:"The width must be number.",invalidHeight:"The height must be number.",invalidBorder:"The border must be number.",invalidUrl:"Please type valid URL.",invalidRows:"Invalid rows.",invalidCols:"Invalid columns.",invalidPadding:"The padding must be number.",invalidSpacing:"The spacing must be number.",invalidJson:"Invalid JSON string.",uploadSuccess:"Upload success.",cutError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+X) instead.",copyError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+C) instead.",pasteError:"Currently not supported by your browser, use keyboard shortcut(Ctrl+V) instead.",ajaxLoading:"Loading ...",uploadLoading:"Uploading ...",uploadError:"Upload Error","plainpaste.comment":"Use keyboard shortcut(Ctrl+V) to paste the text into the window.","wordpaste.comment":"Use keyboard shortcut(Ctrl+V) to paste the text into the window.","code.pleaseInput":"Please input code.","link.url":"URL","link.linkType":"Target","link.newWindow":"New window","link.selfWindow":"Same window","flash.url":"URL","flash.width":"Width","flash.height":"Height","flash.upload":"Upload","flash.viewServer":"Browse","media.url":"URL","media.width":"Width","media.height":"Height","media.autostart":"Auto start","media.upload":"Upload","media.viewServer":"Browse","image.remoteImage":"Insert URL","image.localImage":"Upload","image.remoteUrl":"URL","image.localUrl":"File","image.size":"Size","image.width":"Width","image.height":"Height","image.resetSize":"Reset dimensions","image.align":"Align","image.defaultAlign":"Default","image.leftAlign":"Left","image.rightAlign":"Right","image.imgTitle":"Title","image.upload":"Browse","image.viewServer":"Browse","multiimage.uploadDesc":"Allows users to upload <%=uploadLimit%> images, single image size not exceeding <%=sizeLimit%>","multiimage.startUpload":"Start upload","multiimage.clearAll":"Clear all","multiimage.insertAll":"Insert all","multiimage.queueLimitExceeded":"Queue limit exceeded.","multiimage.fileExceedsSizeLimit":"File exceeds size limit.","multiimage.zeroByteFile":"Zero byte file.","multiimage.invalidFiletype":"Invalid file type.","multiimage.unknownError":"Unknown upload error.","multiimage.pending":"Pending ...","multiimage.uploadError":"Upload error","filemanager.emptyFolder":"Blank","filemanager.moveup":"Parent folder","filemanager.viewType":"Display: ","filemanager.viewImage":"Thumbnails","filemanager.listImage":"List","filemanager.orderType":"Sorting: ","filemanager.fileName":"By name","filemanager.fileSize":"By size","filemanager.fileType":"By type","insertfile.url":"URL","insertfile.title":"Title","insertfile.upload":"Upload","insertfile.viewServer":"Browse","table.cells":"Cells","table.rows":"Rows","table.cols":"Columns","table.size":"Dimensions","table.width":"Width","table.height":"Height","table.percent":"%","table.px":"px","table.space":"Space","table.padding":"Padding","table.spacing":"Spacing","table.align":"Align","table.textAlign":"Horizontal","table.verticalAlign":"Vertical","table.alignDefault":"Default","table.alignLeft":"Left","table.alignCenter":"Center","table.alignRight":"Right","table.alignTop":"Top","table.alignMiddle":"Middle","table.alignBottom":"Bottom","table.alignBaseline":"Baseline","table.border":"Border","table.borderWidth":"Width","table.borderColor":"Color","table.backgroundColor":"Background","map.address":"Address: ","map.search":"Search","baidumap.address":"Address: ","baidumap.search":"Search","baidumap.insertDynamicMap":"Dynamic Map","anchor.name":"Anchor name","formatblock.formatBlock":{h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",p:"Normal"},"fontname.fontName":{Arial:"Arial","Arial Black":"Arial Black","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Times New Roman":"Times New Roman","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"Line height 1"},{1.5:"Line height 1.5"},{2:"Line height 2"},{2.5:"Line height 2.5"},{3:"Line height 3"}],"template.selectTemplate":"Template","template.replaceContent":"Replace current content","template.fileList":{"1.html":"Image and Text","2.html":"Table","3.html":"List"}},"en"),KindEditor.each(KindEditor.options.items,function(e,t){}),KindEditor.options.langType="en",KindEditor.plugin("anchor",function(n){var i=this,r="anchor",o=i.lang(r+".");i.plugin.anchor={edit:function(){var e=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keName">'+o.name+"</label>",'<input class="ke-input-text" type="text" id="keName" name="name" value="" style="width:260px;" />',"</div>","</div>"].join(""),e=i.createDialog({name:r,width:360,title:i.lang(r),body:e,yesBtn:{name:i.lang("yes"),click:function(e){i.insertHtml('<a name="'+t.val()+'">').hideDialog().focus()}}}).div,t=n('input[name="name"]',e),e=i.plugin.getSelectedAnchor();e&&t.val(unescape(e.attr("data-ke-name"))),t[0].focus(),t[0].select()},delete:function(){i.plugin.getSelectedAnchor().remove()}},i.clickToolbar(r,i.plugin.anchor.edit)}),KindEditor.plugin("autoheight",function(n){var i,r=this;function o(){var e,t;r.fullscreenMode||(e=(t=r.edit).doc.body,t.iframe.height(i),t=r.toolbar,t=n(t.div).height(),t=Math.max(n.IE?e.scrollHeight:e.offsetHeight,i,n(e).height())+t+30,r.resize(null,t),e.scrollTo({top:0}))}function e(){var e,t;i=n.removeUnit(r.height),r.edit.afterChange(o),r.fullscreenMode||(e=r.edit,t=e.doc.body,e.iframe[0].scroll="no",t.style.overflowY="hidden"),o()}r.autoHeightMode&&(r.isCreated?e():r.afterCreate(e))}),KindEditor.plugin("baidumap",function(s){var c=this,d="baidumap",u=c.lang(d+"."),h=s.undef(c.baiduMapAk,"9yfaQtWDimlbXuo4TMLmIk7yDjl36eCy"),p=s.undef(c.mapWidth,558),f=s.undef(c.mapHeight,360);c.clickToolbar(d,function(){var i,e,t=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">',u.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:450px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+u.search+'" />',"</span>","</div>",'<div class="ke-map" style="width:'+p+"px;height:"+f+'px;"></div>',"</div>"].join(""),t=c.createDialog({name:d,width:p+42,title:c.lang(d),body:t,yesBtn:{name:c.lang("yes"),click:function(e){var t=i.map,n=t.getCenter(),n=n.lng+","+n.lat,t=t.getZoom(),t=["http://api.map.baidu.com/staticimage/v2?ak="+h,"&center="+encodeURIComponent(n),"&zoom="+encodeURIComponent(t),"&width="+1.5*p,"&height="+1.5*f,"&markers="+encodeURIComponent(n),"&markerStyles="+encodeURIComponent("l,A")].join("");c.exec("insertimage",t,"title",p+"",f+"",0,"","ke-map"),c.hideDialog().focus()}},beforeRemove:function(){r.remove(),e&&e.write(""),a.remove()}}).div,n=s('[name="address"]',t),r=s('[name="searchBtn"]',t),o=["<!doctype html><html><head>",'<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />',"<style>","\thtml { height: 100% }","\tbody { height: 100%; margin: 0; padding: 0; background-color: #FFF }","\t#map_canvas { height: 100% }","</style>",'<script charset="utf-8" src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak='+h+'"><\/script>',"<script>","var map, geocoder;","function initialize() {",'\tmap = new BMapGL.Map("map_canvas");',"\tvar point = new BMapGL.Point(121.473704, 31.230393);","\tmap.centerAndZoom(point, 11);","\tmap.addControl(new BMapGL.NavigationControl());","\tmap.enableScrollWheelZoom();","\tvar gc = new BMapGL.Geocoder();","\tgc.getLocation(point, function(rs){","\t\tvar addComp = rs.addressComponents;",'\t\tvar address = [addComp.city].join("");','\t\tparent.document.getElementById("kindeditor_plugin_map_address").value = address;',"\t});","}","function search(address) {","\tif (!map) return;","\tvar local = new BMapGL.LocalSearch(map, {","\t\trenderOptions: {","\t\t\tmap: map,","\t\t\tautoViewport: true,","\t\t\tselectFirstResult: false","\t\t}","\t});","\tlocal.search(address);","}","<\/script>","</head>",'<body onload="initialize();">','<div id="map_canvas" style="width:100%; height:100%"></div>',"</body></html>"].join("\n"),a=s('<iframe class="ke-textarea" frameborder="0" style="width:558px;height:360px;"></iframe>');function l(){i=a[0].contentWindow,(e=s.iframeDoc(a)).open(),e.write(o),e.close()}a.bind("load",function(){a.unbind("load"),s.IE?l():setTimeout(l,0)}),s(".ke-map",t).replaceWith(a),r.click(function(){i.search(n.val())})})}),KindEditor.plugin("clearhtml",function(t){var n=this;n.clickToolbar("clearhtml",function(){n.focus();var e=n.html();e=(e=e.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/gi,"")).replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/gi,""),e=t.formatHtml(e,{a:["href","target"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title",".width",".height"],table:["border"],"td,th":["rowspan","colspan"],"div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":[]}),n.html(e),n.cmd.selection(!0),n.addBookmark()})}),KindEditor.plugin("code",function(m){var g=this,v="code",b="<line-break>\n</line-break>",y=/<code[^>]*>([\s\S]*?)<\/code>/;function k(e){return function n(e){var i="";return Array.from(e.childNodes).forEach(function(e){var t;if(null!=e&&null!=(t=e.parentNode)&&null!=(t=t.classList)&&t.contains("line-numbers-rows"))console.info("skip");else if(e.nodeType===Node.TEXT_NODE)i+=e.nodeValue;else if(e.tagName)switch(e.tagName.toLowerCase()){case"br":case"line-break":i+="\n";break;case"span":i+=n(e)}}),i}(e.children().get(0))}g.clickToolbar(v,function(){var a=g.edit.win.Prism,l=(console.info("prism",a),g.cmd.selection(),g.plugin.getSelectedPreCode()),e="",n="javascript",t=(l&&(e=a?k(l):(e=l.html()).match(y)[1],n=(n=(l.attr("class").match(/lang-(\w+)/gi)||[])[0])&&n.replace("lang-","")),[]);if(a){var i,r,o=a.languages,s={};for(i in o)!o.hasOwnProperty(i)||"function"==typeof o[i]||"meta"===i||s[r=o[i].__id]||(s[r]=i,t.push({key:i,value:i.replace(/\s+/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}))}else t=[{key:"javascript",value:"JavaScript"},{key:"html",value:"HTML"},{key:"css",value:"CSS"},{key:"php",value:"PHP"},{key:"pl",value:"Perl"},{key:"py",value:"Python"},{key:"rb",value:"Ruby"},{key:"java",value:"Java"},{key:"vb",value:"ASP"},{key:"cpp",value:"C"},{key:"cs",value:"C"},{key:"xml",value:"XML"},{key:"bsh",value:"Shell"},{key:"sql",value:"SQL"},{key:"none",value:"Other"}];var c=t.map(function(e){return'<option value="'.concat(e.key,'">').concat(e.value,"</option>")}).join(""),d=g.lang("code."),u=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">','<select class="ke-code-type">',c,"</select>","</div>",'<textarea class="ke-textarea" style="width:100%;height:330px;">\r\n',e.replace(/\n/g,"\r\n"),"</textarea>\r\n","</div>"].join(""),h=g.createDialog({name:v,width:650,height:500,title:g.lang(v),body:u,yesBtn:{name:g.lang("yes"),click:function(e){var t,n,i=m(".ke-code-type",h.div).val(),r=p.val().replace(/^\s+/g,"").replace(/\s+$/g,"\n").replace(/(\s*<!--)/g,"\n$1").replace(/>(\s*)(?=<!--\s*\/)/g,"> "),o=""===i?"":" ke-code line-numbers language-".concat(i," lang-").concat(i);""===m.trim(r)?(alert(d.pleaseInput),p[0].focus()):l?((a?((n=document.createElement("pre")).className=o+" line-numbers",(t=document.createElement("code")).className="line-numbers",r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.innerHTML=r,n.appendChild(t),a.highlightElement(t,!1),r=(r=n.innerHTML).replace(/\n/g,b),l.html(r)):l.html('<code class="language-'.concat(i,'">').concat(m.escape(r),"</code>"))).attr("class",o),l.next("\n"),g.hideDialog().focus()):(u=a?(r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),(n=document.createElement("pre")).className=o+" line-numbers",(t=document.createElement("code")).className="line-numbers",t.innerHTML=r,n.appendChild(t),a.highlightElement(t,!1),'<pre class="'+o+' ">'+(r=(r=n.innerHTML).replace(/\n/g,b))+"</pre>\n<br />"):'<pre class="'+o+' "><code class="language-'+i+' ">'+m.escape(r)+"</code></pre>\n<br />",(n=null==g||null==(t=g.cmd.sel)?void 0:t.extentNode)&&"p"==m(n).name?1==(o=m(n).children()).length&&"br"==o.name&&m(n).replaceWith(u):(m(n).parent()||g).after(u),g.hideDialog().focus(),!(r=null==(i=m(g.edit.doc.body).last())?void 0:i.children())||1==r.length&&"br"===r.name||m(g.edit.doc.body).append("<p><br /></p>"))}}}),p=m("textarea",h.div),f=m("select",h.div);m(f).children().each(function(e,t){t=m(t);t.val()===n?(t.attr("selected",!0),setTimeout(function(){m(f).val(n),f[0].value=n},180)):t.removeAttr("selected")}),p[0].focus()})}),KindEditor.plugin("emoticons",function(h){var p=this,f={faces:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓"],hands:["🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🦵","🦶","🖕","✍️","🙏","👐🏻","🙌🏻","👏🏻","🙏🏻","👍🏻","👎🏻","👊🏻","✊🏻","🤛🏻","🤜🏻","🤞🏻","✌🏻","🤟🏻","🤘🏻","👌🏻","👈🏻","👉🏻","👆🏻","👇🏻","☝🏻","✋🏻","🤚🏻","🖐🏻","🖖🏻","👋🏻","🤙🏻","💪🏻","🖕🏻","✍🏻","🤲🏾","👐🏾","🙌🏾","👏🏾","🙏🏾","👍🏾","👎🏾","👊🏾","✊🏾","🤛🏾","🤜🏾","🤞🏾","✌🏾","🤟🏾","🤘🏾","👌🏾","👈🏾","👉🏾","👆🏾","👇🏾","☝🏾","✋🏾","🤚🏾","🖐🏾","🖖🏾","👋🏾","🤙🏾","💪🏾","🖕🏾","✍🏾"],avatar:["👶🏻","👦🏻","👧🏻","👨🏻","👩🏻","👱🏻‍♀️","👱🏻","👴🏻","👵🏻","👲🏻","👳🏻‍♀️","👳🏻","👮🏻‍♀️","👮🏻","👷🏻‍♀️","👷🏻","💂🏻‍♀️","💂🏻","🕵🏻‍♀️","🕵🏻","👩🏻‍⚕️","👨🏻‍⚕️","👩🏻‍🌾","👨🏻‍🌾","👩🏻‍🍳","👨🏻‍🍳","👩🏻‍🎓","👨🏻‍🎓","👩🏻‍🎤","👨🏻‍🎤","👩🏻‍🏫","👨🏻‍🏫","👩🏻‍🏭","👨🏻‍🏭","👩🏻‍💻","👨🏻‍💻","👩🏻‍💼","👨🏻‍💼","👩🏻‍🔧","👨🏻‍🔧","👩🏻‍🔬","👨🏻‍🔬","👩🏻‍🎨","👨🏻‍🎨","👩🏻‍🚒","👨🏻‍🚒","👩🏻‍✈️","👨🏻‍✈️","👩🏻‍🚀","👨🏻‍🚀","👩🏻‍⚖️","👨🏻‍⚖️","🤶🏻","🎅🏻","👸🏻","🤴🏻","👰🏻","🤵🏻","👼🏻","🤰🏻","🙇🏻‍♀️","🙇🏻","💁🏻","💁🏻‍♂️","🙅🏻","🙅🏻‍♂️","🙆🏻","🙆🏻‍♂️","🙋🏻","🙋🏻‍♂️","🤦🏻‍♀️","🤦🏻‍♂️","🤷🏻‍♀️","🤷🏻‍♂️","🙎🏻","🙎🏻‍♂️","🙍🏻","🙍🏻‍♂️","💇🏻","💇🏻‍♂️","💆🏻","💆🏻‍♂️","🕴🏻","💃🏻","🕺🏻","🚶🏻‍♀️","🚶🏻","🏃🏻‍♀️","🏃🏻"],foods:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥭","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🥬","🌶","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🥯","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🍤","🍙","🍚","🍘","🍥","🥮","🥠","🍢","🍡","🍧","🍨","🍦","🥧","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🧂","🍩","🍪","🌰","🥜","🍯","🥛","🍼","☕️","🍵","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽","🥣","🥡","🥢"],animals:["🐶","🐱","🐭","🐹","🐰","🦊","🦝","🐻","🐼","🦘","🦡","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦢","🦅","🦉","🦚","🦜","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🦗","🕷","🕸","🦂","🦟","🦠","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🐘","🦏","🦛","🐪","🐫","🦙","🦒","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🐐","🦌","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🦔","🐾","🐉","🐲"],nature:["🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","💫","⭐️","🌟","✨","⚡️","☄️","💥","🔥","🌪","🌈","☀️","🌤","⛅️","🌥","☁️","🌦","🌧","⛈","🌩","🌨","❄️","☃️","⛄️","🌬","💨","💧","💦","☔️","☂️"],tags:["❤️","🧡","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃"]},m={cols:10,total:Object.keys(f),current:"faces",tags:{faces:"表情",hands:"手势",avatar:"头像",foods:"食物",animals:"动物",nature:"自然",tags:"符号"}};p.emojiConfig&&p.emojiConfig instanceof Function&&p.emojiConfig.call(null,f,m),p.clickToolbar("emoticons",function(){var c=[],r=h('<div class="ke-plugin-emoji"></div>'),e=p.createMenu({name:"emoticons",beforeRemove:function(){d()}}),t=h(".ke-toolbar .ke-icon-emoticons").pos().x,n=h(".ke-toolbar .ke-icon-emoticons").width(),i=h(document.body).width();function o(e,t){for(var n=document.createElement("ul"),i=(t.append(n),n.className="ke-ul",Math.ceil(f[e].length/m.cols)),r=0;r<i;r++){var o=document.createElement("li");h(o).addClass("ke-li"),h(n).append(o);for(var a,l,s=0;s<m.cols;s++)void 0!==(l=f[e][m.cols*r+s])&&(function(e,t){e.mouseover(function(){h(this).addClass("ke-on")}),e.mouseout(function(){h(this).removeClass("ke-on")}),e.click(function(e){p.insertHtml(t).hideMenu(),setTimeout(function(){p.focus(),p.cmd.select(),p.cmd.selection(!0)},100),e.stop()})}(a=h('<span class="ke-emoji">'+l+"</span>"),l),h(o).append(a),c.push(a))}return n}e.div.append(r);var a,l=o(m.current,r),s=h(r).width();function d(){h.each(c,function(){this.unbind()})}function u(e){for(var t in a=h('<div class="ke-page"></div>'),r.append(a),m.tags){var n,i=m.tags[t];t!==e?(function(e,t){e.click(function(e){d(),l.parentNode.removeChild(l),a.remove(),l=o(t,r),u(t),m.current=t,e.stop()})}(n=h('<span class="ke-page-item"><a href="javascript:;">['+i+"]</a></span>"),t),a.append(n),c.push(n)):a.append(h('<span class="ke-page-item">['+i+"]</span>"))}}i<t+s&&h(e.div).css({left:t-(s-n)+"px"}),u(m.current)})}),KindEditor.plugin("symbols",function(h){var p=this,f={teshu:"、,。,·,ˉ,ˇ,¨,〃,—,～,‖,…,‘,’,“,”,〝,〞,〓,〔,〕,〈,〉,「,」,『,』,〖,〗,∶,∧,∨,∪,∩,∈,∷,⊥,∥,∠,⌒,⊙,∵,∴,♂,♀,°,′,″,℃,＄,¤,￠,￡,‰,§,№,☆,★,○,●,◎,◇,◆,□,■,△,▲,※,→,←,↑,↓,〡,〢,〣,〤,〥,〦,〧,〨,〩,㊣,㎎,㎏,㎜,㎝,㎞,㎡,㏄,㏎,㏑,㏒,㏕,︰,￢,￤,℡,ˊ,ˋ,˙,–,―,‥,‵,℅,℉,↖,↗,↘,↙,∕,∟,∣,≒,☉,⊕,〒",shuxue:"＋,－,×,·,÷,／,±,㏒,㏑,∑,∏,×,√,﹢,﹣,±,∫,∮,∝,∞,∧,∨,＝,≈,≡,≠,＜,＞,≤,≥,≦,≧,≮,≯,º,¹,²,³,½,¾,¼,％,‰",xuhao:"⒈,⒉,⒊,⒋,⒌,⒍,⒎,⒏,⒐,⒑,⒒,⒓,⒔,⒕,⒖,⒗,⒘,⒙,⒚,⒛,⑴,⑵,⑶,⑷,⑸,⑹,⑺,⑻,⑼,⑽,⑾,⑿,⒀,⒁,⒂,⒃,⒄,⒅,⒆,⒇,①,②,③,④,⑤,⑥,⑦,⑧,⑨,⑩,㈠,㈡,㈢,㈣,㈤,㈥,㈦,㈧,㈨,㈩,ⅰ,ⅱ,ⅲ,ⅳ,ⅴ,ⅵ,ⅶ,ⅷ,ⅸ,ⅹ,Ⅰ,Ⅱ,Ⅲ,Ⅳ,Ⅴ,Ⅵ,Ⅶ,Ⅷ,Ⅸ,Ⅹ,Ⅺ,Ⅻ,❶,❷,❸,❹,❺,❻,❼,❽,❾,❿,㈠,㈡,㈢,㈣,㈤,㈥,㈦,㈧,㈨,㈩",lading:"Α,Β,Γ,Δ,Ε,Ζ,Η,Θ,Ι,Κ,Λ,Μ,Ν,Ξ,Ο,Π,Ρ,Σ,Τ,Υ,Φ,Χ,Ψ,Ω,α,β,γ,δ,ε,ζ,η,θ,ι,κ,λ,μ,ν,ξ,ο,π,ρ,σ,τ,υ,φ,χ,ψ,ω",zhuyin:"ā,á,ǎ,à,ō,ó,ǒ,ò,ē,é,ě,è,ī,í,ǐ,ì,ū,ú,ǔ,ù,ǖ,ǘ,ǚ,ǜ,ü",yinbiao:"i:,i,e,æ,ʌ,ə:,ə,u:,u,ɔ:,ɔ,a:,ei,ai,ɔi,əu,au,iə,εə,uə,p,t,k,b,d,g,f,s,ʃ,θ,h,v,z,ʒ,ð,tʃ,tr,ts,dʒ,dr,dz,m,n,ŋ,l,r,w,j,",rwzf:"ぁ,あ,ぃ,い,ぅ,う,ぇ,え,ぉ,お,か,が,き,ぎ,く,ぐ,け,げ,こ,ご,さ,ざ,し,じ,す,ず,せ,ぜ,そ,ぞ,た,だ,ち,ぢ,っ,つ,づ,て,で,と,ど,な,に,ぬ,ね,の,は,ば,ぱ,ひ,び,ぴ,ふ,ぶ,ぷ,へ,べ,ぺ,ほ,ぼ,ぽ,ま,み,む,め,も,ゃ,や,ゅ,ゆ,ょ,よ,ら,り,る,れ,ろ,ゎ,わ,ゐ,ゑ,を,ん,ァ,ア,ィ,イ,ゥ,ウ,ェ,エ,ォ,オ,カ,ガ,キ,ギ,ク,グ,ケ,ゲ,コ,ゴ,サ,ザ,シ,ジ,ス,ズ,セ,ゼ,ソ,ゾ,タ,ダ,チ,ヂ,ッ,ツ,ヅ,テ,デ,ト,ド,ナ,ニ,ヌ,ネ,ノ,ハ,バ,パ,ヒ,ビ,ピ,フ,ブ,プ,ヘ,ベ,ペ,ホ,ボ,ポ,マ,ミ,ム,メ,モ,ャ,ヤ,ュ,ユ,ョ,ヨ,ラ,リ,ル,レ,ロ,ヮ,ワ,ヰ,ヱ,ヲ,ン,ヴ,ヵ,ヶ",ewzf:"А,Б,В,Г,Д,Е,Ё,Ж,З,И,Й,К,Л,М,Н,О,П,Р,С,Т,У,Ф,Х,Ц,Ч,Ш,Щ,Ъ,Ы,Ь,Э,Ю,Я,а,б,в,г,д,е,ё,ж,з,и,й,к,л,м,н,о,п,р,с,т,у,ф,х,ц,ч,ш,щ,ъ,ы,ь,э,ю,я",zhibiao:"┏,┳,┓,╔,╦,╗,╓,╥,╖,┣,╋,┫,╠,╬,╣,╟,╫,╢,┗,┻,┛,╚,╩,╝,╙,╨,╜,┌,┬,┐,╭,╮,╱,╲,┃,║,├,┼,┤,╰,╯,╲,╱,┆,┇,└,┴,┘,━,═,┅,┈,╳,⊿,▁,▂,▃,▄,▅,▆,▇,█,▉,▊,▋,▌,▍,▎,▏,▓,▔,▕,▼,▽,◢,◣,◤,◥",qita:"✐,✎,✏,✑,✒,✁,✂,✃,✄,✆,✉,☎,☏,☑,☒,☯,☰,☲,☱,☴,☵,☶,☳,☷,❄,☃,♨,웃,유,❖,☽,☾,☪,✿,❀,⚘,♔,♕,♖,♗,♘,♙,♚,♛,♜,♝,♞,♟,▧,▨,❣,✚,✪,✣,✤,✥,✦,❉,❥,❦,❧,❃,❂,❁,❀,✄,☪,☣,☢,☠,☭,☇,☈,⊙,☊,☋,☌,☍,▣,▤,▥,▦,▩,◘,◙,◈,♫,♬,♪,♩,♭,♪,✄,☪,☣,☢,☠,♯,♩,♪,♫,♬,♭,♮,☎,☏,☪"},m={cols:9,total:Object.keys(f),current:"teshu",tags:{teshu:"特殊",shuxue:"数学",xuhao:"序号",lading:"拉丁",zhuyin:"注音",yinbiao:"音标",rwzf:"日文字符",ewzf:"俄文字符",zhibiao:"制表符",qita:"其他"}};p.symbolConfig&&p.symbolConfig instanceof Function&&p.symbolConfig.call(null,f,m),p.clickToolbar("symbols",function(){var d=[],r=h('<div class="ke-plugin-symbol"></div>'),e=p.createMenu({name:"symbols",beforeRemove:function(){c()}}),t=h(".ke-toolbar .ke-icon-symbols").pos().x,n=h(".ke-toolbar .ke-icon-symbols").width(),i=h(document.body).width();function o(e,t){for(var n=document.createElement("ul"),i=(t.append(n),n.className="ke-ul",f[e].split(",")),r=Math.ceil(i.length/m.cols),o=0;o<r;o++){var a=document.createElement("li");h(a).addClass("ke-li"),h(n).append(a);for(var l,s,c=0;c<m.cols;c++)void 0!==(s=i[m.cols*o+c])&&(function(e,t){e.mouseover(function(){h(this).addClass("ke-on")}),e.mouseout(function(){h(this).removeClass("ke-on")}),e.click(function(e){p.insertHtml(t).hideMenu(),setTimeout(function(){p.focus(),p.cmd.select(),p.cmd.selection(!0)},100),e.stop()})}(l=h('<span class="ke-symbol">'+s+"</span>"),s),h(a).append(l),d.push(l))}return n}e.div.append(r);var a,l=o(m.current,r),s=h(r).width();function c(){h.each(d,function(){this.unbind()})}function u(e){for(var t in a=h('<div class="ke-page"></div>'),r.append(a),m.tags){var n,i=m.tags[t];t!==e?(function(e,t){e.click(function(e){c(),l.parentNode.removeChild(l),a.remove(),l=o(t,r),u(t),m.current=t,e.stop()})}(n=h('<span class="ke-page-item"><a href="javascript:;">['+i+"]</a></span>"),t),a.append(n),d.push(n)):a.append(h('<span class="ke-page-item ke-page-active">['+i+"]</span>"))}}i<t+s&&h(e.div).css({left:t-(s-n)+"px"}),u(m.current)})}),KindEditor.plugin("filemanager",function(v){var b=this,y="filemanager",k=v.undef(b.fileManagerJson,b.basePath+"_404.html"),w=b.pluginsPath+y+"/images/",x=b.lang(y+".");function C(e,t){var n;t.is_dir?e.attr("title",t.filename):e.attr("title",(e=t.filename,n=t.filesize,t=t.datetime,e+" ("+Math.ceil(n/1024)+"KB, "+t+")"))}b.plugin.filemanagerDialog=function(e){var t=v.undef(e.width,650),n=v.undef(e.height,510),i=v.undef(e.dirName,""),r=v.undef(e.viewType,"VIEW").toUpperCase(),a=e.clickFn,e=['<div style="padding:10px 20px;">','<div class="ke-plugin-filemanager-header">','<div class="ke-left">','<img class="ke-inline-block" name="moveupImg" src="'+w+'go-up.gif" width="16" height="16" border="0" alt="" /> ','<a class="ke-inline-block" name="moveupLink" href="javascript:;">'+x.moveup+"</a>","</div>",'<div class="ke-right">',x.viewType+' <select class="ke-inline-block" name="viewType">','<option value="VIEW">'+x.viewImage+"</option>",'<option value="LIST">'+x.listImage+"</option>","</select> ",x.orderType+' <select class="ke-inline-block" name="orderType">','<option value="NAME">'+x.fileName+"</option>",'<option value="SIZE">'+x.fileSize+"</option>",'<option value="TYPE">'+x.fileType+"</option>","</select>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-plugin-filemanager-body"></div>',"</div>"].join(""),o=b.createDialog({name:y,width:t,height:n,title:b.lang(y),body:e}),t=o.div,s=v(".ke-plugin-filemanager-body",t),l=(v('[name="moveupImg"]',t),v('[name="moveupLink"]',t)),c=(v('[name="viewServer"]',t),v('[name="viewType"]',t)),d=v('[name="orderType"]',t);function u(e,t,n){e="path="+e+"&order="+t+"&dir="+i;o.showLoading(b.lang("ajaxLoading")),v.ajax(v.addParam(k,e+"&"+(new Date).getTime()),function(e){o.hideLoading(),n(e)})}var h=[];function p(e,t,n,i){var r=v.formatUrl(t.current_url+n.filename,"absolute"),o=encodeURIComponent(t.current_dir_path+n.filename+"/");n.is_dir?e.click(function(e){u(o,d.val(),i)}):n.is_photo?e.click(function(e){a.call(this,r,n.filename)}):e.click(function(e){a.call(this,r,n.filename)}),h.push(e)}function f(t,n){function e(){"VIEW"==c.val()?u(t.current_dir_path,d.val(),g):u(t.current_dir_path,d.val(),m)}v.each(h,function(){this.unbind()}),l.unbind(),c.unbind(),d.unbind(),t.current_dir_path&&l.click(function(e){u(t.moveup_dir_path,d.val(),n)}),c.change(e),d.change(e),s.html("")}function m(e){f(e,m);for(var t=document.createElement("table"),n=(t.className="ke-table",t.cellPadding=0,t.cellSpacing=0,t.border=0,s.append(t),e.file_list),i=0,r=n.length;i<r;i++){var o=n[i],a=v(t.insertRow(i)),l=(a.mouseover(function(e){v(this).addClass("ke-on")}).mouseout(function(e){v(this).removeClass("ke-on")}),w+(o.is_dir?"folder-16.gif":"file-16.gif")),l=v('<img src="'+l+'" width="16" height="16" alt="'+o.filename+'" align="absmiddle" />'),l=v(a[0].insertCell(0)).addClass("ke-cell ke-name").append(l).append(document.createTextNode(" "+o.filename));!o.is_dir||o.has_file?(a.css("cursor","pointer"),l.attr("title",o.filename),p(l,e,o,m)):l.attr("title",x.emptyFolder),v(a[0].insertCell(1)).addClass("ke-cell ke-size").html(o.is_dir?"-":Math.ceil(o.filesize/1024)+"KB"),v(a[0].insertCell(2)).addClass("ke-cell ke-datetime").html(o.datetime)}}function g(e){f(e,g);for(var t=e.file_list,n=0,i=t.length;n<i;n++){var r=t[n],o=v('<div class="ke-inline-block ke-item"></div>'),a=(s.append(o),v('<div class="ke-inline-block ke-photo"></div>').mouseover(function(e){v(this).addClass("ke-on")}).mouseout(function(e){v(this).removeClass("ke-on")})),l=(o.append(a),e.current_url+r.filename),l=r.is_dir?w+"folder-64.gif":r.is_photo?l:w+"file-64.gif",l=v('<img src="'+l+'" width="80" height="80" alt="'+r.filename+'" />');!r.is_dir||r.has_file?(a.css("cursor","pointer"),C(a,r),p(a,e,r,g)):a.attr("title",x.emptyFolder),a.append(l),o.append('<div class="ke-name" title="'+r.filename+'">'+r.filename+"</div>")}}return c.val(r),u("",d.val(),"VIEW"==r?g:m),o}}),KindEditor.plugin("image",function(C){var T=this,_="image",e=C.undef(T.allowImageUpload,!0),t=C.undef(T.allowImageRemote,!0),S=C.undef(T.allowFileManager,!1),E=(C.undef(T.uploadJson,T.basePath+"_404.html"),C.undef(T.uploadHeader,{})),D=C.undef(T.uploadFileSizeLimit,"2MB"),N=C.undef(T.uploadFileTypeLimit,"*.jpg;*.gif;*.png;*.jpeg,*.bmp"),M=C.undef(T.uploadResponseFilter,0),A=C.undef(T.extraFileUploadParams,{}),I=C.undef(T.filePostName,"imgFile"),R=C.undef(T.uploadJson,T.basePath+"_404.html"),L=C.undef(T.formatUploadUrl,!0),F=T.uploadCompress,n=C.undef(T.imageTabIndex,1),B=(T.pluginsPath,C.undef(T.fillDescAfterUploadImage,!1)),O=T.lang(_+".");T.plugin.imageDialog=function(e){var t,a=C.undef(e.showRemote,!0),l=C.undef(e.showLocal,!0),n=C.undef(e.tabIndex,0),s=e.clickFn,i=((new Date).getTime(),[]);for(t in A)i.push('<input type="hidden" name="'+t+'" value="'+A[t]+'" />');var c,r=['<div style="padding:20px;">','<div class="tabs"></div>','<div class="tab1" style="display:none;">','<div class="ke-dialog-row">','<label for="remoteUrl" style="width:60px;">'+O.remoteUrl+"</label>",'<input type="text" id="remoteUrl" class="ke-input-text" name="url" value="" style="width:'+(S?250:360)+'px;" />','<span class="ke-button-common ke-button-outer"  style="margin-left:'+(S?12:0)+'px">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+O.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="remoteWidth" style="width:60px;">'+O.size+"</label>",O.width+'：<input type="text" id="remoteWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" style="width:130px;margin-right:10px" />',O.height+'：<input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" style="width:130px;margin-right:10px" />','<span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-refresh-bold ke-refresh-btn"></span>',"</div>",'<div class="ke-dialog-row">','<label style="width:60px;">'+O.align+"</label>",'<input type="radio" name="align" class="ke-inline-block" value="" checked="checked" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-default"></span><text style="margin-right:30px;">&nbsp;默认</text>',' <input type="radio" name="align" class="ke-inline-block" value="left" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-left"></span><text style="margin-right:30px;">&nbsp;左对齐</text>',' <input type="radio" name="align" class="ke-inline-block" value="right" /><span class="ke-inline-block ke-toolbar-icon icon-ke-font ke-icon-float-right"></span><text style="margin-right:30px;" >&nbsp;右对齐</text>',"</div>",'<div class="ke-dialog-row">','<label for="remoteTitle" style="width:60px;">'+O.imgTitle+"</label>",'<input type="text" id="remoteTitle" class="ke-input-text" name="title" value="" style="width:360px;" />',"</div>","</div>",'<div class="tab2" style="display:none;">','<div class="ke-dialog-row">','<label style="width:60px;">'+O.localUrl+"</label>",'<input type="text" name="localUrl" class="ke-input-text" tabindex="-1" style="width:270px;" readonly="true" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+O.upload+'" />',"</div>","</div>","</div>"].join(""),d=T.createDialog({name:_,width:480,height:3+(a?340:220),title:T.lang(_),body:r,yesBtn:{name:T.lang("yes"),click:function(e){if(!d.isLoading){if(l&&a&&c&&1===c.selectedIndex||!a)return""==y.fileBox.val()?void alert(T.lang("pleaseSelectFile")):(d.showLoading(T.lang("uploadLoading")),y.submit(),void h.val(""));var t=C.trim(u.val()),n=f.val(),i=m.val(),r=v.val(),o="";b.each(function(){if(this.checked)return o=this.value,!1}),"http://"==t||C.invalidUrl(t)?(alert(T.lang("invalidUrl")),u[0].focus()):/^\d*$/.test(n)?/^\d*$/.test(i)?s.call(T,t,r,n,i,0,o):(alert(T.lang("invalidHeight")),m[0].focus()):(alert(T.lang("invalidWidth")),f[0].focus())}}},beforeRemove:function(){p.unbind(),f.unbind(),m.unbind(),g.unbind()}}),o=d.div,u=C('[name="url"]',o),h=C('[name="localUrl"]',o),p=C('[name="viewServer"]',o),f=C('.tab1 [name="width"]',o),m=C('.tab1 [name="height"]',o),g=C(".ke-refresh-btn",o),v=C('.tab1 [name="title"]',o),b=C('.tab1 [name="align"]',o),y=(a&&l?((c=C.tabs({src:C(".tabs",o),afterSelect:function(e){}})).add({title:O.remoteImage,panel:C(".tab1",o)}),c.add({title:O.localImage,panel:C(".tab2",o)}),c.select(n)):a?C(".tab1",o).show():l&&C(".tab2",o).show(),C.uploadbutton({button:C(".ke-upload-button",o)[0],width:"auto",fieldName:I,fileSizeLimit:D,fileTypeLimit:N,uploadHeader:E,uploadData:A,uploadUrl:C.addParam(R,"dir=image"),uploadResponseFilter:M,uploadCompress:F,afterUpload:function(e){var t;d.hideLoading(),0===e.error?(t=e.url,L&&(t=C.formatUrl(t,"absolute")),T.afterUpload&&T.afterUpload.call(T,t,e,_),B?(C(".ke-dialog-row #remoteUrl",o).val(t),C(".ke-tabs-li",o)[0].click(),C(".ke-refresh-btn",o).click()):s.call(T,t,e.title,e.width,e.height,e.border,e.align)):(alert(e.message),setTimeout(function(){h.val("")},100))},afterError:function(e){d.hideLoading(),T.errorDialog(e)}})),k=(y.fileBox.change(function(e){h.val(y.fileBox.val())}),S?p.click(function(e){T.loadPlugin("filemanager",function(){T.plugin.filemanagerDialog({viewType:"VIEW",dirName:"image",clickFn:function(e,t){1<T.dialogs.length&&(C('[name="url"]',o).val(e),T.afterSelectFile&&T.afterSelectFile.call(T,e),T.hideDialog())}})})}):p.hide(),0),w=0,r=T.plugin.getSelectedImage();function x(e,t){e&&(f.val(e),0),t&&(m.val(t),0)}return r&&r.get&&(r=r.get())&&(k=r.naturalWidth,w=r.naturalHeight,r.width,r.height),g.click(function(e){var t;0<k*w?x(k,w):((t=new Image).onload=function(){x(this.width,this.height),t=null},t.src=u.val())}),f.change(function(e){/^\d+$/.test(this.value)&&0<this.value&&m.val(Math.round(w/k*parseInt(this.value,10)))}),m.change(function(e){/^\d+$/.test(this.value)&&0<this.value&&f.val(Math.round(k/w*parseInt(this.value,10)))}),u.val(e.imageUrl),x(e.imageWidth,e.imageHeight),v.val(e.imageTitle),b.each(function(){if(this.value===e.imageAlign)return!(this.checked=!0)}),a&&0===n&&(u[0].focus(),u[0].select()),d},T.plugin.image={edit:function(){var a=T.plugin.getSelectedImage();T.plugin.imageDialog({imageUrl:a?a.attr("data-ke-src"):"http://",imageWidth:a?a.attr("width"):"",imageHeight:a?a.attr("height"):"",imageTitle:a?a.attr("title"):"",imageAlign:a?a.attr("align"):"",showRemote:t,showLocal:e,tabIndex:a?0:n,clickFn:function(e,t,n,i,r,o){a?(a.attr("src",e),a.attr("data-ke-src",e),n?a.attr("width",n):a.removeAttr("width"),i?a.attr("height",i):a.removeAttr("height"),t?a.attr("title",t):a.removeAttr("title"),o?a.attr("align",o):a.removeAttr("align"),t?a.attr("alt",t):a.removeAttr("alt")):(T.exec("insertimage",e,t,n,i,r,o,"ke-image"),setTimeout(function(){T.edit.afterChange.call(T.edit)},300)),setTimeout(function(){T.hideDialog().focus()},0)}})},delete:function(){var e=T.plugin.getSelectedImage();(e="a"==e.parent().name?e.parent():e).remove(),T.addBookmark()}},T.clickToolbar(_,T.plugin.image.edit)}),KindEditor.plugin("insertfile",function(c){var d=this,u="insertfile",h=c.undef(d.allowFileUpload,!0),p=c.undef(d.allowFileManager,!1),f=c.undef(d.uploadHeader,{}),m=c.undef(d.uploadFileSizeLimit,"20MB"),g=c.undef(d.uploadFileTypeLimit,"*.mp3;*.wav;*.mp4;*.wmv;*.rmvb;*.avi,*.jpg;*.gif;*.png;*.jpeg,*.bmp"),v=c.undef(d.uploadResponseFilter,0),b=c.undef(d.extraFileUploadParams,{}),y=c.undef(d.filePostName,"imgFile"),k=c.undef(d.uploadJson,d.basePath+"_404.html"),w=c.undef(d.formatUploadUrl,!0),x=d.lang(u+".");d.plugin.fileDialog=function(e){var t,n=c.undef(e.fileUrl,"http://"),i=c.undef(e.fileTitle,""),r=e.clickFn,e=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+x.url+"</label>",'<input type="text" id="keUrl" name="url" class="ke-input-text" style="width:'+(p?160:260)+'px;" />','<input type="button" class="ke-upload-button" value="'+x.upload+'" />','<span class="ke-button-common ke-button-outer" style="margin-left:'+(p?5:0)+'px" >','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+x.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keTitle" style="width:60px;">'+x.title+"</label>",'<input type="text" id="keTitle" class="ke-input-text" name="title" value="" style="width:160px;" /></div>',"</div>","</form>","</div>"].join(""),o=d.createDialog({name:u,width:450,height:220,title:d.lang(u),body:e,yesBtn:{name:d.lang("yes"),click:function(e){var t=c.trim(l.val()),n=s.val();"http://"==t||c.invalidUrl(t)?(alert(d.lang("invalidUrl")),l[0].focus()):(""===c.trim(n)&&(n=t),r.call(d,t,n))}}}),a=o.div,l=c('[name="url"]',a),e=c('[name="viewServer"]',a),s=c('[name="title"]',a);h?(t=c.uploadbutton({button:c(".ke-upload-button",a)[0],width:"auto",fieldName:y,fileSizeLimit:m,fileTypeLimit:g,uploadHeader:f,uploadData:b,uploadUrl:c.addParam(k,"dir=file"),uploadResponseFilter:v,afterUpload:function(e){var t;o.hideLoading(),0===e.error?(t=e.url,w&&(t=c.formatUrl(t,"absolute")),l.val(t),d.afterUpload&&d.afterUpload.call(d,t,e,u)):alert(e.message)},afterError:function(e){o.hideLoading(),d.errorDialog(e)}})).fileBox.change(function(e){c("input[type='file']",t.form[0]).val()&&(o.showLoading(d.lang("uploadLoading")),t.submit())}):c(".ke-upload-button",a).hide(),p?e.click(function(e){d.loadPlugin("filemanager",function(){d.plugin.filemanagerDialog({viewType:"LIST",dirName:"file",clickFn:function(e,t){1<d.dialogs.length&&(c('[name="url"]',a).val(e),d.afterSelectFile&&d.afterSelectFile.call(d,e),d.hideDialog())}})})}):e.hide(),l.val(n),s.val(i),l[0].focus(),l[0].select()},d.clickToolbar(u,function(){d.plugin.fileDialog({clickFn:function(e,t){d.insertHtml('<a class="ke-insertfile" href="'+e+'" data-ke-src="'+e+'" target="_blank">'+t+"</a>").hideDialog().focus()}})})}),KindEditor.plugin("lineheight",function(r){var o=this,t="lineheight",a=o.lang(t+".");o.clickToolbar(t,function(){var n="",e=o.cmd.commonNode({"*":".line-height"}),i=(e&&(n=e.css("line-height")),o.createMenu({name:t,width:150}));r.each(a.lineHeight,function(e,t){r.each(t,function(e,t){i.addItem({title:t,checked:n===e,click:function(){o.cmd.toggle('<span style="line-height:'+e+';"></span>',{span:".line-height="+e}),o.updateState(),o.addBookmark(),o.hideMenu()}})})})})}),KindEditor.plugin("link",function(r){var o=this,a="link";o.plugin.link={edit:function(){var e=o.lang("link."),t='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+e.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+e.linkType+'</label><select id="keType" name="type"></select></div></div>',t=o.createDialog({name:a,width:450,title:o.lang(a),body:t,yesBtn:{name:o.lang("yes"),click:function(e){var t=r.trim(n.val());("http://"==t||r.invalidUrl(t)?(alert(o.lang("invalidUrl")),n[0]):o.exec("createlink",t,i.val()).hideDialog()).focus()}}}).div,n=r('input[name="url"]',t),i=r('select[name="type"]',t),t=(n.val("http://"),i[0].options[0]=new Option(e.newWindow,"_blank"),i[0].options[1]=new Option(e.selfWindow,""),o.cmd.selection(),o.plugin.getSelectedLink());t&&(o.cmd.range.selectNode(t[0]),o.cmd.select(),n.val(t.attr("data-ke-src")),i.val(t.attr("target"))),n[0].focus(),n[0].select()},delete:function(){o.exec("unlink",null)}},o.clickToolbar(a,o.plugin.link.edit)}),KindEditor.plugin("media",function(g){var v=this,r="media",o=v.lang(r+"."),a=g.undef(v.allowMediaUpload,!0),l=g.undef(v.allowFileManager,!1),s=g.undef(v.uploadHeader,{}),b=g.undef(v.uploadFileSizeLimit,"20MB"),y=g.undef(v.uploadFileTypeLimit,"*.mp3;*.wav;*.mp4;*.wmv;*.rmvb;*.avi"),k=g.undef(v.uploadResponseFilter,0),w=g.undef(v.extraFileUploadParams,{}),x=g.undef(v.filePostName,"imgFile"),C=g.undef(v.uploadJson,v.basePath+"_404.html"),T=g.undef(v.formatUploadUrl,!0);v.plugin.media={edit:function(){var t,e=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+o.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:'+(l?160:260)+'px;" />','<input type="button" class="ke-upload-button" value="'+o.upload+'" />','<span class="ke-button-common ke-button-outer"  style="margin-left:'+(l?5:0)+'px" >','<input type="button" class="ke-button-common ke-button " name="viewServer" value="'+o.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+o.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="320" maxlength="4" />','<label for="keHeight" style="width:60px;text-align:left;margin-left:30px">'+o.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="auto" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="kePreload" style="width:60px;">预加载</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="kePreload" name="preload" value="" /></div>','<label for="keAutostart" style="width:60px;text-align:left;margin-left:30px">自动播放</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keAutostart" name="autoplay" value="" /></div>',"</div>",'<div class="ke-dialog-row">','<label for="keControls" style="width:60px;">控制按钮</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keControls" name="controls" checked value="" /></div>','<label for="keLoop" style="width:60px;text-align:left;margin-left:30px">循环播放</label>','<div style="width:80px;display:inline-block;"><input type="checkbox" id="keLoop" name="loop" checked value="" /></div>',"</div>","</div>"].join(""),n=v.createDialog({name:r,width:450,height:300,title:v.lang(r),body:e,yesBtn:{name:v.lang("yes"),click:function(e){var t,n=g.trim(c.val()),i=d.val(),r=u.val(),o=p[0].checked,a=h[0].checked,l=f[0].checked,s=m[0].checked;("http://"==n||g.invalidUrl(n)?(alert(v.lang("invalidUrl")),c[0]):"auto"==i||/^\d*$/.test(i)?"auto"==r||/^\d*$/.test(r)?(t="video",n=["<p><"+(t=/\.(mp3|wav|ogg|acc)(\?|$)/i.test(n)?"audio":t),'data-ke-class="ke-audio"','class="ke-media"','style="display:inline;"','src="'+n+'"','width="'+i+'"','height="'+r+'"',o?"preload":"",a?"autoplay":"",l?"controls":"",s?"loop":"","></"+t+"><span>​　</span></p>"].join(" "),((i=function(e){for(var t=g(e.commonAncestor());t&&(1!=t.type||t.isStyle());)t=t.parent();return t}(v.cmd.range))&&"p"!=i.name?v.insertHtml(n):(g(i).after(n),v)).hideDialog()):(alert(v.lang("invalidHeight")),u[0]):(alert(v.lang("invalidWidth")),d[0])).focus()}}}),i=n.div,c=g('[name="url"]',i),e=g('[name="viewServer"]',i),d=g('[name="width"]',i),u=g('[name="height"]',i),h=g('[name="autoplay"]',i),p=g('[name="preload"]',i),f=g('[name="controls"]',i),m=g('[name="loop"]',i);c.val("http://"),a?(t=g.uploadbutton({button:g(".ke-upload-button",i)[0],width:"auto",fieldName:x,fileSizeLimit:b,fileTypeLimit:y,uploadHeader:s,uploadData:w,uploadUrl:g.addParam(C,"dir=media"),uploadResponseFilter:k,afterUpload:function(e){var t;n.hideLoading(),0===e.error?(t=e.url,T&&(t=g.formatUrl(t,"absolute")),c.val(t),v.afterUpload&&v.afterUpload.call(v,t,e,r)):(alert(e.message),setTimeout(function(){c.val("http://")},100))},afterError:function(e){n.hideLoading(),v.errorDialog(e)}})).fileBox.change(function(e){g("input[type='file']",t.form[0]).val()&&(n.showLoading(v.lang("uploadLoading")),t.submit())}):g(".ke-upload-button",i).hide(),l?e.click(function(e){v.loadPlugin("filemanager",function(){v.plugin.filemanagerDialog({viewType:"LIST",dirName:"media",clickFn:function(e,t){1<v.dialogs.length&&(g('[name="url"]',i).val(e),v.afterSelectFile&&v.afterSelectFile.call(v,e),v.hideDialog())}})})}):e.hide()},delete:function(){v.plugin.getSelectedMedia().remove(),v.addBookmark()}},v.clickToolbar(r,v.plugin.media.edit)}),(U=KindEditor).extend(Ut,{init:function(r){var o=this,e=(r.afterError=r.afterError||function(e){alert(e)},o.options=r,o.progressbars={},"ke_multi_upload_btn"+ +new Date+"_"+Math.floor(9e4*Math.random()+9999)),t="ke_multi_upload_dragbody"+ +new Date+"_"+Math.floor(9e4*Math.random()+9999),n="ke_multi_upload_error"+ +new Date+"_"+Math.floor(9e4*Math.random()+9999);function a(e,t){U(".ke-status",e).addClass("upload-error"),U(".ke-status > div",e).hide(),U(".ke-message",e).addClass("ke-error").show().html(U.escape(t))}o.div=U(r.container).html(['<div class="ke-swfupload">','<div class="ke-swfupload-top" >','<div class="ke-inline-block ke-swfupload-button" id="'+e+'" style="width: 86px;">',"</div>",'<div class="ke-inline-block ke-swfupload-desc">'+r.uploadDesc+"</div>",'<span class="ke-button-common ke-button-outer ke-swfupload-startupload">','<input type="button" class="ke-button-common ke-button ke-startup-upload-button" value="'+r.startButtonValue+'" />',"</span>","</div>",'<div class="ke-swfupload-body" id="'+t+'"></div>','<div class="upload-error-result" id="'+n+'"></div>',"</div>"].join("")),o.bodyDiv=U(".ke-swfupload-body",o.div),o.uploader=WebUploader.create({server:o.options.uploadUrl,pick:"#"+e,resize:!1,fileVal:"file",accept:{title:"Images",extensions:r.fileTypes.replace(/\*\./g,"").replace(/;/g,","),mimeTypes:"image/*"},uploadBeforeSend:function(e,t,n){},headers:r.uploadHeader,formData:r.uploadData,fileNumLimit:r.fileUploadLimit,fileSingleSizeLimit:1024*+r.fileSizeLimit.replace(/MB/g,"")*1024}),void 0!==o.options.uploadCompress&&(o.uploader.options.compress=o.options.uploadCompress),o.uploader.on("fileQueued",function(n){o.uploader.makeThumb(n,function(e,t){e&&(t=o.options.fileIconUrl),n.url=t,o.appendFile(n)},80,80)}),o.uploader.on("uploadStart",function(e){e=U('div[data-id="'+e.id+'"]',this.bodyDiv);U(".ke-status > div",e).hide(),U(".ke-progressbar",e).show()}),o.uploader.on("uploadProgress",function(e,t){e=o.progressbars[e.id],t=Math.floor(100*t),e.bar.css("width",t+"%"),t=100<=t?"上传成功":t+"%";e.percent.html(t).show()}),o.uploader.on("uploadSuccess",function(e,t){var n,i=t,t=(r.uploadResponseFilter&&(i=r.uploadResponseFilter.call(null,t)),U('div[data-id="'+e.id+'"]',o.bodyDiv).eq(0));0!==i.error?a(t,i.message||o.options.errorMessage):(n=i.url,n=o.options.formatUploadUrl?e.url=U.formatUrl(i.url,"absolute"):e.url=i.url,U(".ke-img",t).attr("src",e.url).attr("data-status","1").data("data",{url:n,title:e.name+"",width:(e._info||{width:"auto"}).width+"",height:"",border:"",align:""}))}),o.uploader.on("uploadError",function(e,t){e&&(e=U('div[data-id="'+e.id+'"]',o.bodyDiv).eq(0),console.info("reason",t),a(e,"ERROR:"+t))}),o.uploader.on("error",function(e){var t="部分或全部文件上传出现错误，请检查后重试！";"Q_TYPE_DENIED"===e?t="["+arguments[1].name+"]文件类型不正确，上传失败！":"Q_EXCEED_NUM_LIMIT"===e?t="同时最多可上传"+r.fileUploadLimit+"张图片，超出部分已经忽略！":"F_EXCEED_SIZE"===e?t="["+arguments[2].name+"]文件大小超出限制（最大"+ +r.fileSizeLimit.replace(/MB/g,"")+"M），上传失败！":"F_DUPLICATE"===e&&(t="["+arguments[1].name+"]文件已存在于待上传列表中！"),console.error("部分或全部文件上传出现错误，请检查后重试！",arguments),alert(t)}),U(".ke-swfupload-startupload input",o.div).click(function(){o.uploader.upload()})},removeFile:function(e){this.uploader.cancelFile(e);e=U('div[data-id="'+e+'"]',this.bodyDiv);U(".ke-photo",e).unbind(),U(".ke-delete",e).unbind(),e.remove()},removeFiles:function(){var e=this;U(".ke-item",e.bodyDiv).each(function(){e.removeFile(U(this).attr("data-id"))})},appendFile:function(e){var t=this,n=U('<div class="ke-inline-block ke-item" draggable="false" data-id="'+e.id+'"></div>'),i=(t.bodyDiv.append(n),U('<div class="ke-inline-block ke-photo"></div>').mouseover(function(e){U(this).addClass("ke-on")}).mouseout(function(e){U(this).removeClass("ke-on")})),r=(n.append(i),U('<img class="ke-multi-image ke-img" src="'+e.url+'" class="ke-img" draggable="false" data-status="0" alt="'+e.name+'" />')),r=(i.append(r),U('<span class="ke-delete"></span>').appendTo(i).click(function(){t.removeFile(e.id)}),U('<div class="ke-status"></div>').appendTo(i));U(['<div class="ke-progressbar">','<div class="ke-progressbar-bar"><div class="ke-progressbar-bar-inner"></div></div>','<div class="ke-progressbar-percent">0%</div></div>'].join("")).hide().appendTo(r),U('<div class="ke-message">'+t.options.pendingMessage+"</div>").appendTo(r),n.append('<div class="ke-name">'+e.name+"</div>"),t.progressbars[e.id]={bar:U(".ke-progressbar-bar-inner",i),percent:U(".ke-progressbar-percent",i)}},remove:function(){this.removeFiles(),this.destroy(),this.div.html("")},getUrlList:function(){var t=[];return U(".ke-img",self.bodyDiv).each(function(){var e=U(this);"1"==e.attr("data-status")&&t.push(e.data("data"))}),t},destroy:function(){this.uploader.destroy()}}),U.swfupload=function(e,t){return new Ut(e)},KindEditor.plugin("multiimage",function(o){var a=this,l="multiimage",s=(o.undef(a.formatUploadUrl,!0),o.undef(a.uploadJson,a.basePath+"_404.html")),c=o.undef(a.uploadHeader,{}),d=o.undef(a.extraFileUploadParams,{}),u=a.pluginsPath+"multiimage/images/",h=o.undef(a.imageSizeLimit,"1MB"),p=(o.undef(a.imageFileTypes,"*.jpg;*.gif;*.png"),o.undef(a.uploadResponseFilter,0)),f=o.undef(a.imageUploadLimit,20),m=o.undef(a.filePostName,"imgFile"),g=a.lang(l+".");a.plugin.multiImageDialog=function(e){var t=e.clickFn,e=o.tmpl(g.uploadDesc,{uploadLimit:f,sizeLimit:h}),n=['<div style="padding:10px 20px;">','<div class="swfupload">',"</div>","</div>"].join(""),n=a.createDialog({name:l,width:650,height:500,title:a.lang(l),body:n,previewBtn:{name:g.insertAll,click:function(e){t.call(a,r.getUrlList())}},yesBtn:{name:g.clearAll,click:function(e){r.removeFiles()}},beforeRemove:function(){r.destroy()}}),i=n.div,r=o.swfupload({container:o(".swfupload",i),buttonImageUrl:u+("zh-CN"==a.langType?"select-files-zh-CN.png":"select-files-en.png"),buttonWidth:"zh-CN"==a.langType?72:88,buttonHeight:23,fileIconUrl:u+"image.png",uploadDesc:e,startButtonValue:g.startUpload,uploadUrl:o.addParam(s,"dir=image"),uploadData:d,uploadHeader:c,uploadResponseFilter:p,uploadCompress:a.uploadCompress,formatUploadUrl:a.formatUploadUrl,flashUrl:u+"swfupload.swf",filePostName:m,fileTypes:"*.jpg;*.jpeg;*.gif;*.png;*.bmp",fileTypesDesc:"Image Files",fileUploadLimit:f,fileSizeLimit:h,postParams:o.undef(a.extraFileUploadParams,{}),queueLimitExceeded:g.queueLimitExceeded,fileExceedsSizeLimit:g.fileExceedsSizeLimit,zeroByteFile:g.zeroByteFile,invalidFiletype:g.invalidFiletype,unknownError:g.unknownError,pendingMessage:g.pending,errorMessage:g.uploadError,afterError:function(e){a.errorDialog(e)}});return o(r.bodyDiv).bind("drop",function(e){e.preventDefault(),e.event.preventDefault();var t=[];[].forEach.call(e.event.dataTransfer.files,function(e){t.push(e)},!1),0<t.length&&r.uploader.addFiles(t),o(r.bodyDiv).removeClass("drag-hover")}),o(r.bodyDiv).bind("dragenter",function(e){o(r.bodyDiv).addClass("drag-hover")}),o(r.bodyDiv).bind("dragover",function(e){e.preventDefault()}),o(r.bodyDiv).bind("dragleave",function(){o(r.bodyDiv).removeClass("drag-hover")}),o(r.bodyDiv).bind("mouseleave",function(){o(r.bodyDiv).removeClass("drag-hover")}),o(r.bodyDiv).bind("mouseout",function(){o(r.bodyDiv).removeClass("drag-hover")}),n},a.clickToolbar(l,function(){a.plugin.multiImageDialog({clickFn:function(e){0!==e.length&&(o.each(e,function(e,t){a.afterUpload&&a.afterUpload.call(a,t.url,t,"multiimage"),a.exec("insertimage",t.url,t.title,t.width,t.height,t.border,t.align,"ke-image","p")}),setTimeout(function(){a.hideDialog().focus()},0))}})})}),KindEditor.plugin("pagebreak",function(i){var r=this,o=i.undef(r.pagebreakHtml,'<hr style="page-break-after: always;" class="ke-pagebreak" />');r.clickToolbar("pagebreak",function(){var e=r.cmd,t=e.range,n=(r.focus(),"br"==r.newlineTag||i.WEBKIT?"":'<span id="__kindeditor_tail_tag__"></span>');r.insertHtml(o+n),n&&(n=i("#__kindeditor_tail_tag__",r.edit.doc),t.selectNodeContents(n[0]),n.removeAttr("id"),e.select())})}),KindEditor.plugin("plainpaste",function(i){var r=this,t="plainpaste";r.clickToolbar(t,function(){var e='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+r.lang(t+".").comment+'</div><textarea class="ke-textarea" style="width:518px;height:260px;"></textarea></div>',e=r.createDialog({name:t,width:560,title:r.lang(t),body:e,yesBtn:{name:r.lang("yes"),click:function(e){var t=n.val();t=(t=i.escape(t)).replace(/ {2}/g," &nbsp;"),t="p"==r.newlineTag?t.replace(/^/,"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>"):t.replace(/\n/g,"<br />$&"),r.insertHtml(t).hideDialog().focus()}}}),n=i("textarea",e.div);n[0].focus()})}),KindEditor.plugin("preview",function(n){var i=this,r="preview";i.clickToolbar(r,function(){i.lang(r+".");var e=i.createDialog({name:r,width:750,title:i.lang(r),body:'<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),e=n("iframe",e.div),t=n.iframeDoc(e);t.open(),t.write(i.fullHtml()),t.close(),n(t.body).css("background-color","#FFF"),e[0].contentWindow.focus()})}),KindEditor.plugin("quote",function(r){var o=this;o.clickToolbar("quote",function(){o.focus();var e="​",t=o.cmd.range,n=function(e){for(var t=r(e.commonAncestor());t&&(1!=t.type||t.isStyle());)t=t.parent();return t}(o.cmd.range),t=(t&&(t=t.extractContents(),e=r(t).outer()||r(t).html()),'<blockquote style="padding: 0 1.5em;border-left: 5px solid #ddd;font-style: italic;margin-block-start: 0;margin-inline-start: 0;min-height: 2rem"><p>'+(e=e||"​")+"</p></blockquote>");if(n&&-1<["p","h1","h2","h3","h4","h5","h6"].indexOf(n.name)){r(n).after(t);e=r(n).next();o.cmd.range.selectNodeContents(e).collapse(),o.cmd.select(),e.focus()}else{o.insertHtml(t);for(var i=n;i&&i.children&&i.children().length;)i=i.children();i&&i[0]&&o.cmd.range.selectNodeContents(i[0]).collapse(),o.cmd.select()}o.cmd.selection(!0)})}),KindEditor.plugin("quickformat",function(s){var c=this,d=s.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p,pre,code");c.clickToolbar("quickformat",function(){c.focus();for(var e,i=c.edit.doc,t=c.cmd.range,n=s(i.body).first(),r=[],o=[],a=t.createBookmark(!0);n;){(e=n.next())&&console.info(-1,e.name);var l=function(e){for(var t=e.first();t&&t.first();)t=t.first();return t}(n);l&&"img"==l.name||(d[n.name]?(n.html(n.html().replace(/^(\s|&nbsp;|　)+/gi,"")),n.css("text-indent","pre"==n.name?"":"2em")):o.push(n),(!e||d[e.name]||d[n.name]&&!d[e.name])&&(0<o.length&&r.push(o),o=[])),n=e}s.each(r,function(e,t){var n=s('<p style="text-indent:2em;"></p>',i);t[0].before(n),s.each(t,function(e,t){n.append(t)})}),t.moveToBookmark(a),c.addBookmark()})}),KindEditor.plugin("table",function(M){var A=this,i="table",r=A.lang(i+"."),I="ke-zeroborder";function o(e,t){t=t.toUpperCase(),e.css("background-color",t),e.css("color","#000000"===t?"#FFFFFF":"#000000"),e.html(t)}var a=[];function l(i,e){function r(){M.each(a,function(){this.remove()}),a=[],M(document).unbind("click,mousedown",r),i.unbind("click,mousedown",r)}e.bind("click,mousedown",function(e){e.stopPropagation()}),e.click(function(e){r();var t=M(this),n=t.pos(),n=M.colorpicker({x:n.x,y:n.y+t.height(),z:811214,selectedColor:M(this).html(),colors:A.colorTable,noColor:A.lang("noColor"),shadowMode:A.shadowMode,click:function(e){o(t,e),r()}});a.push(n),M(document).bind("click,mousedown",r),i.bind("click,mousedown",r)})}function c(e,t,n){for(var i=0,r=0,o=t.cells.length;r<o&&t.cells[r]!=n;r++)i+=t.cells[r].rowSpan-1;return n.cellIndex-i}A.plugin.table={prop:function(e){var t,v,n=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keRows" style="width:90px;">'+r.cells+"</label>",r.rows+' <input type="text" id="keRows" class="ke-input-text ke-input-number" name="rows" value="" maxlength="4" /> &nbsp; ',r.cols+' <input type="text" class="ke-input-text ke-input-number" name="cols" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+r.size+"</label>",r.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+r.percent+"</option>",'<option value="px">'+r.px+"</option>","</select> &nbsp; ",r.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+r.percent+"</option>",'<option value="px">'+r.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="kePadding" style="width:90px;">'+r.space+"</label>",r.padding+' <input type="text" id="kePadding" class="ke-input-text ke-input-number" name="padding" value="" maxlength="4" /> &nbsp; ',r.spacing+' <input type="text" class="ke-input-text ke-input-number" name="spacing" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+r.align+"</label>",'<select id="keAlign" name="align">','<option value="">'+r.alignDefault+"</option>",'<option value="left">'+r.alignLeft+"</option>",'<option value="center">'+r.alignCenter+"</option>",'<option value="right">'+r.alignRight+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+r.border+"</label>",r.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',r.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+r.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),b=A.cmd.range.createBookmark(),n=A.createDialog({name:i,width:500,title:A.lang(i),body:n,beforeRemove:function(){N.unbind()},yesBtn:{name:A.lang("yes"),click:function(e){var t=y.val(),n=k.val(),i=w.val(),r=x.val(),o=C.val(),a=T.val(),l=_.val(),s=S.val(),c=E.val(),d=D.val(),u=M(N[0]).html()||"",h=M(N[1]).html()||"";if(0!=t&&/^\d+$/.test(t))if(0!=n&&/^\d+$/.test(n))if(/^\d*$/.test(i))if(/^\d*$/.test(r))if(/^\d*$/.test(l))if(/^\d*$/.test(s))if(/^\d*$/.test(d)){if(v)""!==i?v.width(i+o):v.css("width",""),void 0!==v[0].width&&v.removeAttr("width"),""!==r?v.height(r+a):v.css("height",""),void 0!==v[0].height&&v.removeAttr("height"),v.css("background-color",h),void 0!==v[0].bgColor&&v.removeAttr("bgColor"),""!==l?v[0].cellPadding=l:v.removeAttr("cellPadding"),""!==s?v[0].cellSpacing=s:v.removeAttr("cellSpacing"),""!==c?v[0].align=c:v.removeAttr("align"),""!==d?v.attr("border",d):v.removeAttr("border"),""===d||"0"===d?v.addClass(I):v.removeClass(I),""!==u?v.attr("borderColor",u):v.removeAttr("borderColor"),A.hideDialog().focus(),A.cmd.range.moveToBookmark(b),A.cmd.select();else{var p="",f=(""!==i&&(p+="width:"+i+o+";"),""!==r&&(p+="height:"+r+a+";"),""!==h&&(p+="background-color:"+h+";"),"<table");""!==p&&(f+=' style="'+p+'"'),""!==l&&(f+=' cellpadding="'+l+'"'),""!==s&&(f+=' cellspacing="'+s+'"'),""!==c&&(f+=' align="'+c+'"'),""!==d&&(f+=' border="'+d+'"'),""!==d&&"0"!==d||(f+=' class="'+I+'"'),""!==u&&(f+=' bordercolor="'+u+'"'),f+=">";for(var m=0;m<t;m++){f+="<tr>";for(var g=0;g<n;g++)f+="<td>"+(M.IE?"&nbsp;":"<br />")+"</td>";f+="</tr>"}f+="</table>",M.IE||(f+="<br />"),A.insertHtml(f),A.select().hideDialog().focus()}A.addBookmark()}else alert(A.lang("invalidBorder")),D[0].focus();else alert(A.lang("invalidSpacing")),S[0].focus();else alert(A.lang("invalidPadding")),_[0].focus();else alert(A.lang("invalidHeight")),x[0].focus();else alert(A.lang("invalidWidth")),w[0].focus();else alert(A.lang("invalidRows")),k[0].focus();else alert(A.lang("invalidRows")),y[0].focus()}}}).div,y=M('[name="rows"]',n).val(3),k=M('[name="cols"]',n).val(2),w=M('[name="width"]',n).val(100),x=M('[name="height"]',n),C=M('[name="widthType"]',n),T=M('[name="heightType"]',n),_=M('[name="padding"]',n).val(2),S=M('[name="spacing"]',n).val(0),E=M('[name="align"]',n),D=M('[name="border"]',n).val(1),N=M(".ke-input-color",n);l(n,N.eq(0)),l(n,N.eq(1)),o(N.eq(0),"#000000"),o(N.eq(1),""),y[0].focus(),y[0].select(),e||(v=A.plugin.getSelectedTable())&&(y.val(v[0].rows.length),k.val(0<v[0].rows.length?v[0].rows[0].cells.length:0),y.attr("disabled",!0),k.attr("disabled",!0),n=v[0].style.width||v[0].width,e=v[0].style.height||v[0].height,void 0!==n&&(t=/^(\d+)((?:px|%)*)$/.exec(n))?(w.val(t[1]),C.val(t[2])):w.val(""),void 0!==e&&(t=/^(\d+)((?:px|%)*)$/.exec(e))&&(x.val(t[1]),T.val(t[2])),_.val(v[0].cellPadding||""),S.val(v[0].cellSpacing||""),E.val(v[0].align||""),D.val(void 0===v[0].border?"":v[0].border),o(N.eq(0),M.toHex(v.attr("borderColor")||"")),o(N.eq(1),M.toHex(v[0].style.backgroundColor||v[0].bgColor||"")),w[0].focus(),w[0].select())},cellprop:function(){var e=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+r.size+"</label>",r.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+r.percent+"</option>",'<option value="px">'+r.px+"</option>","</select> &nbsp; ",r.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+r.percent+"</option>",'<option value="px">'+r.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+r.align+"</label>",r.textAlign+' <select id="keAlign" name="textAlign">','<option value="">'+r.alignDefault+"</option>",'<option value="left">'+r.alignLeft+"</option>",'<option value="center">'+r.alignCenter+"</option>",'<option value="right">'+r.alignRight+"</option>","</select> ",r.verticalAlign+' <select name="verticalAlign">','<option value="">'+r.alignDefault+"</option>",'<option value="top">'+r.alignTop+"</option>",'<option value="middle">'+r.alignMiddle+"</option>",'<option value="bottom">'+r.alignBottom+"</option>",'<option value="baseline">'+r.alignBaseline+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+r.border+"</label>",r.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',r.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+r.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join(""),d=A.cmd.range.createBookmark(),e=A.createDialog({name:i,width:500,title:A.lang("tablecell"),body:e,beforeRemove:function(){k.unbind()},yesBtn:{name:A.lang("yes"),click:function(e){var t=u.val(),n=h.val(),i=p.val(),r=f.val(),o=(m.val(),g.val(),v.val()),a=b.val(),l=y.val(),s=M(k[0]).html()||"",c=M(k[1]).html()||"";/^\d*$/.test(t)?/^\d*$/.test(n)?/^\d*$/.test(l)?(w.css({width:""!==t?t+i:"",height:""!==n?n+r:"","background-color":c,"text-align":o,"vertical-align":a,"border-width":l,"border-style":""!==l?"solid":"","border-color":s}),A.hideDialog().focus(),A.cmd.range.moveToBookmark(d),A.cmd.select(),A.addBookmark()):(alert(A.lang("invalidBorder")),y[0].focus()):(alert(A.lang("invalidHeight")),h[0].focus()):(alert(A.lang("invalidWidth")),u[0].focus())}}}).div,u=M('[name="width"]',e).val(100),h=M('[name="height"]',e),p=M('[name="widthType"]',e),f=M('[name="heightType"]',e),m=M('[name="padding"]',e).val(2),g=M('[name="spacing"]',e).val(0),v=M('[name="textAlign"]',e),b=M('[name="verticalAlign"]',e),y=M('[name="border"]',e).val(1),k=M(".ke-input-color",e),w=(l(e,k.eq(0)),l(e,k.eq(1)),o(k.eq(0),"#000000"),o(k.eq(1),""),u[0].focus(),u[0].select(),A.plugin.getSelectedCell()),e=w[0].style.width||w[0].width||"",t=w[0].style.height||w[0].height||"";(e=/^(\d+)((?:px|%)*)$/.exec(e))?(u.val(e[1]),p.val(e[2])):u.val(""),(e=/^(\d+)((?:px|%)*)$/.exec(t))&&(h.val(e[1]),f.val(e[2])),v.val(w[0].style.textAlign||""),b.val(w[0].style.verticalAlign||"");t=(t=w[0].style.borderWidth||"")&&parseInt(t);y.val(t),o(k.eq(0),M.toHex(w[0].style.borderColor||"")),o(k.eq(1),M.toHex(w[0].style.backgroundColor||"")),u[0].focus(),u[0].select()},insert:function(){this.prop(!0)},delete:function(){var e=A.plugin.getSelectedTable();A.cmd.range.setStartBefore(e[0]).collapse(!0),A.cmd.select(),e.remove(),A.addBookmark()},colinsert:function(e){var t=A.plugin.getSelectedTable()[0],n=A.plugin.getSelectedRow()[0],i=A.plugin.getSelectedCell()[0],r=i.cellIndex+e;r+=t.rows[0].cells.length-n.cells.length;for(var o=0,a=t.rows.length;o<a;o++){var l=t.rows[o],s=l.insertCell(r);s.innerHTML=M.IE?"":"<br />",r=c(0,l,s)}A.cmd.range.selectNodeContents(i).collapse(!0),A.cmd.select(),A.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(e){for(var t=A.plugin.getSelectedTable()[0],n=A.plugin.getSelectedRow()[0],i=A.plugin.getSelectedCell()[0],r=n.rowIndex,o=(1===e&&(r=n.rowIndex+(i.rowSpan-1)+e),t.insertRow(r)),a=0,l=n.cells.length;a<l;a++){1<n.cells[a].rowSpan&&(l-=n.cells[a].rowSpan-1);var s=o.insertCell(a);1===e&&1<n.cells[a].colSpan&&(s.colSpan=n.cells[a].colSpan),s.innerHTML=M.IE?"":"<br />"}for(var c=r;0<=c;c--){var d=t.rows[c].cells;if(d.length>a){for(var u=i.cellIndex;0<=u;u--)1<d[u].rowSpan&&(d[u].rowSpan+=1);break}}A.cmd.range.selectNodeContents(i).collapse(!0),A.cmd.select(),A.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var e=A.plugin.getSelectedTable()[0],t=A.plugin.getSelectedRow()[0],n=A.plugin.getSelectedCell()[0],t=t.rowIndex+n.rowSpan,i=e.rows[t];e.rows.length<=t||(e=n.cellIndex,i.cells.length<=e)||(t=i.cells[e],n.colSpan===t.colSpan&&(n.rowSpan+=t.rowSpan,i.deleteCell(e),A.cmd.range.selectNodeContents(n).collapse(!0),A.cmd.select(),A.addBookmark()))},colmerge:function(){A.plugin.getSelectedTable()[0];var e,t=A.plugin.getSelectedRow()[0],n=A.plugin.getSelectedCell()[0],i=(t.rowIndex,n.cellIndex+1);t.cells.length<=i||(e=t.cells[i],n.rowSpan===e.rowSpan&&(n.colSpan+=e.colSpan,t.deleteCell(i),A.cmd.range.selectNodeContents(n).collapse(!0),A.cmd.select(),A.addBookmark()))},rowsplit:function(){var e=A.plugin.getSelectedTable()[0],t=A.plugin.getSelectedRow()[0],n=A.plugin.getSelectedCell()[0],i=t.rowIndex;if(1!==n.rowSpan){for(var r=c(0,t,n),o=1,a=n.rowSpan;o<a;o++){var l=e.rows[i+o],s=l.insertCell(r);1<n.colSpan&&(s.colSpan=n.colSpan),s.innerHTML=M.IE?"":"<br />",r=c(0,l,s)}M(n).removeAttr("rowSpan"),A.cmd.range.selectNodeContents(n).collapse(!0),A.cmd.select(),A.addBookmark()}},colsplit:function(){A.plugin.getSelectedTable()[0];var e=A.plugin.getSelectedRow()[0],t=A.plugin.getSelectedCell()[0],n=t.cellIndex;if(1!==t.colSpan){for(var i=1,r=t.colSpan;i<r;i++){var o=e.insertCell(n+i);1<t.rowSpan&&(o.rowSpan=t.rowSpan),o.innerHTML=M.IE?"":"<br />"}M(t).removeAttr("colSpan"),A.cmd.range.selectNodeContents(t).collapse(!0),A.cmd.select(),A.addBookmark()}},coldelete:function(){for(var e=A.plugin.getSelectedTable()[0],t=A.plugin.getSelectedRow()[0],n=A.plugin.getSelectedCell()[0].cellIndex,i=0,r=e.rows.length;i<r;i++){var o=e.rows[i],a=o.cells[n];1<a.colSpan?(--a.colSpan,1===a.colSpan&&M(a).removeAttr("colSpan")):o.deleteCell(n),1<a.rowSpan&&(i+=a.rowSpan-1)}0===t.cells.length?(A.cmd.range.setStartBefore(e).collapse(!0),A.cmd.select(),M(e).remove()):A.cmd.selection(!0),A.addBookmark()},rowdelete:function(){for(var e=A.plugin.getSelectedTable()[0],t=A.plugin.getSelectedRow()[0],n=A.plugin.getSelectedCell()[0],i=t.rowIndex,r=n.rowSpan-1;0<=r;r--)e.deleteRow(i+r);0===e.rows.length?(A.cmd.range.setStartBefore(e).collapse(!0),A.cmd.select(),M(e).remove()):A.cmd.selection(!0),A.addBookmark()}},A.clickToolbar(i,A.plugin.table.prop)}),KindEditor.plugin("template",function(o){var a=this,l="template",s=(a.lang(l+"."),a.pluginsPath,o.undef(a.templates,o.Templates));a.clickToolbar(l,function(){var e=a.lang(l+"."),n=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',e.selectTemplate+" <select>"],e=(o.each(s,function(e,t){n.push("<option value='"+t.content+"'>"+t.name+"</option>")}),dt=[n.join(""),"</select></div>",'<div class="ke-right">','<input type="checkbox" id="keReplaceFlag" name="replaceFlag" value="1" /> <label for="keReplaceFlag">'+e.replaceContent+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-temp-preview" style="width:518px;height:260px;background-color:#FFF;padding: 12px;overflow:auto;border-color: #848484 #E0E0E0 #E0E0E0 #848484;border-style: solid;border-width: 1px;"></div>',"</div>"].join(""),a.createDialog({name:l,width:560,title:a.lang(l),body:dt,yesBtn:{name:a.lang("yes"),click:function(e){a[i[0].checked?"html":"insertHtml"](t.val()).hideDialog().focus()}}})),t=o("select",e.div),i=o('[name="replaceFlag"]',e.div),r=o(".ke-temp-preview",e.div);i[0].checked=!1,r.html(t.val()),t.change(function(){r.html(this.value)})})}),KindEditor.plugin("wordpaste",function(i){var r=this,t="wordpaste";r.clickToolbar(t,function(){var e='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+r.lang(t+".").comment+'</div><iframe class="ke-textarea" frameborder="0" style="width:518px;height:260px;"></iframe></div>',e=r.createDialog({name:t,width:560,title:r.lang(t),body:e,yesBtn:{name:r.lang("yes"),click:function(e){var t=n.body.innerHTML,t=i.clearMsWord(t,(r.filterMode?r:i.options).htmlTags);r.insertHtml(t).hideDialog().focus()}}}).div,e=i("iframe",e),n=i.iframeDoc(e);i.IE||(n.designMode="on"),n.open(),n.write("<!doctype html><html><head><title>WordPaste</title></head>"),n.write('<body style="background-color:#FFF;font-size:12px;margin:2px;">'),i.IE||n.write("<br />"),n.write("</body></html>"),n.close(),i.IE&&(n.body.contentEditable="true"),e[0].contentWindow.focus()})}),KindEditor.plugin("fixtoolbar",function(e){var r,t=e("body");function n(){var n=e(".ke-toolbar"),i=e(n).parent();e(".ke-toolbar").width();e(window).bind("resize",function(){n.css("width",e(i).width()-2+"px")}),n.css("width",e(i).width()+"px"),e(r).bind("scroll",function(){var e=i.pos().y,t=r.pos().y;e<=t?(n.css("position","fixed"),n.css("top",t+"px"),n.css("border-top","1px solid #ccc")):(n.css("position","static"),n.css("top","auto"),n.css("border-top","none"))})}this.fixToolBar&&(this.fixToolBarWatchRef&&(t=e(this.fixToolBarWatchRef)),(r=e(t)).length<1?console.error("fixToolBarWatchRef can not be null"):this.isCreated?n():this.afterCreate(n))}),KindEditor.lang({source:"HTML代码",preview:"预览",undo:"后退(Ctrl+Z)",redo:"前进(Ctrl+Y)",cut:"剪切(Ctrl+X)",copy:"复制(Ctrl+C)",paste:"粘贴(Ctrl+V)",plainpaste:"粘贴为无格式文本",wordpaste:"从Word粘贴",selectall:"全选(Ctrl+A)",justifyleft:"左对齐",justifycenter:"居中",justifyright:"右对齐",justifyfull:"两端对齐",insertorderedlist:"编号",insertunorderedlist:"项目符号",indent:"增加缩进",outdent:"减少缩进",subscript:"下标",quote:"引用",superscript:"上标",formatblock:"段落",fontname:"字体",fontsize:"文字大小",forecolor:"文字颜色",hilitecolor:"文字背景",bold:"粗体(Ctrl+B)",italic:"斜体(Ctrl+I)",underline:"下划线(Ctrl+U)",strikethrough:"删除线",removeformat:"删除格式",image:"图片",multiimage:"批量图片上传",flash:"Flash",media:"视音频",table:"表格",tablecell:"单元格",hr:"插入横线",emoticons:"插入表情",symbols:"特殊字符",swiper:"轮播图",link:"超级链接",unlink:"取消超级链接",fullscreen:"全屏显示",about:"关于",print:"打印(Ctrl+P)",filemanager:"文件空间",code:"插入程序代码",map:"Google地图",baidumap:"百度地图",lineheight:"行距",clearhtml:"清理HTML代码",pagebreak:"插入分页符",quickformat:"一键排版",insertfile:"插入文件",template:"插入模板",anchor:"锚点",yes:"确定",no:"取消",close:"关闭",editImage:"图片属性",deleteImage:"删除图片",editFlash:"Flash属性",deleteFlash:"删除Flash",editMedia:"视音频属性",deleteMedia:"删除视音频",editLink:"超级链接属性",deleteLink:"取消超级链接",editAnchor:"锚点属性",deleteAnchor:"删除锚点",tableprop:"表格属性",tablecellprop:"单元格属性",tableinsert:"插入表格",tabledelete:"删除表格",tablecolinsertleft:"左侧插入列",tablecolinsertright:"右侧插入列",tablerowinsertabove:"上方插入行",tablerowinsertbelow:"下方插入行",tablerowmerge:"向下合并单元格",tablecolmerge:"向右合并单元格",tablerowsplit:"拆分行",tablecolsplit:"拆分列",tablecoldelete:"删除列",tablerowdelete:"删除行",noColor:"无颜色",pleaseSelectFile:"请选择文件。",invalidImg:"请输入有效的URL地址。\n只允许jpg,gif,bmp,png格式。",invalidMedia:"请输入有效的URL地址。\n只允许swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb格式。",invalidWidth:"宽度必须为数字。",invalidHeight:"高度必须为数字。",invalidBorder:"边框必须为数字。",invalidUrl:"请输入有效的URL地址。",invalidRows:"行数为必选项，只允许输入大于0的数字。",invalidCols:"列数为必选项，只允许输入大于0的数字。",invalidPadding:"边距必须为数字。",invalidSpacing:"间距必须为数字。",invalidJson:"服务器发生故障。",uploadSuccess:"上传成功。",cutError:"您的浏览器安全设置不允许使用剪切操作，请使用快捷键(Ctrl+X)来完成。",copyError:"您的浏览器安全设置不允许使用复制操作，请使用快捷键(Ctrl+C)来完成。",pasteError:"您的浏览器安全设置不允许使用粘贴操作，请使用快捷键(Ctrl+V)来完成。",ajaxLoading:"加载中，请稍候 ...",uploadLoading:"上传中，请稍候 ...",uploadError:"上传错误","plainpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","wordpaste.comment":"请使用快捷键(Ctrl+V)把内容粘贴到下面的方框里。","code.pleaseInput":"请输入程序代码。","link.url":"URL","link.linkType":"打开类型","link.newWindow":"新窗口","link.selfWindow":"当前窗口","flash.url":"URL","flash.width":"宽度","flash.height":"高度","flash.upload":"上传","flash.viewServer":"文件空间","media.url":"URL","media.width":"宽度","media.height":"高度","media.autostart":"自动播放","media.upload":"上传","media.viewServer":"文件空间","image.remoteImage":"网络图片","image.localImage":"本地上传","image.remoteUrl":"图片地址","image.localUrl":"上传文件","image.size":"图片大小","image.width":"宽","image.height":"高","image.resetSize":"重置大小","image.align":"对齐方式","image.defaultAlign":"默认方式","image.leftAlign":"左对齐","image.rightAlign":"右对齐","image.imgTitle":"图片说明","image.upload":"浏览...","image.viewServer":"图片空间","multiimage.uploadDesc":"允许用户同时上传<%=uploadLimit%>张图片，单张图片容量不超过<%=sizeLimit%>","multiimage.startUpload":"开始上传","multiimage.clearAll":"全部清空","multiimage.insertAll":"全部插入","multiimage.queueLimitExceeded":"文件数量超过限制。","multiimage.fileExceedsSizeLimit":"文件大小超过限制。","multiimage.zeroByteFile":"无法上传空文件。","multiimage.invalidFiletype":"文件类型不正确。","multiimage.unknownError":"发生异常，无法上传。","multiimage.pending":"等待上传","multiimage.uploadError":"上传失败","filemanager.emptyFolder":"空文件夹","filemanager.moveup":"移到上一级文件夹","filemanager.viewType":"显示方式：","filemanager.viewImage":"缩略图","filemanager.listImage":"详细信息","filemanager.orderType":"排序方式：","filemanager.fileName":"名称","filemanager.fileSize":"大小","filemanager.fileType":"类型","insertfile.url":"URL","insertfile.title":"文件说明","insertfile.upload":"上传","insertfile.viewServer":"文件空间","table.cells":"单元格数","table.rows":"行数","table.cols":"列数","table.size":"大小","table.width":"宽度","table.height":"高度","table.percent":"%","table.px":"px","table.space":"边距间距","table.padding":"边距","table.spacing":"间距","table.align":"对齐方式","table.textAlign":"水平对齐","table.verticalAlign":"垂直对齐","table.alignDefault":"默认","table.alignLeft":"左对齐","table.alignCenter":"居中","table.alignRight":"右对齐","table.alignTop":"顶部","table.alignMiddle":"中部","table.alignBottom":"底部","table.alignBaseline":"基线","table.border":"边框","table.borderWidth":"边框","table.borderColor":"颜色","table.backgroundColor":"背景颜色","map.address":"地址: ","map.search":"搜索","baidumap.address":"地址: ","baidumap.search":"搜索","baidumap.insertDynamicMap":"插入动态地图","anchor.name":"锚点名称","formatblock.formatBlock":{h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",p:"正 文"},"fontname.fontName":{SimSun:"宋体",NSimSun:"新宋体",FangSong_GB2312:"仿宋_GB2312",KaiTi_GB2312:"楷体_GB2312",SimHei:"黑体","Microsoft YaHei":"微软雅黑",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"单倍行距"},{1.5:"1.5倍行距"},{2:"2倍行距"},{2.5:"2.5倍行距"},{3:"3倍行距"}],"template.selectTemplate":"可选模板","template.replaceContent":"替换当前内容","template.fileList":{"1.html":"图片和文字","2.html":"表格","3.html":"项目编号"}},"zh-CN"),KindEditor.options.langType="zh-CN",KindEditor});